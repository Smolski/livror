%% abtex2-modelo-livro.tex, v-1.9.6 ycherem
%% Copyright 2012-2016 by abnTeX2 group at http://www.abntex.net.br/
%%
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your o ption) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
%% This work has the LPPL maintenance status `maintained'.
%%
%% Further information is available on 
%% http://www.abntex.net.br/
%%
%% This work consists of the files
%% abntex2-modelo-livro.tex, abntex2-modelo-references.bib,   
%% abntex2-modelo-livro-pintassilgo.jpg,
%% abntex2-modelo-livro-saira-amarela.jpg,
%% abntex2-modelo-livro-bandeirinha.jpg
%%

\documentclass[
	% -- opções da classe memoir --
	10pt,				% tamanho da fonte
	openright,			% capítulos começam em pág ímpar (insere página vazia caso preciso)
	oneside,			% para impressão em recto e verso. Oposto a oneside
	a5paper,			% tamanho do papel. 
	% -- opções da classe abntex2 --
	%ch apter=TITLE,		% títulos de capítulos convertidos em letras maiúsculas
	%section=TITLE,		% títulos de seções convertidos em letras maiúsculas
	%subsection=TITLE,	% títulos de subseções convertidos em letras maiúsculas
	%subsubsection=TITLE,% títulos de subsubseções convertidos em letras maiúsculas
	% -- opções do pacote babel --
	english,			 % idioma adicional para hifenização
%	french,				% idioma adicional para hifenização
%	spanish,			% idioma adicional para hifenização
	brazil,				% o último idioma é o principal do documento
	sumario=tradicional
]{abntex2}

\renewcommand{\ABNTEXchapterfont}{\rmfamily\bfseries}
\renewcommand{\ABNTEXchapterfontsize}{\large}
\renewcommand{\ABNTEXsectionfontsize}{\large}
\renewcommand{\ABNTEXsectionfont}{\rmfamily\bfseries}
\renewcommand{\ABNTEXsubsectionfont}{\rmfamily\bfseries}
\renewcommand{\ABNTEXsubsubsectionfont}{\rmfamily\bfseries}
\addto\captionsbrazil{%
  \renewcommand{\listfigurename}%
    {Lista de figuras}%
}

\usepackage{amsmath}
\usepackage{wrapfig}
\usepackage{makeidx}
\usepackage{caption}
\captionsetup[table]{font=small,skip=0pt}
\captionsetup[figure]{font=small,skip=0pt}
\captionsetup{belowskip=0pt,aboveskip=0pt}
\usepackage{alltt}
\usepackage[]{graphicx}
\usepackage{color}
%% maxwidth is the original width if it is less than linewidth
%% otherwise use linewidth (to make sure the graphics do not exceed the 
\usepackage{pdfpages}
\usepackage[utf8]{inputenc}
\usepackage{chngcntr}
\counterwithout{footnote}{chapter}
\usepackage{indentfirst}
\afterindentfalse
\usepackage{mathptmx}
%\usepackage{times}
%\usepackage{fourier}
\usepackage{lmodern}

\usepackage{longtable,ltcaption}

%% Observação: o pacote polyglossia pode apresentar erro ao ser utilizado com ifxetex + babel. 
%% Se isso acontecer, atualize o pacote para a versão mais recente ou utilize somente uma das sequências (pdflatex ou xelatex), comentando ou apagando a outra.
\usepackage[brazil]{babel}
\usepackage[T1]{fontenc}
\usepackage{microtype} 				% para melhorias de justificação
\usepackage[dvipsnames]{xcolor} 	% para cores
\usepackage{graphicx} 				% para imagens
\usepackage{booktabs,tabularx,rotating}% para tabelas
\usepackage{mdframed} 				% para caixas de texto como na CIP do verso do título
\usepackage{multicol}				% tabelas com colunas mescladas
\usepackage{lettrine}				% letras capitulares
\usepackage{xspace} 				% para nao precisar de espaços com {} depois de comandos
									% como \LaTeX e abreviações criadas pelo usuário
\usepackage{lipsum} 				% para texto de preenchimento de exemplo
%\usepackage{leading}				% espaçamento entrelinhas (leading)
%\leading{13pt}

\usepackage{suffix}

\newcommand\chapterauthor[1]{\authortoc{#1}\printchapterauthor{#1}}
\WithSuffix\newcommand\chapterauthor*[1]{\printchapterauthor{#1}}


\makeatletter
\newcommand{\printchapterauthor}[1]{%
  {\parindent0pt\vspace*{-25pt}%
  %\linespread{1.1}\large\scshape#1%
  \par\nobreak\vspace*{35pt}}
  \@afterheading%
}
\newcommand{\authortoc}[1]{%
  \addtocontents{toc}{\vskip-5pt}%
  \addtocontents{toc}{%
    \protect\contentsline{chapter}%
    {\hskip1.3em\mdseries\scshape\protect\scriptsize#1}{}{}}
  \addtocontents{toc}{\vskip5pt}%
}
\makeatother



% ---
% Pacotes de citações
% ---
%
\usepackage[abnt-and-type=e, abnt-emphasize=bf, alf, abnt-repeated-author-omit=yes,abnt-etal-text=it,abnt-nbr10520=2001]{abntex2cite}  
%---------------


% ---
% Informações do documento
% ---
\titulo{Software R: Análise estatística de dados utilizando um programa livre}
\autor{Iara Denise Endruweit Battisti\\Felipe Micail da Silva Smolski}
\data{2019}
\preambulo{Breve sinopse do livro}
\local{Cerro Largo}
\instituicao{EDITORA FAITH}

% alterando o aspecto da cor azul
\definecolor{blue}{RGB}{41,5,195}

% informações do PDF
\makeatletter
\hypersetup{
     	%pagebackref=true,
		pdftitle={\@title}, 
		pdfauthor={\@author},
    	pdfsubject={\imprimirpreambulo},
	    pdfcreator={LaTeX with abnTeX2},
		pdfkeywords={Estatística}{R}{RStudio}{UFFS}, 
		colorlinks=true,       		% false: boxed links; true: colored links
    	linkcolor=black,          	% color of internal links
    	citecolor=black,        		% color of links to bibliography
    	filecolor=magenta,      		% color of file links
		urlcolor=black,
		bookmarksdepth=4
}
\makeatother
% ---


% ---
% Estilo de capítulos
%
% \chapterstyle{pedersen} 
% \chapterstyle{lyhne} 
 \chapterstyle{madsen} %legal
% \chapterstyle{veelo} 
%\chapterstyle{bianchi} %legal
%\chapterstyle{southall}
%\chapterstyle{VZ15b}
%\chapterstyle{BlueBox}
%\chapterstyle{default}


%
% Veja outros estilos em:
% https://www.ctan.org/tex-archive/info/MemoirChapStyles
% ---

% para cabeçalhos sem estar em maiúsculas
%\nouppercaseheads 

% -----
% Declarações de cabecalhos 
% -----
% Cabecalho padrao
\makepagestyle{abntbookheadings}
\makeevenhead{abntbookheadings}{\ABNTEXfontereduzida\thepage}{}{\ABNTEXfontereduzida\textit\leftmark}
\makeoddhead{abntbookheadings}{\ABNTEXfontereduzida\textit\rightmark}{}{\ABNTEXfontereduzida\thepage}
\makeheadrule{abntbookheadings}{\textwidth}{\normalrulethickness}

% Cabecalho do inicio do capitulo
\makepagestyle{abntbookchapfirst}
\makeoddhead{abntbookchapfirst}{}{}{}

% Configura layout para elementos textuais
\renewcommand{\textual}{%
  \pagestyle{abntbookheadings}%
  \aliaspagestyle{chapter}{abntbookchapfirst}% customizing chapter pagestyle
  \aliaspagestyle{chapter*}{abntbookchapfirst}% customizing chapter pagestyle
  \nouppercaseheads%
  \bookmarksetup{startatroot}% 
}


% ---

% ---
% Espaçamentos entre linhas e parágrafos
% ---
% O tamanho do parágrafo é dado por (exemplo):
%\setlength{\parindent}{1.3cm}
\setlength{\parindent}{1.00cm}
%% Não recomendado mudar.
 
% Controle do espaçamento entre um parágrafo e outro:
%\setlength{\parskip}{0.2cm}  % tente também \onelineskip
%% Não recomendado mudar.



% Margens do documento 
%% (margens do abntex2 não combinam nem com A5 nem com estilos de capítulo da
% classe memoir.)
\setlrmarginsandblock{1.5cm}{1.5cm}{*}
\setulmarginsandblock{1.5cm}{1.5cm}{*}
\checkandfixthelayout
% ---

\usepackage{tikz} % Required for drawing custom shapes
\definecolor[named]{color01}{rgb}{.2,.4,.6} % Color used in the title page
\usepackage{wallpaper} % Required for setting background images (title page)
% ---
% Início do documento
% ---
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}

\makeindex



\begin{document}
%\SweaveOpts{concordance=TRUE}
%\SweaveOpts{concordance=TRUE}


\frenchspacing

\frontmatter
\pagenumbering{roman}

% ---
% Capa principal
% ---
\begin{titlingpage}
%\phantom{xxx}
%\vspace{0.5cm}
%\huge
%\raggedright
%\imprimirautor\\
%\vspace{2.5cm}
%\huge 
\thispagestyle{empty}

\includepdf{CapaFINAL.png}
%\noparindent\includegraphics[width=\paperwidth]{Capa}%[1cm]
%\textit{\textcolor{blue}{\imprimirtitulo}}\\begin{equation}1cm]

\centering 
%  %este é um símbolo que só aparecerá com a fonte Minion.
%\vfill
%\Large
% %este é um símbolo que só aparecerá com a fonte Minion.
%\imprimirinstituicao
\end{titlingpage}
% ---

% ---
% Contra-capa
% ---
\begin{titlingpage}

\phantom{xxx}
\vspace{-1.5cm}
\large
\raggedright
\begin{center}
Organizadores:\\
\imprimirautor\\
\end{center}
\vspace{2.5cm}
%\huge 
\vspace{2.5cm}

\begin{center}
\textbf{\textit{{\Huge\imprimirtitulo}}} \\
\end{center}

\begin{center}
1a. Edição
\end{center}

\centering 
% %este é um símbolo que só aparecerá com a fonte Minion.
\vfill
\Large
% %este é um símbolo que só aparecerá com a fonte Minion.
BAGÉ\\
EDITORA FAITH\\
2019
% ---

% ---
% Verso da contra-capa
% ---
\clearpage
\ABNTEXfontereduzida
%\raggedright
\begin{flushleft}
\large
\textbf{Título:} Software R: Análise estatística de dados utilizando um programa livre.\\
\textbf{Organizadores:} Iara Denise Endruweit Battisti e Felipe Micail da Silva
Smolski\\
\textbf{Capa e diagramação:} Felipe Micail da Silva Smolski\\
\textbf{Copyright:} \©2019 todos os direitos reservado aos autores e organizadores,
sob encomenda à Editora Faith.\\
\textbf{ISBN:} 978-85-68221-XX-X\\



%\
%© 2019 \imprimirautor \space \& \\ \imprimirinstituicao
%este é só um exemplo de copyright.



%Qualquer parte desta publicação pode ser reproduzida, desde que citada a fonte.
\end{flushleft}



\begin{center}
\large
Dados Internacionais de Catalogação na Publicação (CIP)
\end{center}

\vspace*{\fill}
%\begin{mdframed}
%\noindent Tal, Fulano de.

%\imprimirtitulo. / \imprimirautor. -- \imprimirlocal: \imprimirinstituicao
 %Ltda., 2019.

%\medskip

%Bibliografia.

%ISBN XXXX-XXXX-XX.

%\medskip

%1. R. 2. Estatística. 3. Rstudio. 4. UFFS.

%\end{mdframed}

\newpage

\begin{center}
%\large
\textbf{Direção Geral}\\
Caroline Powarczuk Haubert\\

\textbf{Revisão}\\
Organizadores\\

\textbf{Corpo Editorial}\\
Prof. Dr. Alfredo Alejandro Gugliano - UFRGS\\
Prof. Dr. Cristóvão Domingos de Almeida - UFMT\\
Prof. Dr. Dejalma Cremonese - UFSM\\
Profa. Dra. Elisângela Maia Pessôa - UNIPAMPA\\
Prof. Dr. Fernando da Silva Camargo - UFPEL\\
Prof. Dr. Gabriel Sausen Feil - UNIPAMPA\\
Profa. Dra. Patrícia Krieger Grossi - PUC-RS\\
Prof. Dr. Ronaldo B. Colvero - UNIPAMPA\\
Profa. Dra. Simone Barros Oliveira - UNIPAMPA\\
Profa. Dra. Sheila Kocourek - UFSM\\
Prof. Dr. Edson Paniagua - UNIPAMPA\\
Profa. Dra. Maria de Fátima Bento Ribeiro – UFPEL\\
Profa. Dra. Danusa de Lara Bonoto – UFFS\\
Profa. Dra. Érica do Espírito Santo Hermel – UFFS\\
Prof. Dr. João Carlos Krause – URI\\
Prof. Dr. Márcio Marques Martins - UNIPAMPA\\
Prof. Dr. Marcos Barros - UFPE\\
Profa. Dra. Paula Vanessa Bervian – UFFS\\
Profa. Dra. Sandra Nonenmacher – IFFAR\\


\end{center}


\end{titlingpage}

%\thispagestyle{empty}
%\include{capa}
%\thispagestyle{empty}
%\include{contracapa}
%\thispagestyle{empty}
%\include{versocontracapa}




% ---
%Agradecimentos
% ---
%\begin{agradecimentos}

%\lipsum[9]


%\end{agradecimentos} 
% ---

%\addcontentsline{toc}{chapter}{Apresentação}
%\hypertarget{apres}{
%\renewcommand{\errataname}{Apresentação}}

%\hypertarget{apres}{
%\chapter*{Apresentação}
%}

%\begin{errata}


%\end{errata} 

% ---
% inserir o sumario
% ---
\pdfbookmark[0]{\contentsname}{toc}
\begin{KeepFromToc}
  \tableofcontents
\end{KeepFromToc}
\cleardoublepage
% ---



% ---
% inserir lista de ilustrações
% ---
%\pdfbookmark[0]{\listfigurename}{lof}
%\begin{KeepFromToc}
\hypertarget{listafig}{
%\addcontentsline{toc}{chapter}{Lista de figuras}
\listoffigures}
%\end{KeepFromToc}
\cleardoublepage

% ---
% inserir lista de tabelas
% ---
%\pdfbookmark[0]{\listtablename}{lot}
%\begin{KeepFromToc}
\hypertarget{listaimg}{
%\addcontentsline{toc}{chapter}{Lista de tabelas}
\listoftables}
%\end{KeepFromToc}
\cleardoublepage
% ---


% ------------------------------------------------------------
% Início da parte textual
% ------------------------------------------------------------
%\textual
\mainmatter
% ------------------------------------------------------------
\pagenumbering{arabic}

% ------------------------------------------------------------
%\chapter*[Introdução]{Introdução}
%\addcontentsline{toc}{chapter}{Introdução}
% ------------------------------------------------------------
%\begin{flushright} \vspace{-1cm}
%\emph{Felipe Micail da Silva Smolski}
%\end{flushright}

\addcontentsline{toc}{chapter}{Apresentação}
\hypertarget{apresent}{%
\chapter*[Apresentação]{Apresentação} \label{apres}}


A necessidade de flexibilidade e robustez para a análise estatística fez com que fosse criado, na década de 1990, a linguagem de programação R. Capitaneado pelos desenvolvedores Ross Ihaka e Robert Gentleman, dois estatísticos da Universidade de Auckland na Nova Zelândia, o projeto foi uma grande evolução para a análise de dados. A partir de então, a ideia inicial de proporcionar autonomia ao pesquisador, viu na expansão do acesso à internet uma oportunidade para que a pesquisa científica se tornasse cada vez mais colaborativa. Ao mesmo tempo, os códigos e rotinas se tornaram facilmente disponibilizáveis na rede, aumentando a reprodução e replicação dos estudos, práticas estas que podem tornar as análises mais confiáveis.

A linguagem de programação R trouxe consigo inúmeras vantagens aos pesquisadores. Dentre elas, pode-se dizer primeiramente que, basicamente o R trabalha com uma extensa relação de modelos estatísticos, que vão desde a modelagem linear e não-linear, a análise de séries temporais, os testes estatísticos clássicos, análise de grupamento e classificação, etc. Não bastasse este fato, é possível a apresentação gráfica dos resultados contando com variadas técnicas, passando também pela criação e manipulação de mapas.

Outra questão importante é que o R possui uma comunidade ativa de desenvolvedores, que se expande regularmente. Isto faz com que as técnicas de análise de dados atinjam pesquisadores de variadas disciplinas ao longo do planeta. Inclusive, concebe que o desenvolvimento dos pacotes melhorem constantemente. No ano de 2018, já haviam mais de 12.700 pacotes disponibilizados. Não menos importante, talvez o essencial: o programa é livre, ao passo que entrega o estado da arte da estatística ao usuário.

Outro progresso significativo na utilização do R foi a criação do \emph{software} RStudio, a partir de 2010. Este, por sua vez, se configura em um ambiente integrado com o R e com inúmeras linguagens de marcação de texto (exemplos \LaTeX, Markdown, HTML). Possui igualmente versão livre que disponibiliza ao pesquisador a execução, guarda, retomada e manipulação dos códigos de programação diretamente em seu console, bem como a administração de diretórios de trabalhos e projetos.

O material aqui elaborado é destinado não somente a alunos de graduação, pós-graduação, professores e pesquisadores acadêmicos, mas também para qualquer indivíduo interessado no aprendizado inicial sobre a utilização de técnicas estatísticas com o R. Inclusive, com o objetivo de alcançar um público das mais variadas áreas do conhecimento, esta obra foi elaborada com exemplos gerais, a serem absorvidos em um momento inicial do estudante. Assim, possui a base para continuar estudos posteriores em estatística e no \emph{software} RStudio. 

O sistema operacional aqui utilizado é o Windows 10, o software R versão 3.5.3, RStudio 1.1.463. A solução dos exercícios de cada capítulo está disponibilizada no site \url{https://smolski.github.io/softwarelivrer/livro.html}. Importante mencionar que este livro originou-se de projeto de extensão aprovado no Edital de Apoio a Programas de Extensão (Número 522/GR/UFFS/2016) da Universidade Federal da Fronteira Sul (UFFS).

Este livro está organizado da seguinte maneira: no capítulo \protect\hyperlink{intro}{1} {[}\textbf{Primeiros Passos com o R}{]}, busca-se instruir o pesquisador para a instalação dos programas necessários para acessar o ambiente de programação, bem como orientar sobre a usabilidade do programa em suas funções básicas de carregamento de bases de dados, criação de objetos e princípios de manipulação.

Já no capítulo \protect\hyperlink{desc}{2} {[}\textbf{Estatística Descritiva}{]}, leva o leitor ao encontro das técnicas básicas para descrever as variáveis em bancos de dados, como exemplos a média, desvio-padrão, os quartis e também, apresentar os princípios dos elementos gráficos de apresentação dos dados.

O capítulo \protect\hyperlink{inf}{3} {[}\textbf{Estatística Inferencial}{]} tratará dos métodos de determinação de intervalos de confiança (média e proporção), testes de hipóteses para verificar a normalidade dos dados e a comparação entre médias de duas amostras dependentes ou independentes.

No capítulo \protect\hyperlink{qui}{4} {[}\textbf{Teste de Qui-Quadrado}{]}, serão abordadas as referidas técnicas para verificação de asssociação entre duas variáveis qualitativas e de aderência a uma distribuição.

No capítulo \protect\hyperlink{reg}{5} {[}\textbf{Modelos de Regressão Linear Simples}{]} serão introduzidos os conhecimentos sobre as técnicas de análise de correlação e regressão linear simples, bem como sobre o diagrama de dispersão, método dos mínimos quadrados, análise de variância, coeficiente de determinação e intervalo de predição, da análise dos resíduos e dos princípios de regressão múltipla.

A criação de documentos dinâmicos utilizando o RStudio será tratada no capítulo \protect\hyperlink{rmark}{6} {[}\textbf{RMarkdown}{]}. O pesquisador poderá conhecer as formas de integrar a programação no R e a manipulação de bases de dados, criando, compilando e configurando relatórios finais em diversos formatos (HTML, PDF e Word/Libre/Open Office).

Bons estudos!

\begin{flushright}
Iara Denise Endruweit Battisti\\
Felipe Micail da Silva Smolski\\
\textbf{Organizadores}
\end{flushright}

  
% ------------------------------------------------------------
\hypertarget{intro}{%
\chapter{Primeiros Passos com o R} \label{intro}}
\chapterauthor{Felipe Micail da Silva Smolski, Djaina Sibiani Rieger}
% ------------------------------------------------------------

\begin{flushright} \vspace{-1cm}
\emph{Felipe Micail da Silva Smolski\\ Djaina Sibiani Rieger}
\end{flushright}

<<r setup, include=FALSE>>=
library(knitr)
knitr::opts_chunk$set(echo = TRUE)
opts_chunk$set(concordance=TRUE)
    opts_chunk$set(fig.align='center')
    opts_chunk$set(echo=TRUE)
    opts_chunk$set(size='scriptsize')
    opts_template$set(squarefigure = list(fig.height = 6, fig.width = 6))
library(magick)
@


O R é um ambiente voltado para análise de dados com o uso de uma linguagem de programação, frente a isso um conhecimento prévio dos princípios de programação facilita a compreensão da condução das análises aplicadas no software. Entretanto, não é pré-requisito. Neste capítulo serão abordados os primeiros passos para o emprego da linguagem de programação R utilizando uma interface ``amigável'' - o software RStudio. Além disso, serão apresentados os comandos básicos para a manipulação de dados dentro do RStudio.

\hypertarget{download-e-instalacao-do-r-e-rstudio}{%
\section{Download e instalação do R e Rstudio}\label{download-e-instalacao-do-r-e-rstudio}}

\textbf{R}: \url{http://www.r-project.org}. Clique em Download (CRAN) - escolha o link de um repositório - clique no link do sistema operacional (Linux, Mac ou Windows) - clique em \emph{install R for de first time - Download} (R CORE TEAM, \protect\hyperlink{ref-rcore}{2019}).

\textbf{RStudio}: \url{http://www.rstudio.com/products/rstudio/download}. Em RStudio Desktop, escolha a versão \emph{free}, seguido da opção do sistema operacional do usuário (RSTUDIO TEAM, \protect\hyperlink{ref-teamrstudio}{2019}).

Lembrando que:

\begin{itemize}
\tightlist
\item
  R é o software;
\item
  RStudio é uma ferramenta amigável para o R.
\end{itemize}

\hypertarget{paineis}{%
\section{Painéis}\label{paineis}}

O RStudio é a interface que faz com que seja mais fácil a utilização da programação em R.

\begin{figure}[!h]
\caption{Painéis do Rstudio}\label{fig:paineis1}
{\centering \includegraphics[width=0.7\linewidth]{paineis} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}



\begin{itemize}
\tightlist
\item
  \textbf{Fonte/Editor de Scripts}: se constitui do ambiente onde serão abertos os scripts previamente salvos nos mais diversos formatos ou mesmo sendo o local de visualização das bases de dados.
\item
  \textbf{Console}: local onde será efetuada a digitação das linhas de código que serão interpretadas pelo R.
\item
  \textbf{Ambiente e Histórico}: neste ambiente serão visualizados os objetos criados ou carregados durante a seção e; a aba History retoma os scripts digitados no console.
\item
  \textbf{Plots/arquivos/Pacotes}: local onde podem ser acessados os arquivos salvos no computador pela aba \emph{files}; a aba \emph{Plots} carrega os gráficos e plotagens; a aba \emph{Packages} contém os pacotes instalados em seu computador, onde são ativados ou instalados novos; em \emph{Help} constam as ajudas e explicações dos pacotes e; \emph{Viewer} visualiza documentos do tipo html.
\end{itemize}

\hypertarget{help}{%
\section{Help}\label{help}}

A ajuda do RStudio é acessada por meio do comando \texttt{help()}, através da aba ``Help'' ou ao clicar no nome do pacote. Pode-se digitar a ajuda que usuário necessita (exemplo \texttt{help("summary")}), ou diretamente no console digita-se ? e a função desejada, exemplo: \texttt{?mean}.

\hypertarget{instalacao-de-pacotes}{%
\section{Instalação de pacotes}\label{instalacao-de-pacotes}}

Em alguns situações, o uso de pacotes pode dar ao trabalho mais praticidade, sendo que para isso se faz necessário efetuar a sua instalação. É preciso ir até o painel dos pacotes em \emph{packages}, selecionar a opção instalar e inserir o nome do pacote desejado na janela indicada. Ao selecionar a opção instalar, no console são demonstradas informações do procedimento e do sucesso do mesmo.

\begin{figure}[!h]
\caption{Instalação de pacotes}\label{fig:pacotes1}
{\centering \includegraphics[width=0.7\linewidth]{pacotes1} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}



\begin{figure}[!h]
\caption{Caixa de informação de pacote a ser instalado}\label{fig:pacotes2}
{\centering \includegraphics[width=0.7\linewidth]{pacotes2} 

}
\legend{Fonte: Elaborado pelo(s) autor(es)}

\end{figure}



A mesma função, para instalação de um pacote, pode ser efetuada diretamente via console: \texttt{install.packages("pacote")}. É importante ressaltar a função \texttt{library(nomedopacote)} que é utilizada no console para informar ao R e ``carregar'' o pacote que o usuário irá utilizar. Podem ser instalados mais de um pacote ao mesmo tempo, como no exemplo:

\texttt{install.packages(c("readr",\ "readxl"))}

\hypertarget{abrir-arquivo-de-dados}{%
\section{Abrir arquivo de dados}\label{abrir-arquivo-de-dados}}

Dispondo de um banco de dados em uma planilha eletrônica (LibreOffice Calc ou Excel), neste caso será utilizado o arquivo `` árvores'' (\url{https://smolski.github.io/softwarelivrer/arvores.xlsx}) como exemplo de banco de dados. Os dados derivam de uma pesquisa com espécies de árvores registrando as variáveis diâmetro e altura. Dados cedidos pela professora Tatiane Chassot.

Pode-se utilizar a linha de comando para carregar os arquivos de dados, da seguinte forma:

\texttt{library(readxl)}

\texttt{nome.objeto.xls\ =\ read\_excel("d:/arvores.xls")}

Outras opções de arquivos podem ser carregados no RStudio, como por exemplo arquivos de texto (.txt ou .csv), planilhas eletrônicas (.xls ou .xlsx), arquivos de dados do SPSS (.sav), do \emph{software} SAS (.sas7bdat) e do STATA (.dta). A instalação de alguns pacotes é requerida, dependendo da origem da base de dados, como por exemplo o \texttt{readxl} (WICKHAM; BRYAN, \protect\hyperlink{ref-readxl2018}{2018}) , \texttt{readr} (WICKHAM; HESTER; FRANCOIS, \protect\hyperlink{ref-readr2018}{2018}) e \texttt{haven} (WICKHAM; MILLER, \protect\hyperlink{ref-haven2018}{2018}), como os exemplos abaixo:


\texttt{library(readr)}

\texttt{nomeobjeto\ =\ read.csv("d:/arvores.csv")}

\texttt{library(haven)}

\texttt{nomeobjeto\ =\ read\_sav("d:/arvores.sav")}

\texttt{nomeobjeto\ =\ read\_dta("d:/arvores.dta")}

\texttt{nomeobjeto\ =\ read\_sas("d:/arvores.sas7bdat")}

Outras opções podem ser comandadas dentro destes comando para abertura de arquivos, como por exemplo, um arquivo csv em que esteja separado por vírgulas pode ser lido como:

\texttt{read.csv("d:/arvores.csv",\ sep=",")}

O comando \texttt{header=TRUE} diz que a primeira linha do arquivo contém o cabeçalho; \texttt{skip=4} faz com que sejam ignoradas as 4 primeiras linhas.

A função \texttt{load()} (exemplo: \texttt{load("base.RData")}) pode ser utilizada para carregar as bases de dados salvas com a função \texttt{save()}, que será descrita no subcapítulo a seguir.

Outra opção é o carregamento das bases de dados manualmente pelo caminho \emph{Envoirment \(>\) Import Dataset}, escolhendo o tipo de arquivo:

\begin{figure}[!h]
\caption{Aba Import Dataset}\label{fig:r3}
{\centering \includegraphics[width=0.7\linewidth]{r3} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}



Na caixa correspondente a File/Url se insere o endereço virtual ou o local onde se encontra o arquivo. Ao importar os dados, carrega-se um objeto criado com as informações contidas no arquivo. Neste exemplo, é carregada a planilha \texttt{arvores} (arquivo .xls) como mostra a Figura \ref{fig:r4}, derivado do caminho ``Import Dataset \(>\) From Excel'' do Environment.

\begin{figure}[!h]
\caption{Caixa de informações do Import Data}\label{fig:r4}
{\centering \includegraphics[width=0.7\linewidth]{r4} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}


O campo \emph{Code Preview} mostra o comando que está sendo criado para a importação destes dados. Em \emph{Import Options}, delimita-se opções do objeto como o nome (\emph{name}), o número máximo de linhas (\emph{Max Rows}), quantas linhas serão puladas na importação do arquivo (\emph{Skip}), o tratamento das células em branco (\emph{NA}) e se a primeira linha contém os nomes (\emph{Firts Row as Names}).

Com relação à importação de arquivos de texto separado por caracteres (.csv), ela se dá via ``Import Dataset \(>\) From Text (readr)'' do Environment. Constam algumas solicitações diferentes a serem determinadas pelo usuário no campo \emph{Import Options}, conforme mostra a Figura \ref{fig:r4csv}. Uma questão importante é a opção \emph{Delimiter}, a qual o pesquisador tem que prestar atenção quando o arquivo está separado por vírgulas (\emph{Comma}), ponto e vírgula (\emph{Semicolon}) ou outro tipo de caractere. A opção \emph{Locale \(>\) Configure\ldots{}} oportuniza determinar os tipos de marca decimal e codificação de textos, por exemplo.

\begin{figure}[!h]
\caption{Opções da importação de arquivos .csv}\label{fig:r4csv}
{\centering \includegraphics[width=0.7\linewidth]{r4csv} 

}
\legend{Fonte: Elaborado pelo(s) autor(es)}
\end{figure}



Importante mencionar que em ambos os casos de importação, no campo \emph{Dada Preview} onde constam os dados do arquivo a ser importado, é possível determinar o tipo de dado que cada ``coluna'' contém. Isto é extremamente importante, pois campos que possuem números, que serão posteriormente utilizados em operações aritméticas, por exemplo, devem ser configurados como tal. No entanto, como será visto adiante, a alteração do tipo do dado também pode ser feita posteriormente sem problema algum.

Alguns tipos de dados:

\begin{itemize}
\tightlist
\item
  \textbf{Numeric}: números, valores decimais em geral (\texttt{5.4}).
\item
  \textbf{Integer}: números (\texttt{4}).
\item
  \textbf{Character}: variável de texto, ou \emph{string} (\texttt{casa}).
\item
  \textbf{Double}: cria um vetor de precisão dupla, que abarca os números.
\item
  \textbf{Logical}: operadores booleanos (\texttt{TRUE,\ FALSE}).
\item
  \textbf{Date}: opção para datas.
\item
  \textbf{Time}: vetor para séries de tempo.
\item
  \textbf{Factor}: variável nominal, inclusive como fator ordenado, representam categorias.
\end{itemize}

Ainda, é possível importar objetos utilizando arquivos hospedados em links da internet, por exemplo o comando abaixo utiliza a função \texttt{source()} para carregar um objeto do R denominado cdc (``cdc.R'').

\texttt{source("http://www.openintro.org/stat/data/cdc.R")} 

\hypertarget{salvar-arquivo-de-dados}{%
\section{Salvar arquivo de dados}\label{salvar-arquivo-de-dados}}

O banco de dados que o R armazena na memória pode ser salvo, junto com todo o ambiente, usando o ícone de disquete na aba ``Environment'' (salva como arquivo .RData), e depois carregado pelo ícone de pasta (Abrir dados\ldots{}) na mesma aba. Desta forma, salvará todos os objetos criados no ambiente de trabalho.

\begin{figure}[!h]
\caption{Atalho para abrir e salvar arquivo de dados}\label{fig:r6}
{\centering \includegraphics[width=0.7\linewidth]{r6} 

}
\legend{Fonte: Elaborado pelo(s) autor(es)}

\end{figure}



Outra opção com mesmo efeito é utilizar o comando a seguir diretamente no console do RStudio:

\texttt{save("nomeDoObjeto",file="nomeDoArquivo.RData")}

O nome do objeto pode ser uma lista de objetos para salvar mais de um objeto do ambiente, \texttt{list=("objeto1",\ "objeto2")}. Para carregar um arquivo RData no ambiente, o comando a ser utilizado pelo usuário é

\texttt{load("arquivo.RData")},

desde que o arquivo esteja no diretório de trabalho do R.

É possível exportar as bases trabalhadas para vários formatos de arquivos de dados e de texto, como seguem alguns exemplos:

\begin{itemize}
\tightlist
\item
  \texttt{write.csv(nomeobjeto,"file.csv",\ sep=";")}: salvando em arquivo csv.
\item
  \texttt{write.foreign(nomeobjeto,"d:/nome.sps")}: arquivos sps.
\item
  \texttt{write.foreign(nomeobjeto,"d:/nome.dta")}: arquivos dta.
\item
  \texttt{write.foreign(nomeobjeto,"d:/nome.sas7bdat")}: arquivos sas7bdat.
\end{itemize}

\hypertarget{diretorios-de-trabalho}{%
\section{Diretórios de trabalho}\label{diretorios-de-trabalho}}

Os trabalhos efetudados via Rstudio, incluindo as bases de dados, os objetos, os resultados das fórmulas, os cálculos aplicados sobre os vetores e demais arquivos resultantes da utilização do programa podem ser salvos em seu diretório de arquivos. Após instalado o Rstudio destina um diretório padrão salvar estes arquivos, o qual pode ser verificado com o comando \texttt{getwd()}.

Este caminho padrão, por sua vez, pode ser alterado com o comando \texttt{setwd("C://file/path")} onde o usuário escolhe a pasta desejada que ficará como padrão. O comando \texttt{dir()} mostra ao usuário os documentos que constam no diretório padrão ou o escolhido para a consulta.

\hypertarget{bases-de-dados-nativas-do-r-e-de-pacotes}{%
\section{Bases de dados nativas do R e de pacotes}\label{bases-de-dados-nativas-do-r-e-de-pacotes}}

Para estimular a aprendizagem da linguagem de programação R e o uso do software RStudio, bem como para acompanhar muitos manuais e livros, existem bases de dados pré-estabelecidas que podem ser utilizadas para treino e manipulação pelos usuários. Algumas delas são nativas do RStudio, como por exemplo a famosa base \texttt{iris}. Para retomar tal base de dados nativa, basta ``chamar'' seu nome no console do programa:

<<>>=
head(iris)
@


O comando \texttt{data()} lista todas as bases nativas do RStudio:

<<>>=
data()
@


Outras bases de dados, no entanto, vêm acompanhadas dos pacotes que são instalados no RStudio. Para verificar quais bases estão instaladas e disponíveis ao pesquisador, basta efetuar o comando abaixo:

\texttt{data(package\ =\ .packages(all.available\ =\ TRUE))}

É possível carregar uma base de dados de determinado pacote instalado, como exemplo utilizado a partir do pacote \texttt{Amelia} (HONAKER; KING; BLACKWELL, \protect\hyperlink{ref-Amelia2011}{2011}):

<<>>=
data(africa, package="Amelia")
head(africa)
@


\hypertarget{operacoes}{%
\section{Operações}\label{operacoes}}

\hypertarget{operacoes-aritmeticas}{%
\subsection{Operações Aritméticas}\label{operacoes-aritmeticas}}

A realização de uma operação aritmética no R acontece da seguinte forma: onde a resolução das operações segue o padrão, ou seja, primeiro exponenciações, seguido de multiplicações e divisões, deixando por último adições e subtrações, de acordo com a ordem que estão dispostas. Utiliza-se o parênteses para destacar a operação que deve ser prioritária na resolução. Seguem alguns exemplos efetuados diretamente no console do RStudio:

<<>>=
# soma
19+26
# subtração
19-26
# divisão
4/2
# multiplicação 
4*2
# exponenciação
4^2
# prioridade de resolução
19 + 26 /4 -2 *10
((19 + 26) /(4 -2))*10
# raiz quadrada
sqrt(16)
# Logaritmo 
log(1)
@


\hypertarget{operacoes-logicas}{%
\subsection{Operações Lógicas}\label{operacoes-logicas}}

O ambiente de programação Rstudio trabalha com algumas operações lógicas, que serão importantes na manipulação de bases de dados:

\begin{itemize}
\tightlist
\item
  \(a == b\) (``a'' é igual a ``b'')
\item
  \(a != b\) (``a'' é diferente a ``b'')
\item
  \(a > b\) (``a'' é maior que ``b'')
\item
  \(a < b\) (``a'' é menor que ``b'')
\item
  \(a >= b\) (``a'' é maior ou igual a ``b'')
\item
  \(a <= b\) (``a'' é menor ou igual a ``b'')
\item
  is.na (``a'' é missing - faltante)
\item
  is.null (``a'' é nulo)
\end{itemize}

Seguem alguns exemplos da aplicação das operações lógicas:

<<>>=
# maior que 
2 > 1
1 > 2

# menor que 
1 < 2

# maior ou igual a 
0 >= (2+(-2))

# menor ou igual a 
1 <= 3

# conjunção
9 > 11 & 0 < 1

# ou
6 < 5 | 0 > -1

# igual a
1 == 2/2

# diferente de
1 != 2
@


\hypertarget{criacao-de-objetos}{%
\section{Criação de objetos}\label{criacao-de-objetos}}

A linguagem de programação R se configura em uma linguagem orientada a objetos, ou seja, a todo tempo estão sendo criados diversos tipos de objetos e sendo efetuadas operações com os mesmos. Por exemplo, a criação de listas, bases de dados, união de bases de dados, data.frames e até mesmo mapas!

<<>>=
#Criando um objeto simples
objeto = "meu primeiro objeto" #enter
#Agora para retomar o objeto criado:
objeto #enter

#Pode ser efetuada uma operação:
a= 2+1
a
@


O comando \texttt{ls()} lista todos os objetos que estão criados no ambiente e \texttt{rm(x)} remove o objeto indicado (x). Para remover todos os objetos de uma só vez utiliza-se \texttt{rm(list=ls())}.

<<>>=
#Lista objetos do ambiente
ls()
#Remover um banco de dados
rm(a)
@




\hypertarget{Conversão-de-uma-variável}{%
\section{Conversão de uma variável}\label{Conversão-de-uma-variável}}

Para a aplicação de algumas funções é importante que cada variável esteja corretamente classificada, o que em alguns casos não ocorre durante o reconhecimento automático do R. É preciso então reconhecê-la como variável texto, numérica ou fator. Além disso, a classe \texttt{ordered} se aplica a variáveis categóricas que podem ser consideradas ordenáveis.

Abaixo segue um exemplo de conversão da variável ``idade''  para numérico (utilizando o comando \texttt{as.numeric()}) e da variável ``cep'' para caractere (comando \texttt{as.character()}):

<<>>=
idade=c('11', '12', '31')
nomes=c("Elisa", "Priscila", "Carol")
cep=c(98700000,98701000,98702000)
idade= as.numeric(idade)
idade
cep = as.character(cep)
cep
@


\hypertarget{algumas-funcoes-e-comandos-essenciais}{%
\section{Algumas funções e comandos essenciais}\label{algumas-funcoes-e-comandos-essenciais}}

A função \texttt{head()} mostra as 6 primeiras colunas do arquivo para se ter uma noção do conteúdo. No caso do mesmo ser um objeto do tipo \texttt{data.frame} é possível solicitar o número de valores ou linhas a serem mostrados no console através do parâmetro \texttt{n} ou na ausência deste, todas as linhas serão impressas, como exemplo \texttt{head(x\ ,n=2)} para ver as duas primeiras linhas.

O comando \texttt{summary()} efetua o resumo dos dados, se for qualitativa mostra a frequência absoluta das categorias e se for quantitativa apresenta as categorias. No exemplo abaixo é utilizada uma base de dados de treinamento denominada ``iris'' que está acessível no \emph{software} RStudio através do comando que carrega dados específicos \texttt{data()}:

<<>>=
#Carregando dados da base do RSdudio iris.
data(iris)

#Visualizando as primeiras 6 colunas
head(iris)

#Resumo do objeto
summary(iris)
@

O comando \texttt{names()} lista os nomes das colunas dos bancos de dados escolhidos, enquanto \texttt{tail()} mostra as últimas seis linhas.

<<>>=
#Para visualizar os nomes das colunas dos dados:
names(iris)

#vizualizar as ultimas seis linhas do objetos
tail(iris)
@


Para que o pesquisador conheça melhor as bases de dados em que está atuando, o comando \texttt{class()} serve para identificar o tipo de base ou dados da base. Com o exemplo abaixo constata-se que o objeto ``iris'' é um \emph{data frame}, a variável ``Sepal.Length'' é uma variável numérica e que ``Sepcies'' é uma variável categórica (\texttt{Factor}).

<<>>=
class(iris)
class(iris$Sepal.Length)
class(iris$Species)
@


Efeito semelhante possui o comando \texttt{ls.str()}:

<<>>=
ls.str(iris)
@


Os comandos \texttt{ncol()} e \texttt{nrow()} mostram o número de colunas e o número de linhas do objeto, respectivamente.

<<>>=
ncol(iris)
nrow(iris)
@

\hypertarget{funcoes-view-e-dim}{%
\subsection{\texorpdfstring{Funções \emph{View} e \emph{dim}}{Funções View e dim}}\label{funcoes-view-e-dim}}

A função \texttt{View()} permite vizualizar os elementos no script do \emph{data frame} requisitado, enquando a função \texttt{dim()} (abreviatura de dimensões) fornece o número de linhas e de colunas, respectivamente.

<<>>=
View(iris)
dim(iris)
@


Para alterar um nome de uma variável pode ser utilizado o comando \texttt{colnames()}. No exemplo, é alterado o nome da coluna ``Species'' para ``Especie''.

<<>>=
#Alterar o nome da coluna, sendo que o '[5]' indica que está na quinta coluna.
colnames(iris)[5]='Especie'
@


Para selecionar uma coluna do objeto ``iris'', por exemplo a coluna ``Sepal.Length'', pode-se digitar no console o comando \texttt{iris\$Sepal.Length}. O padrão de carregamento da base de dados nos obriga a dizer ao R qual é a base que quer selecionar (iris), inserindo o símbolo \texttt{\$} e após o nome da coluna a qual deseja as informações. Para criar um novo objeto com esta informação, basta dizer ao R, como já visto acima, por exemplo: \texttt{novoobjeto=iris\$novacoluna}.

No entanto, para acessar os dados sem o uso do símbolo \texttt{\$}, é utilizado o seguinte comando: \texttt{attach(iris)}. Assim, é possível efetuar o sumário da coluna ``Petal.Width'':

<<>>=
#Definindo a função attach para o objeto 'iris'.
attach(iris)

#Efetuando o sumário de 'iris'.
summary(Petal.Width)

#Como a coluna 'Especie' é um fator, o sumário será 
#a contagem da quantidade de cada fator na coluna.
summary(Especie)
@


\hypertarget{funcao-tapply}{%
\subsection{\texorpdfstring{Função \emph{tapply}}{Função tapply}}\label{funcao-tapply}}

O comando \texttt{tapply()} agrega os dados pelos níveis das variáveis qualitativas. Note que a coluna ``Especie'' possui dados em forma de fatores. Assim, para filtrar a informação (coluna ``Sepal.Length'') média por \texttt{Especie}, é possível utilizar:

<<>>=
#Função 'tapply', número médio da população total por distrito.
tapply(Sepal.Length, Especie, mean)
@

No caso da coluna ``Sepal.Length'', se ela possuir um registro NA (faltante), para que se efetue a média por este coluna neste quesito, há que se adicionar o parâmetro \texttt{na.rm=T}, que ignora as células faltantes para calcular-se a média:

<<>>=
#Função 'tapply' considerando NAs:
tapply(Sepal.Length, Especie, mean)

#Função 'tapply' sem considerar NAs:
tapply(Sepal.Length, Especie, mean, na.rm=T)
@


\hypertarget{funcao-subset}{%
\subsection{\texorpdfstring{Função \emph{subset}}{Função subset}}\label{funcao-subset}}

Utiliza-se o comando \texttt{subset()} para formar um subconjunto de dados o qual deseja-se selecionar de um objeto. Por exemplo, se a intensão é criar um novo objeto com somente os dados filtrados da ``Especie'' denominada ``setosa'':

<<>>=
dadossetosa=subset(iris, Especie=='setosa')
head(dadossetosa)
@


Pode ser configurado mais de uma condição para a filtragem dos dados, por exemplo, além de serem filtrados os dados referentes a Especie setosa, aquelas na qual o Sepal.Length é superior a 5. Como no exemplo, é criado um novo objeto com estas condições:

<<>>=
dadossetosa2=subset(iris, Especie=='setosa'& Sepal.Length>5)
head(dadossetosa2)
@


\hypertarget{funcao-table}{%
\subsection{\texorpdfstring{Função \emph{table}}{Função table}}\label{funcao-table}}

Para contar elementos em cada nível de um fator, usa-se a função \texttt{table()}. A função pode fazer tabulações cruzadas, gerando uma tabela de contingência, esse tipo de tabela é usado para registrar observações independentes de duas ou mais variáveis aleatórias.

Para exemplo da utilização da função \texttt{table} agora com dados qualitativos (gênero e saúde), é utilizada a base de dados \texttt{cdc}:

<<>>=
# Carregando a base
source("http://www.openintro.org/stat/data/cdc.R")

#Vizualiza-se as primeiras linhas
head(cdc)

# Efetua-se a contagem dos dados qualitativos com a função table
table(cdc$genhlth,cdc$gender)

# Adiciona-se a soma dos valores das linhas e colunas
addmargins(table(cdc$genhlth,cdc$gender))
@

\hypertarget{estrutura-de-dados}{%
\section{Estrutura de dados}\label{estrutura-de-dados}}

\hypertarget{vetores}{%
\subsection{Vetores}\label{vetores}}

Os fatores são uma classe especial de vetores, que definem variáveis categóricas de classificação, como os tratamentos em um experimento fatorial, ou categorias em uma tabela de contingência.

<<>>=
# Criação de um vetor
c(2, 4, 6)
@


Os vetores podem ser criados a partir de uma sequência numérica ou mesmo de um intervalo entre valores:

<<>>=
c(2:6)

# Criação de um vetor a partir do intervalo 
#entre cada elemento e valores mínimo e máximo
seq(2, 3, by=0.5)

@


Criação de um vetor atráves de uma repetição também é útil em várias situações. No primeiro exemplo repete o intervalo de 1 a 3 por 4 vezes e no segundo exemplo, a cada 3 vezes:

<<>>=
rep(1:3, times=4)

rep(1:3, each=3)
@


A função factor cria um fator, a partir de um vetor:

<<>>=
sexo<-factor(rep(c("F", "M"),each=8))
sexo

numeros=rep(1:3,each=3)
numeros

numeros.f<-factor(numeros)
numeros.f
@


Fatores têm um atributo que especifica seus níveis ou categorias (levels), que seguem ordem alfanumérica crescente, por \emph{default}. Em muitas análises essa ordem é de fundamental importância e dessa forma pode ser alterada através do argumento levels, por exemplo, para que possa ser colocado o controle antes dos tratamentos:

<<>>=
tratamentos=factor(rep(c("controle","adubo A","adubo B"), each=4))
tratamentos

tratamentos=factor(rep(c("controle","adubo A","adubo B"), each=4), 
levels=c("controle", "adubo A", "adubo B"))
tratamentos
@


Fatores podem conter níveis não usados (vazios):

<<>>=
participantes=factor(rep("mulheres",10), levels=c("mulheres","homens"))
participantes
@


\hypertarget{matrizes}{%
\subsection{Matrizes}\label{matrizes}}

A função matrix tem a finalidade de criar uma matriz com os valores do argumento data, argumento este que insere as variáveis desejadas na matriz. O número de linhas é definido pelo argumento nrow e o número de colunas é definido pelo argumento ncol:

<<>>=
nome.da.matriz= matrix(data=1:12,nrow = 3,ncol = 4)
nome.da.matriz
@


Por \emph{default} (ação tomada pelo \emph{software}), os valores são preenchidos por coluna. Para preencher por linha basta instruir o programa de outra forma, alterando o argumento \texttt{byrow} para TRUE:

<<>>=
nome.da.matriz= matrix(data=1:12,nrow = 3,ncol = 4, byrow=T)
nome.da.matriz
@


Se a matriz inserida tem menos elementos do que a ordem informada para a matriz, os são repetidos até preenchê-la:

<<>>=
lista = list(matriz=matrix(c(1,2,1), nrow=3, ncol=2))
lista
@


\hypertarget{listas}{%
\subsection{Listas}\label{listas}}

As listas podem ser criadas a partir do comando \texttt{list()}.

\begin{itemize}
\tightlist
\item
  \textbf{nrow}: corresponde ao número de linhas;
\item
  \textbf{ncol}: corresponde ao número de colunas.
\end{itemize}

Para ver quais elementos estão em suas listas é só chamar pelo nome que foi dado para ela, como no exemplo abaixo. Representa uma coleção de objetos.

<<>>=
lista = list(matriz=matrix(c(1,2,1,5,7,9), nrow=3, ncol=2),vetor=1:6)
lista
@


Para descobrir de maneira rápida o números de objetos que há na lista, utiliza-se o comando \texttt{length(nomedalista)}.

<<>>=
lista
length(lista)
@


O uso do comando \texttt{names(nomedalista)} retorna os nomes dos objetos que estão presentes na lista.

<<>>=
names(lista)
@


Para chamar várias listas utiliza-se o comando da seguinte forma:

\texttt{c(nome1,\ nome2)}

<<>>=
lista.1 = list(matriz=matrix(c(1,2,1,5,7,9), nrow=3, ncol=2),
              vetor=1:6)
lista.2 = list(nomes=c("Marcelo", "Fábio", "Felipe"), 
              idade=c(25, 34, 26))
c(lista.1,lista.2)
@


\hypertarget{data-frames}{%
\subsection{Data frames}\label{data-frames}}

Com a função \texttt{data.frame()} reunimos vetores de mesmo comprimento em um só objeto. Neste caso são criadas tabelas de dados. Cada observação é descrita por um conjunto de propriedades. No exemplo abaixo é possível verificar como inserir os dados para criar a ``tabela''. São similares como as matrizes, porém diferentes colunas podem possuir elementos de natureza diferentes.

<<>>=
estudantes= c("Camila", "Pedro", "Marcelo","Guilherme")
idade=c(21,17,17,18)
peso=c(65,79,80,100)
informacoes=data.frame(estudantes,idade,peso)
informacoes
@


Adiciona-se colunas no \emph{data frame} através do comando a seguir, pressupondo que a ordem dos dados esteja correta:

\texttt{nomedodata.frame\$variávelaseradicionada}

<<>>=
informacoes$cidades=c("Nova Hartz","Gramado","Soledade",
                      "Porto Alegre")
informacoes
@


É possível fazer uma contagem (função \texttt{length()}) concatenando com a filtragem (função \texttt{subset}), como no exemplo a contagem dos indivíduos cuja origem é Soledade.

<<>>=
length(subset(informacoes$cidades, informacoes$cidades=="Soledade"))
@


\hypertarget{pre-tratamento-de-banco-de-dados}{%
\section{Pré tratamento de banco de dados}\label{pre-tratamento-de-banco-de-dados}}

Os bancos de dados da ``vida real'' muitas vezes carecem de um tratamento inicial antes de serem destinados para a análise estatística. Isto porque, ao serem carregadas ao R estas bases estão permeadas por dados que podem prejudicar a criação de modelos ou mesmo enviesar as apresentações, como por exemplo a presença de dados faltantes (``NAs''), valores extremos (``outliers'') ou também apresentar rótulos das variáveis não adequados.

Longe de apresentar um conjunto de regras rígidas para estas correções, visto que em muitos casos o tipo de substituição ou correção de variáveis dependerá do problema e da técnica estatística e serem trabalhados, almeja-se mostrar princípios de ações corretivas que podem ser efetuadas no RStudio. Será utilizada a base \texttt{starwars} (as 5 primeiras colunas) que consta junto ao pacote \texttt{dplyr} (WICKHAM \emph{et al.}, \protect\hyperlink{ref-dplyr2019}{2019}), como pode ser visto:


<<message=FALSE>>=
library(dplyr)
starwars=data.frame(starwars[1:5])
str(starwars)
summary(starwars)
@


Nota-se que constam 5 variáveis (``name'', ``height'', ``mass'', ``hair\_color'', ``skin\_color'') que tratam de personagens dos filmes da franquia Star Wars com algumas características dos mesmos. Constam ainda variáveis com valores ausentes e dos mais variados tipos (``chr'', ``int'', ``num'', ``chr'', ``chr''). A função \texttt{abbreviate()} é utilizada para abreviar observações, sendo que pode ser extremamente útil quando os nomes das variáveis, por exemplo, são muito extensos. Ainda é possível determinar o tamanho dos caracteres, conjuntamente com a função \texttt{names()}.

<<>>=
names(starwars)=abbreviate(names(starwars), minlength = 3)
names(starwars)
@

Caso o pesquisador deseje renomear todas as variáveis, pode ser utilizada a função \texttt{names()}  como é mostrado abaixo, em um primeiro momento somente determinando o nome da primeira variável, e no segundo exemplo alterando todas as variáveis do objeto:

<<>>=
names(starwars)[1]="Nome"
names(starwars)=c("Nome", "Altura", "Peso", "Corcabelo", "Corpele")
names(starwars) 
@


Em sendo pertinente efetuar a alteração de uma variável para fator, utiliza-se a função \texttt{as.factor()} como no exemplo abaixo para transformar as variáveis ``Corcabelo'' e ``Corpele''.

<<>>=
starwars$Corcabelo=as.factor(starwars$Corcabelo)
starwars$Corpele=as.factor(starwars$Corpele)
summary(starwars$Corpele)
@


Como visto anteriormente este objeto apresenta valores faltantes (``NAs'') em diversas variáveis.

<<>>=
head(is.na(starwars))
@


Desta forma, é possível quantificar os valores faltantes do objeto:

<<>>=
table(is.na(starwars))
@


Em muitos casos é de interesse ao pesquisador substituir os valores faltantes pelo valor da média da variável em questão, é claro considerando somente o restante dos valores excluídos dos NAs. O exemplo abaixo demonstra o sumário das informações após a normalização pelo valor médio da variável ``Altura'' (também é possível utilizar outro critério, por exemplo o valor da moda ou mediana):

<<>>=
# Substituindo NAs por média
starwars$Altura[is.na(starwars$Altura)]=mean(starwars$Altura, 
                                             na.rm=TRUE)
summary(starwars$Altura)
@


É possível substituir os dados faltantes por zero ou por outro caractere, sendo que no exemplo abaixo utilizou-se a correção por zero sobre a variável numérica ``Peso'':

<<>>=
# Substituindo NAs por zero
starwars$Peso[is.na(starwars$Peso)]=0
summary(starwars$Peso)
@


De igual forma, é possível transformar qualquer valor constante em uma variável em valores faltantes. No exemplo abaixo é desfeita operação anterior sobre a variável ``Peso'':

<<>>=
starwars$Peso[starwars$Peso==0]=NA
summary(starwars$Peso)
@

Ainda, se houver no objeto linhas que tenham pelo menos uma informação faltante (``NA''), estas podem ser excluídas com o comando \texttt{na.omit()}. Note que com este procedimento o objeto \texttt{starwars} passou a ter a dimensão 54x5 ao invés de 87x5 como apresentado inicialmente com a presença de valores faltantes:

<<>>=
starwars=na.omit(starwars)
summary(starwars)
dim(starwars)
@


\hypertarget{manipulacao-de-banco-de-dados}{%
\section{Manipulação de banco de dados}\label{manipulacao-de-banco-de-dados}}

A função \texttt{edit()} abre uma interface simples de edição de dados em formato planilha, e é útil para pequenas modificações. Mas para salvar as modificações atribua o resultado da função \texttt{edit} a um objeto. Utiliza-se o comando da seguinte forma:

\texttt{novonomedabase\ =\ edit(nomeatualdabase)}

<<>>=
informacoes.2=edit(informacoes)
@


\begin{figure}[!h]
\caption{Editor de dados}\label{fig:95}
{\centering \includegraphics[width=0.7\linewidth]{95} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

Basta clicar no retângulo correspondente a variável que deseja ser modificada, excluir ou adicionar novas colunas.

\begin{figure}[!h]
\caption{Acréscimo de uma nova coluna através do editor de dados}\label{fig:10}
{\centering \includegraphics[width=0.7\linewidth]{10} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}

Logo, chamando o novo banco de dados, é obtido:

<<>>=
informacoes.2
@


As funções a seguir são aplicáveis a vetores, data.frames e listas, e em muitos casos trazem praticidade a uma análise estatística. Foram criados objetos com informações do nome dos estudantes e altura. Segue o processo de criação do \emph{data frame} com estas informações, lembrando que esta forma de ``união'' das informações pressupõe que a ordem dos dados esteja correta:

<<>>=
estudantes=c("Guilherme", "Marcelo", "Pedro", "Camila")
altura= c(1.50, 1.9, 1.74, 1.80)
informacoes.3=data.frame(estudantes, altura)
head(informacoes.3)
@

Já o comando \texttt{merge()} serve para juntar dois \emph{data frames} que possuam uma coluna em comum. Neste caso, unimos o objeto \texttt{informações.2} com o objeto \texttt{informações.3} utilizando o nome dos estudantes (informação em comum):

<<>>=
# União de um banco de dados (existencia de uma váriavel em comum)

informacoes=merge(informacoes.2,informacoes.3, by="estudantes")
head(informacoes)
@


Adicionar um cálculo entre as colunas é muito simples com o RStudio, neste caso com os dados do peso e altura, pode-se calcular o IMC (Índice de Massa Corporal) em uma nova coluna:

<<>>=
informacoes$Imc=c(informacoes$peso/(informacoes$altura^2))
informacoes
@


Outro recurso interessante é a substituição de dados em uma coluna, que pode ser feito de forma automática para uma condição padrão escolhida. No exemplo abaixo, substituimos aquelas informações de idade igual a 17 pelo número 19:

<<>>=
# Substituir números na coluna
informacoes$idade[informacoes$idade == 17] <- 19
informacoes
@


A classificação qualitativa das informações, com base em condições definidas pelo usuário podem ser facilmente efetuadas pelo comando \texttt{ifelse}. Para quem não tem intimidade com atributos de programação, este comando seleciona ``se'' (\emph{if}) uma informação desejada é atendida, e cria uma rotina (\emph{else}) que será aplicada ``então''.

Neste exemplo, cria-se uma variável denominada ``classificacao'' e se a coluna IMC conter dados acima de 25, será marcado como ``peso normal'', sendo que do contrário, constará como ``excesso de peso''. Após, utilizar o comando \texttt{cbind()} para unir os dois objetos pelas colunas. Caso não se deseje utilizar o comando \texttt{cbind()}, poderia ser criado uma nova coluna com o nome do obetjo sendo ``informacoes\$classificacao''.

<<>>=
# Classificar qualitativamente informações em um determinado intervalo 
classificacao=ifelse(informacoes$Imc<25, "peso normal","excesso de peso")
informacoes=cbind(informacoes, classificacao)
informacoes
@


\begin{table}[!h]

\caption{\label{tab:imct}Valores padrão para o IMC}
\centering
\begin{tabular}{l|l}
\hline
\textbf{Resultado} & \textbf{Significado}\\
\hline
Abaixo de 17 & Muito abaixo do peso\\
\hline
Entre 17 e 18,49 & Abaixo do peso\\
\hline
Entre 18,5 e 24,99 & Peso normal\\
\hline
Entre 25 e 29,99 & Acima do peso\\
\hline
Entre 30 e 34,99 & Obesidade I\\
\hline
Entre 35 e 39,99 & Obesidade II (severa)\\
\hline
Acima de 40 & Obesidade III (mórbida)\\
\hline
\end{tabular}
\legend{Fonte: Adaptado de Brasil (\protect\hyperlink{ref-brasil2014}{2014}).}
\end{table}



No entanto, o IMC possui várias classificações de acordo com o seu resultado (Tabela \ref{tab:imct}), sendo que, por exemplo, resultados abaixo de 17 informam que o indivíduo se encontra como Muito abaixo do peso, e acima de 40, se encontra em Obesidade III. Para efetuar a classificação desta maneira utilizando o comando \texttt{ifelse}, ou seja, com mais de uma condição, pode ser efetuada a estruturação com a aglutinação do comando:

<<>>=
informacoes$tipoimc=ifelse(informacoes$Imc<17, "Muito abaixo do peso",
ifelse(informacoes$Imc>=17&informacoes$Imc<=18.49,"Abaixo do peso",
ifelse(informacoes$Imc>=18.5&informacoes$Imc<=24.99,"Peso Normal",
ifelse(informacoes$Imc>=25&informacoes$Imc<=29.99,"Acima do Peso",
ifelse(informacoes$Imc>=30&informacoes$Imc<=34.99,"Obesidade I",
ifelse(informacoes$Imc>=35&informacoes$Imc<=39.99,"Obesidade II",
       "Obesidade III"))))))
informacoes
@


A classificação binária dos dados (0,1) também é relevante para o estudo da manipulação dos dados trabalhados pelo pesquisador. Neste exemplo, classificaram-se aqueles valores da coluna ``classificacao'' com o ``peso normal'' iguais a 1, do contrário classificou-se 0 (zero).

<<>>=
# Classificar informações usando o código binário
informacoes$binario= ifelse(informacoes$classificacao 
                            == 'peso normal', 1, 0) 
informacoes
@


O comando \texttt{rbind()} é utilizado para incluir linhas novas abaixo de um objeto já criado pelo pesquisador, sendo que é importante o cuidado de que estas novas informações tenham os mesmos campos (colunas). A exemplo, pede-se para incluir uma nova pessoa no \emph{data frame} informacoes: Francisco, 30 anos de idade, peso 59, natural de Ijuí, IMC 23,33768, classificado como peso normal. Lembrando de incluir os campos ``tipoimc'' e ``binario''.

<<>>=
novo1=data.frame(estudantes="Francisco", idade=30, peso=59, 
                 cidades="Ijuí", 
                 altura="1.59", 
                 Imc= 23.33768, 
                 classificacao= "peso normal",
                 tipoimc="Peso Normal", 
                 binario=1)
informacoes=rbind(informacoes, novo1)
informacoes
@


Outra forma de incluir informações adicionais nos \emph{data frames} através de atributos é utilizando o pacote \texttt{dplyr}. Decide-se criar um campo ``faixa etária'', sendo que aqueles indivíduos com idade acima de 21 serão chamados de ``adulto'' e do contrário ``não adulto''.

<<>>=
library(dplyr)
informacoes= mutate(informacoes, 
                    "faixa etaria"= ifelse(informacoes$idade<21,
                                           "não adulto", "adulto"))
informacoes
@


A (re)ordenação das colunas de um \emph{data frame} pode ser muito útil em alguns casos, sendo extremamente fácil efetuá-la, cada número representa o número da respectiva coluna:

<<>>=
# Reordenar colunas
informacoes=informacoes[c(8,2,3,4,1,6,5,7,9,10)]
@


Caso se queira a inversão total da ordem das colunas do objeto estudado, o comando \texttt{rev()} pode ser útil:

<<>>=
# Inversão do posicionamento dos elementos
rev(informacoes)
@


A função \texttt{table()} faz a contagem os dados; já o comando \texttt{sort()} ordena os objetos em ordem crescente (caso queira no formato decrescente, informar \texttt{decreasing=TRUE}).

<<>>=
# contagem de objetos
table(informacoes$classificacao)

# Ordenar os objetos em ordem crescente
sort(informacoes$idade)
@


A ordenação de todo o \emph{data frame} a partir de uma variável, pode ser realizada utilizando o comando \texttt{order}, sendo que pode ser realizada inclusive com variáveis categóricas (no exemplo abaixo o nome das cidades).

<<>>=
# Ordem decrescente 
informacoes[order(informacoes$idade, decreasing = TRUE),]

#ordem crescente
informacoes[order(informacoes$idade, decreasing = FALSE),]

#ordem crescente
informacoes[order(informacoes$cidades, decreasing = FALSE),]
@


O comando \texttt{rank()} cria uma ranqueamento crescente das informações. Se é pretendido, por exemplo, criar uma coluna com o ranking dos valores do IMC, pode ser utilizado:

<<>>=
informacoes$rankingImc=rank(informacoes$Imc)
informacoes
@


Para utilizar a função \texttt{rank} com os maiores valores em primeiro lugar:

<<>>=
rank(-informacoes$Imc)
@

\hypertarget{funcoes-matematicas}{%
\subsection{Funções Matemáticas}\label{funcoes-matematicas}}

A utilização de funções matemáticas no RStudio contribui para que o pesquisador possa realizar vários experimentos com seus dados. Os cálculos podem ser efetuados diretamente no console do programa ou aplicados aos objetos criados:

<<>>=
log(1.5)

exp(1)
@


No caso do \emph{data frame} o qual foi criado acima (``informacoes''), pode-se buscar as informações dos valores mínimos (função \texttt{min()}), máximos (\texttt{max()}) da base:

<<>>=
max(informacoes$idade)

min(informacoes$idade)
@


Ainda, se o interesse está em descobrir a posição, no *data frame\}, do peso mínimo e máximo da amostra utiliza-se o comando \texttt{which.min} e \texttt{which.max}.

<<>>=
which.min(informacoes$peso)
which.max(informacoes$peso)
@


Para descobrir qual é o estutande que possui o peso mínimo, por exemplo, ou o Imc máximo, utiliza-se o seguinte comando (notem que os resultados trazem a lista de todos os estudantes comparados):

<<>>=
informacoes$estudantes[which.min(informacoes$peso)]
informacoes$estudantes[which.max(informacoes$Imc)]
@


O arredondamento de valores numéricos pode ser feito utilizando o comando \texttt{round()}, o qual o pesquisador informa o número de casas decimais:

<<>>=
# Arredondar para n casas decimais
round(informacoes$Imc, 2)
@


Já o comando \texttt{signif()} determina o número de algarismos significativos da série escolhida, ou seja, ele arredonda para os valores em seu primeiro argumento com os número de dígitos detemrinados:

<<>>=
x2 <- pi * 100^(-1:3)
round(x2, 3)
signif(x2, 3) 
@


A soma do total da coluna idade, o desvio padrão, a variância, a média aritmética e mediana podem ser encontrados, respectivamente, pelos comandos \texttt{sum()}, \texttt{sd()}, \texttt{var()}, \texttt{mean()}, \texttt{median()}:

<<>>=
# Realiza a somatória dos valores
sum(informacoes$idade)

# Desvio padrão
sd(informacoes$idade)

# Variancia
var(informacoes$idade)

# Calcula a média aritmética dos valores
mean(informacoes$idade)

# Informa o valor mediano do conjunto
median(informacoes$idade)
@


O comando \texttt{quantile()} oferece a possibilidade de obter os quartis dos dados de acordo com as probabilidades estabelecidas pelo pesquisador. No exemplo, explora-se a variável idade:

<<>>=
quantile(informacoes$idade,  probs = c(0.5, 1, 2, 5, 10, 50)/100)
@


\hypertarget{o-pacote-tidyr}{%
\subsection{\texorpdfstring{O pacote \emph{tidyr}}{O pacote tidyr}}\label{o-pacote-tidyr}}

Nesta subseção será utilizado o pacote \texttt{tidyr} (WICKHAM; HENRY, \protect\hyperlink{ref-tidyr2018}{2018}) para demonstrar algumas funções que contribuem para a manipulação das bases de dados, tão importante no processo de preperação das informações para posterior análise. Serão utilizadas para demonstração as bases de dados existentes no próprio pacote.



\begin{figure}[!h] 
\caption{Convenção sobre variáveis, observações e valores}\label{fig:dados}
{\centering \includegraphics[width=0.7\linewidth]{tidy-1} 

}
\legend{Fonte: <http://garrettgman.github.io/tidying/>.}
\end{figure}

A Figura \ref{fig:dados} retoma uma demonstração das convenções a respeito das nomenclaturas das bases de dados. Desta forma verifica-se que cada variável é apresentada em sua respectiva coluna, bem como as observações são apresentadas em sua própria linha e portanto os valores constam em sua própria célula.

\hypertarget{funcao-spread}{%
\subsubsection{\texorpdfstring{Função \emph{spread}}{Função spread}}\label{funcao-spread}}



A função \texttt{spread()} é utilizada para transformar os valores constantes em uma coluna em nova configuração de colunas. Ainda, é possível determinar a transformação dos valores com o comando \texttt{convert\ =\ TRUE} informando o tipo de valores (doubles (numerics), integers, logicals, complexes, ou factors) nas colunas a serem criadas (comando \texttt{type.convert()}).

<<>>=
library(tidyr)
table2
@


Neste exemplo, a coluna ``type'' abriga os valores ``cases'' e ``population'', as quais terão suas próprias colunas com seus respectivos valores:

<<>>=
spread(table2, type, count)
@


\hypertarget{funcao-gather}{%
\subsubsection{\texorpdfstring{Função \emph{gather}}{Função gather}}\label{funcao-gather}}

Já a função \texttt{gather()} realiza o processo oposto do comando \texttt{spread()}, pois agrupa o valor de determinadas variável em uma chave comum.

<<>>=
table4a
@


Abaixo a transformação das variáveis ``1999'' e ``2000'' em uma única variável ``year'', mantendo os valores inseridos na variável ``cases'':

<<>>=
gather(table4a, "year", "cases", 2:3)
@


\hypertarget{funcao-separate}{%
\subsubsection{\texorpdfstring{Função \emph{separate}}{Função separate}}\label{funcao-separate}}

A função \texttt{separate()} é utilizada para partir uma determinada variável em novas variáveis da base de dados.

<<>>=
table3
@


Neste exemplo, a variável ``rate'', que está composta de duas informações separadas pelo caractere ``\(/\)'', será separada nas novas variáveis ``cases'' e ``population'':

<<>>=
separate(table3, rate, into = c("cases", "population"),sep = "/")
@


Da mesma forma é possível criar duas novas variáveis a partir do segundo caractere do valor que consta nas células utilizando o comando \texttt{sep=2}:

<<>>=
separate(table3, year, into = c("century", "year"), sep = 2)
@


\hypertarget{funcao-unite}{%
\subsubsection{\texorpdfstring{Função \emph{unite}}{Função unite}}\label{funcao-unite}}

A função \texttt{unite()} é oposta à função \texttt{separate()}:

<<>>=
table5
@


Neste exemplo, recria a variável ``new'' a partir dos dados de ``century'' e ``year'':

<<>>=
unite(table5, "new", century, year, sep = "")
@


\hypertarget{o-pacote-dplyr}{%
\subsection{\texorpdfstring{O pacote \emph{dplyr}}{O pacote dplyr}}\label{o-pacote-dplyr}}

O pacote \texttt{dplyr} é uma poderosa ferramenta para manipulação, criação e transformação de dados no RStudio, agregando agilidade e robustez para o processo de análise e preparação dos dados. Seguem a seguir algumas das principais funções do pacote com a utilização da base de dados nativa do RStudio \texttt{mtcars}.

<<>>=
head(mtcars)
@


\hypertarget{funcao-select}{%
\subsubsection{\texorpdfstring{Função \emph{select}}{Função select}}\label{funcao-select}}

A função \texttt{select()} é utilizada para selecionar as variáveis de interesse do pesquisador, a partir de uma base de dados, neste caso a partir da base \texttt{mtcars}:

<<>>=
library(dplyr)

novo=select(mtcars, mpg, cyl)
head(novo)
@


No exemplo são selecionadas todas as variáveis excluindo \texttt{mpg}:

<<>>=
novo=select(mtcars, -c(mpg))
head(novo)
@


É possível selecionar uma sequência de variáveis a partir de seus nomes (utilidade semelhante a \texttt{select(mtcars,\ 2:5)}):

<<>>=
novo=select(mtcars, cyl:drat)
head(novo)
@


\hypertarget{funcao-filter}{%
\subsubsection{\texorpdfstring{Função \emph{filter}}{Função filter}}\label{funcao-filter}}

A Função \texttt{filter()} seleciona as variáveis da base de dados conforme atributos determinados pelo pesquisador:

<<>>=
novo=filter(mtcars, hp>146)
head(novo)
@


Abaixo o exemplo da utilização de mais de um critério de filtragem de dados:

<<>>=
novo=filter(mtcars, hp>146 & am==1)
head(novo)
@


Utilizando o pacote \texttt{stringr} (WICKHAM, \protect\hyperlink{ref-stringr2018}{2018}) com a função denominada \texttt{str\_detect()}, é possível efetuar a filtragem pelo nome/identificação total ou parcial de um valor contido dentro de uma variável do banco de dados. Utilizou-se o banco de dados ``table5'' visto no subcapítulo anterior pra filtrar as informações da variável ``country'' que contém ``Bra'':

<<>>=
library(stringr)
table5 %>%
  filter(str_detect(country, "Bra"))
@


\hypertarget{funcao-mutate}{%
\subsubsection{\texorpdfstring{Função \emph{mutate}}{Função mutate}}\label{funcao-mutate}}

A função \texttt{mutate()} é utilizada para incluir informações ou variáveis na base de dados, como no exemplo abaixo a criação de uma nova variável denominada ``novacol'', multiplicando por 100 a variável ``mpg'' que já consta na base:

<<>>=
novo=mutate(mtcars, novacol=(mpg*100))
head(novo)
@


\hypertarget{funcao-summarise}{%
\subsubsection{\texorpdfstring{Função \emph{summarise}}{Função summarise}}\label{funcao-summarise}}

A função \texttt{summarise()} é uma poderosa ferrarmenta para agregar sumarizações unindo diversos cálculos ao longo de uma base de dados:


<<>>=
summarise(mtcars, 
          media.hp=mean(hp), 
          qtd.hp=length(hp),
          qtdunico.hp=length(unique(hp)))
@

Ainda, é possível agrupar as informações com a função \texttt{group\_by()} ao mesmo tempo em que são efetuados cálculos adjacentes. No exemplo abaixo, agrupa-se o valor médio das variáveis ``hp'' e ``wt'', bem como a quantidade de informações de cada variável (função \texttt{n()}), com relação ao agrupamento formado pela variável ``cyl'':

<<>>=
summarise(group_by(mtcars, cyl.agrup=cyl), 
          hp.medio=mean(hp), 
          wt.medio=mean(wt),
          qtd=n())
@


\hypertarget{funcao-count}{%
\subsubsection{\texorpdfstring{Função \emph{count}}{Função count}}\label{funcao-count}}

A função \texttt{count()} é utilizada para sumarizar a contagem de determinados objetos dentro de uma variável do banco de dados:

<<>>=
count(mtcars, cyl)
@


\hypertarget{funcao-arrange}{%
\subsubsection{\texorpdfstring{Função \emph{arrange}}{Função arrange}}\label{funcao-arrange}}

A função \texttt{arrange()} ordena a base de dados de acordo com o ordenamento da variável escolhida:

<<>>=
novo=arrange(mtcars, cyl)
head(novo)
@


Ainda é possível indicar mais de uma variável para este ordenamento, bem como utilizar a função \texttt{desc()} para organizar em ordem descrescente:

<<>>=
novo=arrange(mtcars, mpg, desc(disp))
head(novo)
@


\hypertarget{operador-pipe}{%
\subsubsection{\texorpdfstring{Operador \emph{pipe}}{Operador pipe}}\label{operador-pipe}}

O operador \texttt{pipe} (símbolos \texttt{\%\textgreater{}\%}) contribui para que a manipulação de dados com o pacote \texttt{dplyr} fiquem mais organizados no código de programação em linguagem R. Abaixo segue um exemplo, onde o objetivo é filtrar os veículos com transmissão manual (am == 1), agrupando-os pela quantidade de cilindros (``cyl'') e em seguida retomando a média das variáveis ``drat'' e ``hp'' para cada grupamento:

<<>>=
novo = mtcars %>%
  filter(am == 1) %>%
  group_by(cyl) %>%
  summarise(disp.drat=mean(drat), 
            hp.media=mean(hp))

novo
@


A função \texttt{starts\_with()} seleciona as variáveis com base em um critério determinado pelo pesquisador com relação ao nome da variável, no exemplo abaixo, sendo aquelas que iniciam com a leetra ``d'' (a função inversa é \texttt{ends\_with()}):

<<>>=
mtcars %>%
  select(starts_with("d")) %>%
  head
@


A função \texttt{contains()} também filtra aquelas variáveis com algum critério, neste caso de conter:

<<>>=
mtcars %>%
  select(contains("a")) %>%
  head
@


A função \texttt{aggregate()} também é utilizada para agregação de resultados pelo pacote \texttt{dplyr}:

<<>>=
mtcars %>%
  aggregate(. ~ cyl, ., mean)
@




\hypertarget{conversao-e-manipulacao-de-datas}{%
\section{Conversão e manipulação de datas}\label{conversao-e-manipulacao-de-datas}}

A configuração e padronização dos formato de datas no RStudio podem ser efetuadas pelo pesquisador, primeiramente ao carregar a base de dados no programa e em um segundo momento durante a manipulação das informações. Por padrão o RStudio trabalha com o formato ANO-MÊS-DIA, sendo possível ainda ler e incluir dados de alta frequência como horas, minutos e segundos com utilização de outros pacotes. Assim, seguem alguns dos procedimentos para a correta alteração dos padrões de datas:

<<>>=
abertura <- c("03/02/69") # Exemplo de criação de data inicial
fechamento <- c("2000-20-01") # Criação de data final
abertura <- as.Date(abertura, format = "%d/%m/%y") # Formatação da data
fechamento <- as.Date(fechamento, format = "%Y-%d-%m") 
class(abertura) # Verificando a classe do objeto
class(fechamento)
@


É possível efetuar cálculos entre datas como segue:

<<>>=
# Diferença de dias dos intervalos informados
dif=abertura-fechamento # Efetua o cálculo da diferença entre as datas
dif
class(dif) # Verifica a classe do objeto
as.numeric(dif) # Retoma o valor numérico da diferença
units(dif) # Retoma a unidade da diferença entre as datas
@


\hypertarget{o-pacote-lubridate}{%
\subsection{\texorpdfstring{O pacote \emph{lubridate}}{O pacote lubridate}}\label{o-pacote-lubridate}}

O pacote \texttt{lubridate} (GROLEMUND; WICKHAM, \protect\hyperlink{ref-lubridate2011}{2011}) é responsável por contribuir de forma eficaz para a manipulação e transformação de variáveis sob o formato de datas e horas. No caso abaixo, os comandos \texttt{ymd()} e \texttt{mdy()} codificam corretamente parao R as datas que anteriormente não estavam neste padrão.

<<message=FALSE>>=
library(lubridate)

ymd(20190215)

mdy("2/15/19")
@


Para o exemplo posterior para a manipulação de datas, foi criado um objeto denominado ``data'' com as variáveis data, quant e valor, representando a quantidade e valor de vendas em determinados dias do ano:

<<>>=
# Criando uma base de dados
data=data.frame(data=c("01/01/2018","02/02/2019",
                       "02/02/2019","05/02/2019","06/02/2019"),
                quant=c(100,200,100,150,300),
                valor=c(550.00,600.00,100.00,150.00,250.00))
head(data)
@


Em primeiro lugar é efetuada a normalização da variável data:

<<>>=
# Configurando a variável data
data$data=dmy(data$data)
@


Depois, são criadas novas variáveis representando o ano, mês, dia e dia da semana de cada venda realizada, incrementando o poder de análise dos objetos:

<<>>=
# Criando uma nova variável do ano da venda
data$ano=year(data$data)
data

# Criando uma nova variável do mês da venda
data$mes=month(data$data)
data

# Criando nova variável do dia da venda
data$dia=day(data$data)
data

# Criando nova variável do dia da semana da venda
data$diasem=wday(data$data, label=TRUE)
data
@


Com isso é possível realizar várias análises após a normalização das datas e extração de demais informações, como a sumarização de vendas por exemplo:

<<>>=
# Valor das vendas por mês
aggregate(data$valor, list(Var = data$mes), sum)

# Quantidade de vendas por mês
aggregate(data$quant, list(Var = data$mes), sum)

# Valor das vendas por mês e dia da semana 
aggregate(valor ~ mes + diasem, data = data, sum)

# Utilizando o pacote dplyr
library(dplyr)

data %>%
  group_by(diasem) %>%
  summarise(total = sum(valor))
@


\hypertarget{exercicios}{%
\section{Exercícios}\label{exercicios}}

\textbf{1.} Baixe o arquivo ``arvores'' que se encontra no endereço \url{https://smolski.github.io/softwarelivrer/livro.html}. Este é um banco de dados com informações cedido pela professora Tatiane Chassot. Abra o arquivo no Rstudio tomando os cuidados necessários (importar no formato correto, prestar atenção nas vírgulas e nomes\ldots{}). Por meio dos comandos do R, responda as seguintes perguntas, informando o comando utilizado.

\textbf{1.1.} Qual é a espécie de árvore que possui o maior e menor diâmetro? E quais são estes valores de diâmetro?

\textbf{1.2.} Qual é a altura média, mínima e média das árvores?

\textbf{1.3.} Encontre o diâmetro médio para cada espécie de árvores.

\textbf{1.4.} Com os comandos do R, verifique a quantidade de dados referente as variáveis, bem como o nome referente a cada variável.

\textbf{1.5.} Renomeie a primeira coluna para ``espécie''.

\textbf{1.6.} Classifique as árvores quanto ao seu porte, em relação à altura, em que:

Pequeno porte = árvores com altura inferior a 10 metros.

Grande porte = árvores com altura superior a 10 metros.

\textbf{2.} Baixe o arquivo ``bancodedados1'' que se encontra no endereço \url{https://smolski.github.io/softwarelivrer/livro.html}. Este é um banco de dados com informações fictícias que serão utilizados a fim de aprendizado. Abra o arquivo no Rstudio tomando os cuidados necessários. Por meio dos comandos do R, responda as seguintes perguntas, informando o comando utilizado.

\textbf{2.1.} Qual é o vendedor com mais sucesso de vendas? E o vendedor com menor número de vendas?
Qual foi o número total de vendas?

\textbf{2.3.} Supondo que um vendedor tenha ficado de fora dos dados, insira suas informações no banco de dados que já possuímos.

\begin{itemize}
\tightlist
\item Vendedor = Silvia; 
\item Idade = 48; 
\item Setor = 2; 
\item N de vendas = 45.
\end{itemize}

\textbf{2.4.} Crie uma nova coluna classificando os vendedores como:

\begin{itemize}
\tightlist
\item  vendas \(<\) 25 = ``Regular'' ; 
\item  25 \(>\) vendas = ``Ótimo''
\end{itemize}

\textbf{2.5} Renomeie a coluna ``vendas mensais'' para ``vendas diárias''.




% ------------------------------------------------------------
\hypertarget{desc}{%
\chapter{Estatística Descritiva} \label{desc}}
\chapterauthor{Denize Ivete Reis}
% ------------------------------------------------------------
\begin{flushright} \vspace{-1cm}
\emph{Denize Ivete Reis}
\end{flushright}

A Estatística é uma ciência cujo campo de aplicação estende-se a diferentes áreas do conhecimento humano. Tem por objetivo fornecer métodos e técnicas que permitem lidar, racionalmente, com situações sujeitas a incertezas. Apresenta um conjunto de técnicas e métodos de pesquisa que envolvem o planejamento de estudos (experimentais e observacionais), a coleta e organização de dados, a inferência, a análise e a disseminação de informação.

Alguns termos extensamente utilizados em estatística, são definidos a seguir (TRIOLA, \protect\hyperlink{ref-triola1999}{2011}):

\textbf{População}: é uma coleção completa de todos os elementos (valores, pessoas, medidas etc.) a serem estudados.

\textbf{Censo}: é uma coleção de dados relativos a todos os elementos de uma população.

\textbf{Amostra}: é uma sub-coleção de elementos extraídos de uma população.
Parâmetro é a medida numérica que descreve uma característica de uma população.

\textbf{Estatística}: é uma medida numérica que descreve uma característica de uma amostra.

\hypertarget{natureza-da-medida-das-variaveis}{%
\section{Natureza da medida das variáveis}\label{natureza-da-medida-das-variaveis}}

O termo ``variáveis'' se reporta à características ou atributos que podem tomar diferentes valores ou categorias, o que se opõe ao conceito de constante (ALMEIRA; FREIRE, \protect\hyperlink{ref-almeida2000}{2000}). Assim, variável pode ser definida como sendo a característica dos elementos da amostra ou da população que nos interessa estudar estatisticamente.

Variáveis podem ser classificadas da seguinte forma:

\textbf{Variáveis quantitativas}: consistem em números que representam contagens ou medidas. Dividem-se em:

\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\item
  Variáveis discretas: resultam em um conjunto finito de valores possíveis, ou de um conjunto enumerável desses valores. Ex. número de unidades produzidas.
\item
  Variáveis contínuas: resultam de um número infinito de valores possíveis que podem ser associados a pontos em uma escala contínua de tal maneira que não haja lacunas ou interrupções. Ex. Renda das famílias em reais.
\end{enumerate}

\textbf{Variáveis qualitativas}: ou variáveis categóricas, ou atributos que podem ser separados em diferentes categorias que se distinguem por alguma característica não-numérica. Divididas em:

\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\item
  Variável nominal: caracterizada por dados que consistem apenas em nomes, rótulos ou categorias. Os dados não podem ser dispostos segundo um esquema ordenado (como de baixo para cima). Ex. nacionalidade
\item
  Variável ordinal: envolve variáveis representadas por nomes que podem ser dispostos em alguma ordem, mas as diferenças entre os valores dos dados não podem ser determinadas, ou não tem sentido. Esse nível dá informações sobre comparações relativas, mas os graus de diferença não servem para cálculos (TRIOLA, \protect\hyperlink{ref-triola1999}{2011}). Ex. Grau de escolaridade.
\end{enumerate}

\textbf{Dado}: é o valor assumido por uma variável aleatória em um experimento.

A Estatística subdivide-se em descritiva e inferencial. A estatística descritiva se preocupa em descrever os dados. A estatística inferencial, fundamentada na teoria das probabilidades, se preocupa com a análise destes dados e sua interpretação.

Informações estatísticas em jornais, relatórios e outras publicações que consistem de dados reunidos e apresentados de forma clara e resumida, na forma de tabelas, gráficos ou numéricos, são conhecidos como estatísticas descritivas (ANDERSON; SWEENEY; WILLIAMS, \protect\hyperlink{ref-anderson2002}{2002}).

\textbf{Exemplo 1}

Serão utilizados como exemplo os dados de uma pesquisa (dados simulados), cujo banco de dados está intitulado ``Dados\_pesquisa.ods''. Os dados são referentes aos resultados obtidos por ocasião de uma pesquisa realizada entre os consumidores a fim de analisar características associadas ao mercado consumidor de sucos, sendo que a amostra é composta de 348 entrevistados aleatoriamente selecionados.

\begin{itemize}
\item
  O objetivo primário do estudo foi determinar variáveis que seriam úteis para caracterizar os consumidores que já conhecem o suco e a possibilidade potencial de futuros consumidores. Há também interesse nas relações entre variáveis das características pessoais desses consumidores ou futuros consumidores.
\item
  A pesquisa foi realizada, depois que os participantes realizaram uma visita técnica às instalações da empresa e puderam conhecer seus produtos e processos.
\end{itemize}

Para cada entrevistado foram registrados dados para as seguintes variáveis:

\textbf{Sexo} -- Gênero sexual;

\textbf{Divulgacao} -- Forma de acesso ao suco ou publicidade do mesmo;

\textbf{Renda\_h} -- Renda por hora do entrevistado;

\textbf{Praticidade} -- Aspectos quanto a oferta do suco, como por ex. embalagem;

\textbf{Sabor} -- Aspectos relacionados ao sabor;

\textbf{Pessoas\_familia} -- Número de pessoas que compõe o grupo familiar;

\textbf{Preço} -- como cada entrevistado classificava o preço do produto;

\textbf{consumo\_anterior} -- Se já consumia o suco antes da visita técnica;

\textbf{consumo\_pos} -- Se consumia o suco após a visita técnica;

\textbf{Idade} -- Idade dos consumidores;

\textbf{Altura\_(m)} -- Altura dos consumidores;

\textbf{Peso\_(Kg)} -- Peso dos consumidores.

Pede-se:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Salvar inicialmente os dados em formato CSV, xlsx ou outro.
\item
  Ler os dados no ``Environment'' pelo ``Import Dataset\ldots{}From CSV'' ou outro. No exemplo abaixo foram importados os dados diretamente do arquivo hospedado na internet.
\item
  Carregar o banco de dados, com a finalidade de usar os objetos (variáveis) diretamente nas funções a serem utilizadas.
\end{enumerate}

\texttt{attach(nome\_da\_planilha)}

<<>>=
library(readxl)
url <- "https://smolski.github.io/softwarelivrer/pesquisa_dados.xlsx"
destfile <- "pesquisa_dados.xlsx"
curl::curl_download(url, destfile)
pesquisa_dados <- read_excel(destfile)
attach(pesquisa_dados)
ls.str(pesquisa_dados)
@


\hypertarget{tabelas}{%
\section{Tabelas}\label{tabelas}}

Segundo Barbetta (\protect\hyperlink{ref-barbetta1988}{2010}), dados representados em tabelas e gráficos adequados, permitem observar determinados aspectos relevantes, bem como delinear hipóteses a respeito da estrutura dos dados em estudo, o que é conhecido como análise exploratória de dados. Isto pode ser feito inicialmente com a representação em forma de tabelas.

O comando \texttt{table()} é utilizado para elaborar tabelas de frequências absolutas. Dependendo da variável a ser representada, é possível utilizar esse comando de diferentes formas, como segue nas próximas subseções.

\hypertarget{tabela-simples-para-apresentacao-das-frequencias-absolutas}{%
\subsection{Tabela simples para apresentação das frequências absolutas}\label{tabela-simples-para-apresentacao-das-frequencias-absolutas}}

Uma tabela simples considera quantas vezes ocorre cada categoria (ou nível).

\texttt{table(nome\_variável)}

Ex. Variável \textbf{Praticidade}

<<>>=
table(Praticidade)
@


\hypertarget{tabela-cruzada}{%
\subsection{Tabela cruzada}\label{tabela-cruzada}}

A tabela cruzada, também conhecida como tabela de dupla entrada, para apresentação das frequências absolutas.

\texttt{table(nome\_variável1,nome\_variável2)}

Ex. Construir uma tabela cruzada apresentando as frequências absolutas das variáveis \textbf{Sexo} e \textbf{Divulgacao}.

<<>>=
table(pesquisa_dados$Sexo, pesquisa_dados$Divulgacao)
@


\hypertarget{tabela-cruzada-para-apresentacao-das-frequencias-relativas}{%
\subsection{Tabela cruzada para apresentação das frequências relativas}\label{tabela-cruzada-para-apresentacao-das-frequencias-relativas}}

Com a introdução do comando \texttt{prop.table} é possível gerar, facilmente, tabelas de frequências relativas para as variáveis de interesse. As medidas relativas são importantes para comparar distribuições de frequências (BARBETTA, \protect\hyperlink{ref-barbetta1988}{2010}).

\texttt{prop.table(table(nome\_variável1,nome\_variável2))}

Ex. Construir uma tabela cruzada apresentando as frequências relativas das variáveis \textbf{Sexo} e \textbf{Divulgacao}.

<<>>=
prop.table(table(Divulgacao, Sexo))
@


A função \texttt{tapply} serve para calcular um valor usando uma variável categórica como condição, ou seja, aplica uma função qualquer (como média, por exemplo) a uma variável quantitativa para cada classe de uma variável categórica. Assim, permite obter em um só comando, a medida para cada categoria.

\texttt{tapply(var\_quantitativa,var\_categórica,\ função\_desejada)}

\texttt{tapply(variavel\_quantitativa,variavel\_qualitativa,\ mean)}

Se um registro possui \texttt{NA}, isto é, dados perdidos: com o parâmetro na.rm=T, indica-se para o comando ignorar os NAs nos dados e calcular a média.

\texttt{tapply(variavel\_quanti,\ variavel\_quali,\ mean,\ na.rm=T)}

\hypertarget{graficos}{%
\section{Gráficos}\label{graficos}}

\hypertarget{grafico-de-colunas}{%
\subsection{Gráfico de colunas}\label{grafico-de-colunas}}

As frequências podem ser visualizadas graficamente, usando gráficos de barras elementares, que se aplicam à descrição de qualquer variável qualitativa ou quantitativa discreta, vetor de dados ou tabelas.

No entanto, no caso de dados em banco de dados, quando não são utilizados outros mecanismos de atribuição, é preciso usar o comando \texttt{table()}.

\texttt{barplot(table(nome\_variável))}

Ex. Construir um gráfico de colunas para a variável \textbf{Sexo}.

\begin{figure}[!h]
\caption{Gráfico de colunas com a variável Sexo}\label{fig:unnamed-chunk-101}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
barplot(table(Sexo))
@

\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

\textbf{Obs}.: É possível personalizar o gráfico, incluindo o título do eixo x (xlab), o título do eixoy (ylab), o título do gráfico (main), a cor da coluna (col) e cor da borda da coluna (border), lembrando que as cores, assim como os comandos devem ser expressas em inglês.

\texttt{barplot(table(nome\_variável),\ col=c("blue","red"),\\ main="Título",\ xlab="Variável\ do\ eixo\ x",}

\texttt{\ ylab\ =\ "Informação\ no\ eixo\ y",border="red")}

Para colocar o gráfico na horizontal, pode ser utilizado o comando \texttt{horiz=T}:

\begin{figure}[!h]
\caption{Gráfico de colunas com a variável Sexo (Horizontal)}\label{fig:unnamed-chunk-102}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=

par(las=2) # Altera a direção dos nomes Masculino e Feminino
par(mar=c(5,8,4,2)) # Aumenta a margem do eixo x
barplot(table(Sexo), horiz=T)
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

\textbf{Ex.1)} Construir um gráfico de colunas para a variável \textbf{Pessoas\_familia}.


\begin{figure}[!h]
\caption{Gráfico de colunas com a variável Pessoas familia}\label{fig:unnamed-chunk-103}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
barplot(table(`Pessoas_familia`), col=c("blue"), 
        main = "Frequência de pessoas por família", 
        xlab = "Frequência", 
        ylab = "Pessoas", 
        border = "red")
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

\textbf{Ex.2)} Construir uma tabela de dupla entrada para as variáveis \textbf{Sexo} e \textbf{Divulgação}.

\begin{figure}[!h]
\caption{Gráfico de colunas com as variáveis Sexo e Divulgacao}\label{fig:unnamed-chunk-104}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
barplot(table(Sexo,Divulgacao), 
        col=c("blue"), 
        main = "Frequência de pessoas por Sexo e Divulgacao")
@
\legend{Fonte: Elaborado pelo(s) autor(es).}


\end{figure}

\textbf{Ex.3)} Na sequência utiliza-se o sinal de atribuição \textless{}- para atribuir o nome Resultado para esta tabela (tabela de dupla entrada obtida em Ex.2).

<<>>=
Resultado<-table(Sexo, Divulgacao)
@


\textbf{Ex.4)} Execute o seguinte comando:

\begin{figure}[!h]
\caption{Gráfico de colunas com as variáveis Sexo e Divulgacao (2)}\label{fig:unnamed-chunk-106}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
barplot(Resultado,col=c("blue","red"),main="Título",
        xlab="Variável do eixo x",
        ylab="Informação do eixo y", 
        border='red', 
        beside=T,legend=rownames(Resultado),
        args.legend = list(x = "topleft"))
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

Observe que o uso do argumento \texttt{beside=T} evita que as barras fiquem empilhadas e o arguemnto \texttt{legend}' insere a legenda conforme as cores das colunas.

\textbf{Ex.5)} Repita o exercício a partir do Ex.3, invertendo a ordem entre as variáveis qualitativas.

\hypertarget{setograma-ou-grafico-de-pizza}{%
\subsection{Setograma ou gráfico de pizza}\label{setograma-ou-grafico-de-pizza}}

Os gráficos em setores são utilizados para ilustrar dados qualitativos de modo mais compreensível. Quando a variável é ordinal, gráficos de colunas são mais indicados pelo fato de permitirem manter a ordem das categorias. Isto também vale para os casos em que se tem muitas categorias ou quanto se pretende dar mais destaque às categorias mais frequentes (BARBETTA, \protect\hyperlink{ref-barbetta1988}{2010}).

\texttt{pie(table(nome\_variável), main="nome")}

Ex. Construa um gráfico na forma de Setograma para a variável \textbf{Sabor}.


\begin{figure}[!h]
\caption{Gráfico de pizza com a variável Sabor}\label{fig:unnamed-chunk-107}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=4, out.extra='trim={0 0.2cm 0 1cm},clip'>>=
# Criar objeto com a tabela de Sabor
Sabor1=table(Sabor)

# Calcular o percentual
percent=signif(Sabor1/sum(Sabor1)*100,3)

#Criando os nomes da legenda
nomesleg=c("Bom","Ótimo","Péssimo","Regular","Ruim")

#Plota-se o gráfico de pizza
pie(Sabor1, 
    labels = paste(percent, "%", sep=""), 
    col = terrain.colors(5), # Determina cores 
    radius = 1) 
legend(x="topright", # Determina posição da legenda
       legend=nomesleg, # Insere nomes da legenda
       cex = 0.65, # Tamanho do texto
       fill = terrain.colors(5)) # Determina cores 

## Alguns exemplos de paletas de cores:
# - rainbow(n)
# - heat.colors(n)
# - terrain.colors(n) 
# - topo.colors(n)
# - cm.colors(n)
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

\hypertarget{histograma}{%
\subsection{Histograma}\label{histograma}}

No histograma, utilizado em geral quando têm-se variáveis quantitativas contínuas, a altura dos retângulos representa a frequência de ocorrência de valores no intervalo (deve iniciar sempre em zero), que devem ter sempre a mesma largura podendo ser justapostos. O eixo horizontal (dos valores da variável) pode iniciar próximo ao menor valor da variável (BARBETTA, \protect\hyperlink{ref-barbetta1988}{2010}). Para confecção do histograma pode ser utilizado:

\texttt{hist(nome\_variável)}

Ex. Construa um histograma com a variável \textbf{Renda\_h}.

\begin{figure}[!h]
\caption{Histograma com a variável Renda\_h}\label{fig:unnamed-chunk-108}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
hist(as.numeric(`Renda_h`))
@

\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

\textbf{Obs}. I: Neste caso também é possível personalizar o gráfico, incluindo o título do eixo x (xlab), o título do eixo y (ylab), o título do gráfico (main), a cor da coluna (col) e cor da borda da coluna (border), lembrando que as cores, assim como os comandos devem ser expressas em inglês.

\textbf{Obs}. II: Para definir o número de intervalos no Histograma, utiliza-se:

\texttt{hist(nome\_variável,\ breaks\ =\ 5)}

\begin{figure}[!h]
\caption{Histograma com a variável Renda h com breaks=5}\label{fig:unnamed-chunk-109}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
hist(as.numeric(`Renda_h`), 
     breaks=5, 
     labels=TRUE, 
     ylim=c(0,200), 
     xlab = 'Renda',
     ylab = 'Frequência',
     main = 'Histograma da Renda',
     col = '#BBDEFB')
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

O comando \texttt{ylim} determina os limites do eixo y a serem mostrados; \texttt{xlab} e \texttt{ylab} determinam o nome das variáveis dos eixos x e y; \texttt{main} determina o nome do título e \texttt{col} determina a cor do gráfico. Use o argumento \texttt{main=NULL} para remover o título.

Inserindo as opções \texttt{\$counts} e \texttt{\$breaks} retomam-se os valores da contagem dos dados e dos intervalos do histograma:

<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
hist(as.numeric(`Renda_h`), breaks=5)$counts
hist(as.numeric(`Renda_h`), breaks=5)$breaks
@


\hypertarget{boxplot-ou-diagrama-em-caixas}{%
\subsection{Boxplot ou diagrama em caixas}\label{boxplot-ou-diagrama-em-caixas}}

Os diagramas em caixa são convenientes para revelar tendências centrais, dispersão, distribuição dos dados e a presença de outliers (valores extremos). Como as medianas revelam uma tendência central, ao passo que os quartis indicam a dispersão dos dados, os diagramas em caixa têm a vantagem de não serem tão sensíveis a valores extremos como outras medidas baseadas na média e no desvio-padrão. Por outro lado, os diagramas em caixa (boxplots) não fornecem informação tão detalhada quanto os histogramas ou os gráficos ramo-e-folhas, podendo não ser, assim, a melhor escolha quando lida-se com um único conjunto de dados. Os diagramas em caixa são, entretanto, mais convenientes na comparação de dois ou mais conjuntos de dados (TRIOLA, \protect\hyperlink{ref-triola1999}{2011}).

No diagrama de caixas, torna-se fácil identificar \textbf{outliers} (ou valores extremos), que são valores extremamente raros, no sentido de que estão muito afastados da maioria dos dados. Ao explorar um conjunto de dados, é preciso considerar os \emph{outliers}, porque eles podem revelar informações importantes (TRIOLA, \protect\hyperlink{ref-triola1999}{2011}).

Para obter o boxplot para um conjunto de dados:

\texttt{boxplot(variávelA,\ variávelB,\ names=c("A","B"))}

\textbf{Ex.1)} Construir um boxplot da variável \textbf{Idade}.

\begin{figure}[!h]
\caption{Boxplot com a variável Idade}\label{fig:unnamed-chunk-111}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
boxplot(Idade,horizontal = T)
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

Ainda é possível criar um boxplot analisando a relação da variável contínua de acordo com outras variáveis. Por exemplo, a relação de dispersão dos respondentes relacionando a idade da pessoa com o sabor:

\begin{figure}[!h]
\caption{Boxplot com as variáveis Idade e Sabor}\label{fig:unnamed-chunk-112}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
boxplot(Idade~Sabor, data=pesquisa_dados)
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

\hypertarget{grafico-ramo-e-folhas}{%
\subsection{Gráfico ramo-e-folhas}\label{grafico-ramo-e-folhas}}

Em um gráfico ramo-e-folhas, são classificados os dados segundo um padrão que revela a distribuição subjacente. O padrão consiste em separar um número em duas partes em geral: o ramo consiste nos algarismos mais à esquerda e as folhas consistem nos algarismos mais à direita.

No gráfico Ramo-e-folhas, é possível ver a distribuição desses dados, que é uma vantagem do gráfico ramo-e-folhas e ainda conservar toda a informação da lista original; se necessário, pode-se recompor a relação original de valores. Note que as linhas de algarismos em um gráfico ramo-e-folhas são análogas, em natureza, às barras de um histograma (TRIOLA, \protect\hyperlink{ref-triola1999}{2011}).

\texttt{stem(nome\_variável)} - comando que permite obter um gráfico Ramo e Folhas.

Ou

\texttt{stem(nome\_variável,scale=1)}

O ``scale=1'', que é o padrão, separa os ramos das folhas a partir das casas decimais.

Caso padrão:

\begin{itemize}
\tightlist
\item
  A ideia do ramo e folhas é separar um número (como 16,0) em duas partes. Assim, a primeira parte inteira (16) chamada de ramo e a segunda, a parte decimal (0) chamada de folha. O padrão do R é separar os números em duas partes (inteira e decimal) e agrupar os números em classes de tamanho 2. Por exemplo, o ramo 16 leva em conta os números 16 e 17.
\end{itemize}

\textbf{Obs.}: Esse padrão vai se alterando, à medida que o conjunto de dados apresente diferentes casas decimais.

Assim, outras opções podem ser avaliadas:

\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\item
  \texttt{stem(nome\_variável,scale=0.5)}
\item
  \texttt{stem(nome\_variável,scale=2)}
\end{enumerate}

\textbf{Obs.}: Quando uma folha relacionada com certo ramo tem uma quantidade tão grande de valores que ele sintetiza essa quantidade usando a denominação +n, e invade a linha seguinte, isso pode ser melhorado usando \textbf{width}.

\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{2}
\tightlist
\item
  \texttt{stem(nome\_variável,scale=0.5,width=120)}
\end{enumerate}

Ex. Construa um gráfico Ramo e Follhas com a variável \textbf{Idade}.

<<>>=
stem(Idade, scale=2)
@


\hypertarget{graficos-de-dispersao}{%
\subsection{Gráficos de dispersão}\label{graficos-de-dispersao}}

Às vezes dispõe-se de dados emparelhados de forma que associa cada valor de um conjunto a um determinado valor de um segundo conjunto. Um diagrama de dispersão é um gráfico dos dados emparelhados (x, y), com um eixo x horizontal e um eixo y vertical. O diagrama de dispersão, apresenta no eixo horizontal os valores da primeira variável e um eixo vertical para os valores da segunda variável. O padrão dos pontos assim marcados costuma ajudar a determinar se existe algum relacionamento entre as duas variáveis A e B.

\texttt{plot(variável\_independente,variável\_dependente)}

Ou

\texttt{plot(variável\_dependente\textasciitilde{}variável\_independente)}

\hypertarget{grafico-de-linhas}{%
\subsection{Gráfico de linhas}\label{grafico-de-linhas}}

Apresenta a evolução de um dado, geralmente ao longo do tempo. Eixos na vertical e na horizontal indicam as informações a que se refere e a linha traçada entre eles, ascendente, descendente constante ou com vários altos e baixos mostra o percurso de um fenômeno específico.

Ex. Considere os dados que descrevem os valores do número de empresas fiscalizadas na fiscalização do trabalho na área rural Brasil 1998-2010.

\begin{longtable}[]{@{}cc@{}}
\caption{\label{tab:evolres}Evolução dos resultados da fiscalização do trabalho na área rural Brasil 1998-2010}\tabularnewline
\toprule
\textbf{Ano} & \textbf{Empresas Fiscalizadas}\tabularnewline
\midrule
\endfirsthead
\toprule
\textbf{Ano} & \textbf{Empresas Fiscalizadas}\tabularnewline
\midrule
\endhead
1998 & 7.042\tabularnewline
1999 & 6.561\tabularnewline
2000 & 8.585\tabularnewline
2001 & 9.641\tabularnewline
2002 & 8.873\tabularnewline
2003 & 9.367\tabularnewline
2004 & 13.856\tabularnewline
2005 & 12.192\tabularnewline
2006 & 13.326\tabularnewline
2007 & 13.390\tabularnewline
2008 & 10.839\tabularnewline
2009 & 13.379\tabularnewline
2010 & 11.978\tabularnewline
\bottomrule
\caption*{Fonte: DIEESE (\protect\hyperlink{ref-Dieese2011}{2011}).}
\end{longtable}


Para construir um gráfico de linhas, é utilizado o seguinte comando:

\texttt{plot(x,y,type=\ "Tipo\ de\ símbolo")}

Neste gráfico, é possível utilizar comandos já inseridos anteriormente, para inserir título, nomes dos eixos, etc. Para escolher o formato das linhas, com o uso do argumento \texttt{type}, seguem algumas opções:

\begin{itemize}
\tightlist
\item
  \texttt{"p"} para pontos,
\item
  \texttt{"l"} para linhas,
\item
  \texttt{"b"} para pontos e linhas,
\item
  \texttt{"c"} para linhas descontínuas nos pontos,
\item
  \texttt{"o"} para pontos sobre as linhas,
\item
  \texttt{"n"} para nenhum gráfico, apenas a janela.
\end{itemize}

Para o caso de representação no mesmo gráfico, de duas ou mais variáveis, o processo deverá ser realizado por etapas:

\begin{figure}[!h]
\caption{Gráfico de linhas sobre a fiscalização do trabalho na área rural Brasil 1998-2010}\label{fig:unnamed-chunk-115}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
empfisc=data.frame(ano=c(1998,1999,2000,2001,2002,2003,2004,
                         2005,2006,2007,2008,2009,2010), 
                   qtd=c(7042,6561,8585,9641,8873,9367,
                         13856,12192,13326,13390,10839,
                         13379,11978))

plot(empfisc$ano,empfisc$qtd,type="b",main="Título",
     xlab="Nome_eixo_x",ylab="Nome_eixo_y", 
     col="blue",xlim=c(1998,2010))
@
\legend{Fonte: Elaborado pelo(s) autor(es) a partir de DIEESE (\protect\hyperlink{ref-Dieese2011}{2011}).}
\end{figure}

onde, no argumento \texttt{ylim}, deve-se indicar o intervalo de variação dos valores de y, ou seja todo o intervalo que será necessário para representar todas as variáveis.

Na sequência são adicionadas as instruções para as demais variáveis:

\texttt{lines(x,\ y2,col="cor\_desejada",\ type="b")}

Com o argumento \texttt{"legend"} instruímos a formatação da legenda:

\texttt{legend(xp,yp,c("variável\_1\ na\ legenda",\ "variável\_2\ na\ legenda"),}

\texttt{col = c(``Cor1'',``cor2''), pch=Valor entre 0 e 25)}

Obs.: \texttt{pch} = número (entre 0 e 25). No Help do R (buscando com pch), você encontra a lista completa de símbolos que podem ser utilizados na representação da legenda.
Neste caso, pode ser importante também alterar o tamanho da fonte da legenda, com o uso do argumento \texttt{"cex"}.

Exemplo: Segue exemplo de um gráfico de linhas para as temperaturas registradas durante o dia 11/04/2018, pela Estação Meteorológica de São Luiz Gonzaga, RS, conforme dados obtidos no site do INMET (\protect\hyperlink{ref-inmet}{2018}).

<<>>=
library(readr)
inmet <- read_delim("https://goo.gl/2p11WS", 
    ";", escape_double = FALSE, 
    col_types = cols(data = col_date(format = "%m/%d/%Y")), 
    trim_ws = TRUE)
head(inmet)
@


Esta sequência de comandos para obtenção do gráfico de linhas.

\begin{figure}[!h]
\caption{Gráfico de linha sobre as temperaturas registradas em São Luiz Gonzaga - RS}\label{fig:unnamed-chunk-117}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
plot(inmet$hora,inmet$temp_inst,type = "b", 
  main = "Temperaturas registradas na estação metereológica
  de São Luis Gonzaga, 11 de abril de 2018",
  xlab = "hora",ylab = "temperaturas",col="blue",
  ylim = c(20,40))

lines(inmet$hora,inmet$temp_max,col="red",type = "b")

lines(inmet$hora,inmet$temp_min,col="green",type = "b")

legend(0,40,c("temp_inst","temp_max","temp_min"),
  col =c("blue","red","green"),pch=4.1,cex = 0.75)
@
\legend{Fonte: Elaborado pelo(s) autor(es) a partir de INMET (\protect\hyperlink{ref-inmet}{2018}).}
\end{figure}

\hypertarget{estatisticas-descritivas}{%
\section{Estatísticas Descritivas}\label{estatisticas-descritivas}}

Para determinar o valor máximo de um conjunto de dados, utiliza-se:

\texttt{max(nome\_da\_variável)}

Use a variável \textbf{Renda\_h}

<<>>=
#Transforme a variável Renda_h em variável numérica
pesquisa_dados$Renda_h=as.numeric(pesquisa_dados$Renda_h)
#É preciso repetir o comando attach()
attach(pesquisa_dados)
max(Renda_h)
@


De forma análoga, para determinar o valor mínimo de um conjunto de dados, utiliza-se:

\texttt{min(nome\_da\_variável)}

Use a variável \textbf{Renda\_h}

<<>>=
min(Renda_h)
@


\textbf{Obs.}: Para determinar a amplitude total de um conjunto de dados, utiliza-se:

\texttt{max(nome\_da\_variável)-min(nome\_da\_variável)}

Use a variável \textbf{Renda\_h}

<<>>=
max(Renda_h)-min(Renda_h)
@


Para obter as medidas da estatística descritiva, no caso medidas de tendência central (mínimo, quartil 1, mediana, média, quartil 3, máximo):

\texttt{summary(nome\_da\_variável)}

Ex. Use a variável \textbf{Renda\_h}

<<>>=
summary(Renda_h)
@


A moda é o valor que tem o maior número de ocorrências em um conjunto de dados.

O R não tem um padrão de função embutida para calcular a moda. Uma sugestão é a criação de uma função pelo usuário, que pode ser obtida, por exemplo por:

\texttt{subset(table(variável),\\ table(variável)==max(table(variável)))}

Ex. Use a variável \textbf{Praticidade}

<<>>=
subset(table(Praticidade), 
       table(Praticidade)==max(table(Praticidade)))
@

Ex. Use a variável quantitativa \textbf{Pessoas\_familia}

<<>>=
table(Pessoas_familia)
@


\textbf{Obs.}: O primeiro valor encontrado, refere-se ao valor da moda ao passo que o segundo valor representa quantas vezes esse valor foi verificado.

Comando que permite determinar o percentil, no caso o percentil 10:

\texttt{quantile(nome\_variável,0.1)}

\textbf{Obs.}: Experimente usar o comando:

\texttt{quantile(nome\_variável)}

\textbf{Obs.}: Para a obtenção de quartis e decis, basta realizar a conversão para o respectivo percentil e assim calcular normalmente.

<<>>=
quantile(Renda_h)
quantile(Renda_h,0.1)
@


Para obter as medidas de variabilidade, no caso, variância e desvio-padrão, respectivamente:

\texttt{var(nome\_variável)}

\texttt{sd(nome\_variável)}

Ex. Calcule as medidas de variabilidade com a variável \textbf{Pessoas\_familia}

<<>>=
var(Pessoas_familia)
sd(Pessoas_familia)
@


A função \texttt{subset()}:

Com esta função é possível fazer cálculos utilizando filtros, simultaneamente. A aplicação de filtros é extremamente útil quando a intensão é de explorar os dados de forma rápida e eficiente.

Exemplos:

Ex. 1) Altura das pessoas do sexo masculino: com a função abaixo o R gera um subconjunto com as alturas de todas as pessoas do sexo masculino.

<<>>=
subset(`Altura_(m)`, Sexo=="Masculino")
@


Ex. 2) Média das alturas das pessoas do sexo masculino: inserindo o comando \texttt{mean()} ao subconjunto anterior, é obtido como resultado a média das alturas das pessoas do sexo masculino.

<<>>=
mean(subset(`Altura_(m)`, Sexo=="Masculino"))
@


Ex. 3) Média das alturas das pessoas do sexo masculino com mais de 26 anos:

<<>>=
mean(subset(`Altura_(m)`, Sexo=="Masculino"& Idade>25))
@


Ex. 4) Contagem de pessoas do sexo feminino que tenham menos de 60 kg:

<<>>=
length(subset(Sexo,Sexo=="Feminino" & `Peso_(Kg)`<60))
@


Ex. 5) Montando uma tabela para exibir o gênero de pessoas que classificaram o Sabor como ``Pessimo'':

<<>>=
table(subset(Sexo, Sabor=="Pessimo"))
@


Este capítulo não teve a pretensão de esgotar o estudo de todos os comandos a serem aplicados na estatística descritiva (veja help do R), nem tampouco os conceitos estatísticos necessários à compreensão. Para mais detalhes sobre os conceitos de estatística descritiva, você pode consultar outras referências ou até mesmo as já citadas neste capítulo.

\hypertarget{exercicios-1}{%
\section{Exercícios}\label{exercicios-1}}

\textbf{1.} Carregue a base de dados denominada ``arvores'' disponível no site do livro \url{https://smolski.github.io/softwarelivrer/livro.html} e responda as questões abaixo:

\textbf{1.1} Utilize a função \texttt{summary} para identificar os principais indicadores da base de dados. Com a função \texttt{table} encontre a contagem das espécies que constam na planilha a partir da variável ``Nomecientifico'':

\textbf{1.2} Utilizando a função \texttt{tapply} calcule a média do diâmetro por cada espécie.

\textbf{1.3} Utilizando as funções \texttt{table} e \texttt{barplot} construa um gráfico de barras com a quantidade de itens por espécies que constam na base de dados. Não esqueça de utilizar o comando \texttt{horiz=TRUE} para melhor visualização.




% ------------------------------------------------------------
\hypertarget{inf}{%
\chapter{Estatística Inferencial}\label{inf}}
\chapterauthor{Tatiane Chassot}
% ------------------------------------------------------------
\begin{flushright} \vspace{-1cm}
\emph{Tatiane Chassot}
\end{flushright}

A inferência estatística, ou estatística inferencial, tem por objetivo concluir e tomar decisões, com base em amostras (Figura \ref{fig:infestat}). Usam-se dados extraídos de uma amostra para produzir inferência sobre a população (LOPES \emph{et al.}, \protect\hyperlink{ref-lopes2008}{2008}).

\begin{figure}[!h]

\caption{Inferência Estatística}\label{fig:infestat}
<<echo=FALSE>>=
knitr::include_graphics("infestat.png")
@
\legend{Fonte: <http://www.portalaction.com.br/inferencia-0>.}
\end{figure}


Em Estatística, o termo \textbf{população} é definido como conjunto de indivíduos, ou itens, com pelo menos uma característica em comum, podendo ser finita ou infinita (LOPES \emph{et al.}, \protect\hyperlink{ref-lopes2008}{2008}). Por exemplo, água de um rio, sangue de uma pessoa, lote de peças produzidas por uma indústria, eleitores de um município.

A \textbf{amostra} é um subconjunto, necessariamente finito, de uma população e é selecionada de forma que todos os elementos da população tenham a mesma chance de serem escolhidos.

\hypertarget{intervalo-de-confianca}{%
\section{Intervalo de Confiança}\label{intervalo-de-confianca}}

Entre as diferentes técnicas de Inferência Estatística, têm-se a Estimação de Parâmetros, que consiste na determinação de um \textbf{Intervalo de Confiança (IC)} para uma média ou proporção populacional, ao um nível (1 - \(\alpha\))\% de confiança.

O nível de confiança (1 - \(\alpha\))\% normalmente varia de 90\% a 99\%.

\hypertarget{intervalo-de-confianca-para-uma-media-populacional}{%
\subsection{Intervalo de confiança para uma média populacional}\label{intervalo-de-confianca-para-uma-media-populacional}}

Um \textbf{intervalo de confiança (IC)} é o \textbf{intervalo} estimado onde a média de um parâmetro tem uma dada probabilidade de ocorrer. Comumente define-se como o \textbf{intervalo} onde há (1 - \(\alpha\))\% de probabilidade da média verdadeira da população inteira ocorrer.

IC (limite inferior \(\leq\) \(\mu\) \(\leq\) limite superior) = (1 - \(\alpha\))\%

No software RStudio, o Intervalo de Confiança pode ser obtido usando o teste t.

\textbf{Exemplo 1}: Os dados amostrais a seguir representam o número de horas de estudos semanais para a disciplina de Estatística Básica, de uma amostra de 10 alunos:

19 18 20 16 18 19 19 17 22 21

Qual é o intervalo de confiança para a média populacional de onde essa amostra foi retirada?

<<>>=
horasestudo=c(19,18,20,16,18,19,19,17,22,21)
t.test(horasestudo)
@


IC (17,6 \(\leq\) \(\mu\) \(\leq\) 20,2) = 95\%

Com 95\% de confiança, a média populacional das horas semanais de estudo para a disciplina de Estatística Básica está entre 17,6 e 20,2 horas. Ou seja, qualquer aluno (de onde essa amostra foi retirada) estuda em média, de 17,6 a 20,2 horas por semana.

Se não for informado o nível de confiança, o software R considera 95\%. No entanto, para mudar o nível de confiança para 90\%, é acrescentada a informação \texttt{conf.level\ =\ 0.90} após o nome da variável:

<<>>=
t.test(horasestudo, conf.level = 0.90)
@


IC (17,9 \(\leq\) \(\mu\) \(\leq\) 19,9) = 90\%

Com 90\% de confiança, a média populacional das horas semanais de estudo para a disciplina de Estatística Básica está entre 17,9 e 19,9 horas. Ou seja, qualquer aluno (de onde essa amostra foi retirada) estuda em média, de 17,9 a 19,9 horas por semana.

Para mudar o nível de confiança para 99\%:

<<>>=
t.test(horasestudo, conf.level = 0.99)
@


IC (17,1 \(\leq\) \(\mu\) \(\leq\) 20,7) = 99\%

Com 99\% de confiança, a média populacional das horas semanais de estudo para a disciplina de Estatística Básica está entre 17,1 e 20,7 horas. Ou seja, qualquer aluno (de onde essa amostra foi retirada) estuda em média, de 17,1 a 20,7 horas por semana.

\hypertarget{para-verificar-normalidade-dos-dados}{%
\subsection{Para verificar normalidade dos dados}\label{para-verificar-normalidade-dos-dados}}

Algumas técnicas de inferência estatística têm como requisitos a normalidade dos dados. Para verificar se os dados seguem uma distribuição normal, é possível, inicialmente usar o histograma e depois confirmar com um teste estatístico para testar normalidade como Shapiro-Wilk ou Kolmogorov-Smirnov.

Hipóteses do teste:

\begin{itemize}
\tightlist
\item
  \textbf{\(H_0\)}: os dados seguem uma distribuição normal
\item
  \textbf{\(H_1\)}: os dados não seguem uma distribuição normal
\end{itemize}

O \textbf{valor p} reflete a plausibilidade de se obter tais resultados no caso de \(H_0\) ser de fato verdadeira.

\begin{figure}[!h]
\caption{Teste de hipóteses}\label{fig:testehip1}
{\centering \includegraphics[width=0.7\linewidth]{testehip1} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

<<>>=
shapiro.test(horasestudo)
@


Como p \(>\) 0,05, não rejeita-se \(H_0\) e conclui-se que os dados seguem uma distribuição normal.

\hypertarget{intervalo-de-confianca-para-uma-proporcao-populacional}{%
\subsection{Intervalo de confiança para uma proporção populacional}\label{intervalo-de-confianca-para-uma-proporcao-populacional}}

IC (limite inferior \(\leq\) \(\pi\) \(\leq\) limite superior) = (1 - \(\alpha\))\%

\textbf{Exemplo 2}: (adaptado de \url{https://www.passeidireto.com/arquivo/3802950/capitulo7---intervalos-de-confianca}) Entre 500 pessoas entrevistadas a respeito de suas preferências eleitorais, 260 mostraram-se favoráveis ao candidato B. Qual é a proporção amostral dos favoráveis ao candidato B? E a proporção populacional dos favoráveis?

Sintaxe no software RStudio:

\texttt{prop.test(x,n,conf.level=nível\ de\ confiança)}

Em que:

x = número de sucessos

n = tamanho da amostra

nível de confiança = 0,90 a 0,99

<<>>=
prop.test(260, 500)
@


A proporção amostral dos eleitores favoráveis ao candidato B é de 0,52.

IC (0,48 \(\leq\) \(\pi\) \(\leq\) 0,56) = 95\%

Com 95\% de confiança, a proporção populacional dos eleitores favoráveis ao candidato B está entre 0,48 e 0,56.

Para mudar o nível de confiança para 90\%:

<<>>=
prop.test(260, 500, conf.level = 0.90)
@


IC (0,48 \(\leq\) \(\pi\) \(\leq\) 0,56) = 90\%

Com 90\% de confiança, a proporção populacional dos eleitores favoráveis ao candidato B está entre 0,48 e 0,56.

Para mudar o nível de confiança para 99\%:

<<>>=
prop.test(260, 500, conf.level = 0.99)
@


IC (0,46 \(\leq\) \(\pi\) \(\leq\) 0,58) = 99\%

Com 99\% de confiança, a proporção populacional dos eleitores favoráveis ao candidato B está entre 0,46 e 0,58.

\hypertarget{teste-de-hipoteses}{%
\section{Teste de hipóteses}\label{teste-de-hipoteses}}

O teste de hipóteses é uma outra forma de fazer inferência estatística. Formula-se uma hipótese (\(H_0\)) para um parâmetro populacional e, partir de uma amostra dessa população, aceita-se ou rejeita-se esta hipótese.

\textbf{\(H_0\)}: hipótese nula (sempre tem a condição de igualdade)

\textbf{\(H_1\)}: hipótese alternativa (tem o sinal de \(\neq\), \(>\) ou \(<\))

\hypertarget{teste-de-hipoteses-para-uma-media-populacional}{%
\subsection{Teste de hipóteses para uma média populacional}\label{teste-de-hipoteses-para-uma-media-populacional}}

\(H_0\): \(\mu\) \(=\) \ldots{}\ldots{}

\(H_1\): \(\mu\) \(\neq\) \ldots{}\ldots{}

\(H_0\): \(\mu\) \(=\) \ldots{}\ldots{}.

\(H_1\): \(\mu\) \(>\) \ldots{}\ldots{}..

\(H_0\): \(\mu\) \(=\) \ldots{}\ldots{}

\(H_1\): \(\mu\) \(<\) \ldots{}\ldots{}

No software RStudio, usa-se o \texttt{t.test} para a realização do teste de hipóteses para uma média populacional, levando-se em conta o valor de p-value para aceitar ou rejeitar \(H_0\).

De acordo com as hipóteses, constam variações do \texttt{t.test}, conforme segue:

sintaxe: \texttt{t.test(amostra,\ opções)}

\begin{itemize}
\tightlist
\item
  \textbf{amostra}: Vetor contendo a amostra da qual se quer testar a média populacional.
\item
  \textbf{opções}: alternative: string indicando a hipótese alternativa desejada. Valores possíveis: \texttt{"two-sided"}, \texttt{"less"} ou \texttt{"greater"}.
\item
  \(\mu\): valor indicando o verdadeiro valor da média populacional.
\end{itemize}

\textbf{Exemplo 3}: (adaptado de \textless{}https://bit.ly/2WBrYnn \textgreater{}) A precipitação pluviométrica mensal numa certa região nos últimos 9 meses foi a seguinte:

% www.leg.ufpr.br/\textasciitilde{}paulojus/CE002/pratica/praticase8.xml

30,5 34,1 27,9 35,0 26,9 30,2 28,3 31,7 25,8

Construa um teste de hipóteses para saber se a média da precipitação pluviométrica mensal é igual a 30,0 mm.

\textbf{\(H_0\)}: \(\mu\) \(=\) 30 mm

\textbf{\(H_1\)}: \(\mu\) \(\neq\) 30 mm

<<>>=
chuva=c(30.5,34.1,27.9,35,26.9,30.2,28.3,31.7,25.8)
chuva

t.test(chuva,alt="two.sided",mu=30)
@


Conclusão: Aceita-se \(H_0\) e conclui-se que a precipitação pluviométrica média é igual a 30 mm.

\textbf{Exemplo 4}: (adaptado de \url{https://www.passeidireto.com/arquivo/5533375/lista-eststistica-pronta-p-3-prova-com-respostas/3}) Um empresário desconfia que o tempo médio de espera para atendimento de seus clientes é superior a 20 minutos. Para testar essa hipótese ele entrevistou 20 pessoas e questionou quanto tempo demorou para ser atendido. O resultado dessa pesquisa foi o seguinte:

22 20 21 23 22 20 23 22 20 24 21 20 21 24 22 22 23 22 20 24

Teste a hipótese de que o tempo de espera médio é superior a 20 minutos.

\textbf{\(H_0\)}: \(\mu\) \(=\) 20 minutos

\textbf{\(H_1\)}: \(\mu\) \(>\) 20 minutos

<<>>=
tempo=c(22,20,21,23,22,20,23,22,20,24,21,20,21,24,22,22,23,22,20,24)
tempo

t.test(tempo, alt="greater", mu=20)
@


Conclusão: Rejeita-se \(H_0\) com nível de significância de 1\% e conclui-se que o tempo médio de espera é superior a 20 minutos.

\textbf{Exemplo 5}: (adaptado de \url{https://docs.ufpr.br/~vayego/pdf_11_2/pratica_04_zoo.pdf}) Os resíduos industriais jogados nos rios, muitas vezes, absorvem oxigênio, reduzindo assim o conteúdo do oxigênio necessário à respiração dos peixes e outras formas de vida aquática. Uma lei estadual exige um mínimo de 5 p.p.m. (Partes por milhão) de oxigênio dissolvido, a fim de que o conteúdo de oxigênio seja suficiente para manter a vida aquática. Seis amostras de água retiradas de um rio, durante a maré baixa, revelaram os índices (em partes por milhão) de oxigênio dissolvido:

4,9 5,1 4,9 5,5 5,0 4,7

Estes dados são evidência para afirmar que o conteúdo de oxigênio é menor que 5 partes por milhão?

\textbf{\(H_0\)}: \(\mu\) \(=\) 5 ppm

\textbf{\(H_1\)}: \(\mu\) \(<\) 5 ppm

<<>>=
amostras=c(4.9,5.1,4.9,5.5,5.0,4.7)
t.test(amostras, alt="less", mu=5)
@


Conclusão: Aceita-se \(H_0\) e conclui-se que o conteúdo médio de oxigênio é igual a 5 ppm.

\hypertarget{teste-de-hipoteses-para-uma-proporcao-populacional}{%
\subsection{Teste de hipóteses para uma proporção populacional}\label{teste-de-hipoteses-para-uma-proporcao-populacional}}

\(H_0\): \(\pi\) \(=\) \ldots{}\ldots{}

\(H_1\): \(\pi\) \(\neq\) \ldots{}\ldots{}

\(H_0\): \(\pi\) \(=\) \ldots{}\ldots{}.

\(H_1\): \(\pi\) \(>\) \ldots{}\ldots{}..

\(H_0\): \(\pi\) \(=\) \ldots{}\ldots{}

\(H_1\): \(\pi\) \(<\) \ldots{}\ldots{}

No software RStudio, usa-se o prop.test para a realização do teste de hipóteses para uma proporção populacional, levando-se em conta o valor de p-value para aceitar ou rejeitar \(H_0\).

Sintaxe:

\texttt{prop.test(x,n,p=.....,alt=".....")}

em que:

x = número de sucessos;

n = tamanho da amostra;

p = proporção a ser testada;

alt = \texttt{"two.sided"}, \texttt{"greater"} ou \texttt{"less"}.

\textbf{Exemplo 6}: (adaptado de \url{https://docs.ufpr.br/~soniaisoldi/TP707/Aula8.pdf}) Uma máquina está regulada quanto produz 3\% de peças defeituosas. Uma amostra aleatória de 80 peças selecionadas ao acaso apresentou 3 peças defeituosas. Teste a hipótese de que a máquina está regulada.

\textbf{\(H_0\)}: \(\pi\) \(=\) 3\%

\textbf{\(H_1\)}: \(\pi\) \(\neq\) 3\%

<<warning=FALSE>>=
prop.test(3,80, p=0.03, alt="two.sided")
@


Conclusão: Aceita-se \(H_0\) e conclui-se que a máquina produz 3\% de peças defeituosas, ou seja, a máquina está regulada.

\textbf{Exemplo 7}: (adaptado de \textless{}https://bit.ly/2uF9kiL \textgreater{}) As condições de mortalidade de uma região são tais que a proporção de nascidos que sobrevivem até 60 anos é de 0,6. Testar essa hipótese se em 1.000 nascimentos amostrados aleatoriamente, verificou-se 530 sobreviventes até 60 anos.

% www.ebah.com.br/content/ABAAAAdLkAI/metodos-estatistico-und-v-lista-resolvida

\textbf{\(H_0\)}: \(\pi\) \(=\) 0,6

\textbf{\(H_1\)}: \(\pi\) \(\neq\) 0,6

<<>>=
prop.test(530, 1000, p=0.6, alt="two.sided")
@


Conclusão: Rejeita-se \(H_0\) com nível de significância de 1\% e conclui-se que a proporção de nascidos que sobrevivem até os 60 anos é diferente de 0,6.

\textbf{Exemplo 8}: (adaptado de \textless{}https://bit.ly/2uF9JBN \textgreater{}) Uma empresa retira periodicamente amostras aleatórias de 500 peças de sua linha de produção para análise da qualidade. As peças da amostra são classificadas como defeituosas ou não, sendo que a política da empresa exige que o processo produtivo seja revisto se houver evidência de mais de 1,5\% de peças defeituosas. Na última amostra, foram encontradas nove peças defeituosas. O processo precisa ser revisto?

% https://docs.ufpr.br/~jomarc/intervaloeteste.pdf

\textbf{\(H_0\)}: \(\pi\) \(=\) 1,5\%

\textbf{\(H_1\)}: \(\pi\) \(>\) 1,5\%

<<>>=
prop.test(9, 500, p=0.015, alt="greater")
@


Conclusão: Não rejeita \(H_0\) e conclui-se que a proporção de peças defeituosas é igual a 1,5\%, ou seja, o processo não precisa ser revisto.

\textbf{Exemplo 9}: (adaptado de \url{https://www.passeidireto.com/arquivo/25297344/aula-19---testes-para-proporcao}) Uma pesquisa conclui que 90\% dos médicos recomendam aspirina a pacientes que têm filhos. Teste a afirmação contra a alternativa de que a percentagem é inferior a 90\%, se numa amostra aleatória de 100 médicos, 80 recomendam aspirina.

\textbf{\(H_0\)}: \(\pi\) \(=\) 90\%

\textbf{\(H_1\)}: \(\pi\) \(<\) 90\%

<<>>=
prop.test(80, 100, p=0.90, alt="less")
@


Conclusão: Rejeita-se \(H_0\) com nível de significância de 1\% e conclui-se que a proporção de médicos que recomendam aaspirina é inferior a 90\%.

\hypertarget{teste-de-hipotese-para-duas-medias}{%
\subsection{Teste de hipótese para duas médias}\label{teste-de-hipotese-para-duas-medias}}

O teste de hipótese para duas médias aplica-se quando se deseja comparar dois grupos:

\begin{figure}[!h]
\caption{Teste de hipótese para dois grupos}\label{fig:testehip2}
{\centering \includegraphics[width=0.7\linewidth]{testehip2} 

}
\legend{Fonte: \url{http://www.leg.ufpr.br/lib/exe/fetch.php/disciplinas:ce001:bioestatistica_testes_t_para_comparacao_de_medias_de_dois.pdf}.}
\end{figure}

É possível comparar duas médias de duas amostras dependentes, também chamadas de pareadas, ou médias de duas amostras independentes.

\hypertarget{teste-de-hipoteses-duas-amostras-dependentes}{%
\subsubsection{Teste de hipóteses duas amostras dependentes}\label{teste-de-hipoteses-duas-amostras-dependentes}}

\textbf{Exemplo 10}: Foi obtido o peso de seis indivíduos antes e após um treinamento de exercício físico. Teste a hipótese de que a média antes do treinamento é diferente da média após o treinamento.

\begin{table}[!h]

\caption{\label{tab:unnamed-chunk-150}Amostras dependentes}
\centering
\begin{tabular}{l|r|r|r|r|r|r}
\hline
Indivíduo & A & B & C & D & E & F\\
\hline
Peso antes do treinamento & 99 & 62 & 74 & 59 & 70 & 73\\
\hline
Peso depois do treinamento & 94 & 62 & 66 & 58 & 70 & 76\\
\hline
\end{tabular}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{table}

No software RStudio, é utilizado o \texttt{t.test} para a realização do teste de hipóteses para uma média populacional, levando-se em conta o valor de \emph{p-value} para aceitar ou rejeitar \(H_0\).

Hipóteses:

\textbf{\(H_0\)}: média antes \(=\) média depois

\textbf{\(H_1\)}: média antes \(\neq\) média depois

<<>>=
antes=c(99,62,74,59,70,73)
depois=c(94,62,66,58,70,76)
t.test(antes, depois, paired=TRUE)
@


Conclusão: Não rejeita-se \(H_0\) e conclui-se que a média de peso antes do treinamento é igual à média de peso depois do treinamento.

\textbf{Exemplo 11}: (adaptado de \textless{}www.inf.ufsc.br/\textasciitilde{}marcelo/testes2.html\textgreater{}) Dez cobaias foram submetidas ao tratamento de engorda com certa ração. Os pesos em gramas, antes e após o teste são dados a seguir. Pode-se concluir que o uso da ração contribuiu para o aumento do peso médio dos animais?

\begin{table}[!h]

\caption{\label{tab:unnamed-chunk-152}Amostras dependentes - caso 2}
\centering
\begin{tabular}{l|r|r|r|r|r|r|r|r|r|r}
\hline
Cobaia & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10\\
\hline
Antes & 635 & 704 & 662 & 560 & 603 & 745 & 698 & 575 & 633 & 669\\
\hline
Depois & 640 & 712 & 681 & 558 & 610 & 740 & 707 & 585 & 635 & 682\\
\hline
\end{tabular}
\legend{Fonte: \url{www.inf.ufsc.br/~marcelo/testes2.html}.}
\end{table}


\textbf{\(H_0\)}: média antes \(=\) média depois

\textbf{\(H_1\)}: média antes \(\neq\) média depois

<<>>=
cobaiaantes=c(635,704,662,560,603,745,698,575,633,669)
cobaiadepois=c(640,712,681,558,610,740,707,585,635,682)
t.test(cobaiaantes, cobaiadepois, paired=TRUE)
@


Conclusão: Rejeita-se \(H_0\) com nível de significância de 5\% e conclui-se que a média antes da engorda é diferente da média depois da engorda.

\hypertarget{teste-de-hipoteses-duas-amostras-independentes}{%
\subsubsection{Teste de hipóteses duas amostras independentes}\label{teste-de-hipoteses-duas-amostras-independentes}}

Primeiramente é preciso saber se existe homogeneidade de variâncias populacionais, a qual poderá ser verificada por meio de um teste de homogeneidade de variâncias utilizando os dados das duas amostras.

\hypertarget{teste-para-verificar-homogeneidade-de-variancias}{%
\subsubsection{Teste para verificar homogeneidade de variâncias}\label{teste-para-verificar-homogeneidade-de-variancias}}

\textbf{Exemplo 12}: (adaptado de \url{https://www.ime.unicamp.br/~hildete/Aula_p12.pdf}) Dois tipos diferentes de tecido devem ser comparados. Uma máquina de testes pode comparar duas amostras ao mesmo tempo. O peso (em miligramas) para sete experimentos foram:

\begin{table}[!h]

\caption{\label{tab:unnamed-chunk-154}Comparação de dois tipos diferentes de tecidos}
\centering
\begin{tabular}{l|l|l|l|l|l|l|l}
\hline
Tecido A & 36 & 26 & 31 & 38 & 28 & 20 & 37\\
\hline
Tecido B & 39 & 27 & 35 & 42 & 31 & 39 & 22\\
\hline
\end{tabular}
\legend{Fonte: \url{https://www.ime.unicamp.br/~hildete/Aula_p12.pdf}.}
\end{table}

Teste se um tecido é mais pesado que o outro.

\textbf{\(H_0\)}: as variâncias são homogêneas

\textbf{\(H_1\)}: as variâncias são heterogêneas

<<>>=
tecidoa=c(36,26,31,38,28,20,37)
tecidob=c(39,27,35,42,31,39,22)
var.test(tecidoa, tecidob)
@


Conclusão: Não rejeita-se \(H_0\) e conclui-se que as variâncias são homogêneas.

Agora é possível realizar o teste de comparação de duas amostras independentes.

\textbf{\(H_0\)}: média tecido A \(=\) média tecido B

\textbf{\(H_1\)}: média tecido A \(\neq\) média tecido B

<<>>=
t.test(tecidoa, tecidob, var.equal = TRUE, paired=FALSE)
@


Conclusão: Não rejeita-se \(H_0\) e conclui-se que a média de peso do tecido A é igual à média de peso do tecido B.

\hypertarget{exercicios-2}{%
\section{Exercícios}\label{exercicios-2}}

\textbf{1.} A concentração de compostos químicos do solo foi medida em dez amostras aleatórias de um solo de uma área contaminada. A concentração medida, em mg/Kg, foi 1,4 0,6 1,2 1,6 0,5 0,7 0,3 0,8 0,2 e 0,9. Calcule o intervalo de 99\% para a média de concentração.

\textbf{2.} Uma pesquisa foi realizada para verificar a satisfação dos alunos de uma escola em relação aos serviços fornecidos pela cantina. Utilizando-se uma amostra aleatória de 25 alunos, as respostas fornecidas foram:

\begin{longtable}[]{@{}lllll@{}}
\toprule
\endhead
satisfeito & não satisfeito & satisfeito & satisfeito & satisfeito\tabularnewline
satisfeito & satisfeito & satisfeito & não satisfeito & satisfeito\tabularnewline
não satisfeito & não satisfeito & não satisfeito & satisfeito & satisfeito\tabularnewline
não satisfeito & satisfeito & satisfeito & não satisfeito & não satisfeito\tabularnewline
não satisfeito & não satisfeito & satisfeito & satisfeito & satisfeito\tabularnewline
\bottomrule
\end{longtable}

Construa o intervalo de confiança para a proporção populacional dos alunos satisfeitos considerando um nível de confiança de 90\%.

\textbf{3.} (MORETTIN; BUSSAB, \protect\hyperlink{ref-Morettin2009}{2009}) Uma companhia de cigarros anuncia que o índice médio de nicotina dos cigarros que fabrica apresenta-se abaixo de 23 mg por cigarro. Um laboratório realiza seis análises desse índice, obtendo: 27, 24, 21, 25, 26, 22. Pode-se aceitar a afirmação do fabricante?

\textbf{4.} (FONSECA; MARTINS, \protect\hyperlink{ref-Fonseca2010}{2010}) As estaturas de 20 recém-nascidos foram tomadas no Departamento de Pediatria da FNRP, cujos resultados em cm são: 41 50 52 49 49 54 50 47 52 49 50 52 50 47 49 51 46 50 49 50. Teste a hipótese de que a média desses recém nascidos é 50 cm.



\textbf{5.} A fim de determinar a eficiência de um medicamento antitérmico, a temperatura corporal (em graus Celsius) de 15 indivíduos foi medida. Em seguida, foi administrado o medicamento e após uma hora a temperatura foi medida novamente. Os resultados podem ser encontrados na tabela abaixo.

\begin{tabular}{r|r}
\hline
Antes & Depois\\
\hline
37,5 & 37,8\\
\hline
36,0 & 36,4\\
\hline
39,0 & 37,6\\
\hline
38,0 & 37,2\\
\hline
37,8 & 36,9\\
\hline
38,5 & 37,7\\
\hline
36,9 & 36,8\\
\hline
39,4 & 38,1\\
\hline
37,2 & 36,7\\
\hline
38,1 & 37,3\\
\hline
39,3 & 38,0\\
\hline
37,5 & 37,1\\
\hline
38,5 & 36,6\\
\hline
37,8 & 35,0\\
\hline
39,0 & 39,0\\
\hline
\end{tabular}

Houve ou não diminuição da temperatura dos indivíduos?

\textbf{7.}(\url{https://bit.ly/2JEyV0S }) Foi obtida uma amostra com 20 pilhas elétricas da marca A. Todas elas foram examinadas e sua duração, em horas, foi medida. O mesmo foi feito com uma amostra de 18 pilhas do mesmo tipo, porém da marca B.

% http://www.im.ufrj.br/probest/Exercicios/C9_Exercicios.pdf

Marca A: 176 162 153 137 140 139 165 128 149 148 159 134 173 171 142 142 173 155 157 139

Marca B: 183 196 157 180 188 172 159 184 152 180 169 163 191 151 172 192 121 146

Existe diferença entre as marcas de pilha quanto a sua duração?






% ------------------------------------------------------------
\hypertarget{qui}{%
\chapter{Teste de Qui-Quadrado}\label{qui}}
\chapterauthor{Iara Denise Endruweit Battisti}
% ------------------------------------------------------------
\begin{flushright} \vspace{-1cm}
\emph{Iara Denise Endruweit Battisti}
\end{flushright}
<<quiquad, child="quiquad11.Rnw">>=
@

% ------------------------------------------------------------
\hypertarget{reg}{%
\chapter{Modelos de Regressão Linear Simples} \label{reg}}
\chapterauthor{Iara Denise Endruweit Battisti, Erikson Kaszubowski, Felipe Micail da Silva Smolski}
% ------------------------------------------------------------
\begin{flushright} \vspace{-1cm}
\emph{Iara Denise Endruweit Battisti\\ Erikson Kaszubowski\\Felipe Micail da Silva Smolski}
\end{flushright}



Muitas vezes, há a necessidade de estudar duas ou mais variáveis ao mesmo tempo com o objetivo de predizer uma variável em função da(s) outra(s). Por exemplo, verificar se sólidos removidos de um material se relaciona com o tempo de secagem e qual é a forma dessa relação. Outros exemplos: relação entre tempo de estudo e desempenho a uma avaliação; relação entre investimento em comunicação e vendas; entre outros.

A análise de correlação permite quantificar a relação linear entre duas variáveis quantitativas. Os modelos de regressão permitem demonstrar a forma da relação entre duas ou mais variáveis. Neste capítulo, serão estudados os modelos de regressão linear simples na qual a variável resposta (\(Y\)) é quantitativa e a variável preditora (\(X_i\)) é quantitativa ou qualitativa.

\hypertarget{correlacao-linear}{%
\section{Correlação linear}\label{correlacao-linear}}

A correlação linear é a técnica mais simples para estudar a relação entre duas variáveis quantitativas. Os dados compõem uma única amostra de pares de valores (\(x_i, y_i\)), correspondendo aos valores das variáveis X e Y, respectivamente, mensurados em cada elemento de uma amostra ou uma população. Para analisar a existência de relação entre as duas variáveis de forma exploratória, primeiramente pode-se fazer o Diagrama de Dispersão.

\hypertarget{diagrama-de-dispersao}{%
\section{Diagrama de dispersão}\label{diagrama-de-dispersao}}

O diagrama de dispersão é um gráfico para verificar a existência de relação entre os pares de variáveis X e Y. É composto por pontos, os quais correspondem aos pares de valores (\(xi, y_i\)), sendo a variável X representada no eixo horizontal e a variável Y representada no eixo vertical.

O diagrama de dispersão fornece uma visualização gráfica do comportamento conjunto das duas variáveis em estudo. Na Figura \ref{fig:diag}a, percebe-se uma correlação (relação) linear positiva entre as variáveis X e Y, ou seja, os valores das duas variáveis crescem conjuntamente. Na Figura \ref{fig:diag}b, percebe-se uma correlação linear negativa entre as variáveis X e Y, neste caso, os valores de uma variável crescem enquanto os valores da outra variável decrescem. A Figura \ref{fig:diag}c informa a ausência de relação entre as duas variáveis e, a Figura \ref{fig:diag}d mostra uma correlação não linear, que não será abordada neste capítulo.

\begin{figure}[!h]
\caption{Diagramas de Dispersão}\label{fig:diag}
{\centering \includegraphics[width=0.7\linewidth]{correlacao1} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}



\textbf{Exemplo}: Suponha que 15 alunos foram selecionados aleatoriamente na turma de Estatística, sendo registrado o tempo de estudo e nota da atividade avaliativa. O objetivo da pesquisa é verificar se existe relação entre o tempo de estudo e a nota.

\begin{longtable}[]{@{}llllllllllllllll@{}} 
\caption{\label{tab:reg1}Relação entre o tempo (horas) de estudo e a nota.}\tabularnewline
\toprule 
\begin{minipage}[b]{0.1\columnwidth}\raggedright
\textbf{Tempo}\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
4,0\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
6,0\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
5,5\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
5,0\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
6,8\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
6,5\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
3,5\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
4,5\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
7,5\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
8,0\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
5,4\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
6,5\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
7,7\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
7,5\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
5,8\strut
\end{minipage}\tabularnewline
\midrule
\endfirsthead
\toprule
\begin{minipage}[b]{0.1\columnwidth}\raggedright
\textbf{Tempo}\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
4,0\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
6,0\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
5,5\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
5,0\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
6,8\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
6,5\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
3,5\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
4,5\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
7,5\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
8,0\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
5,4\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
6,5\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
7,7\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
7,5\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
5,8\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.1\columnwidth}\raggedright
\textbf{Nota}\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
5,5\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
7,5\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
8,0\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
7,0\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
8,1\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
8,6\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
4,7\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
7,5\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
9,5\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
9,5\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
7,8\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
8,0\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
9,1\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
9,5\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
8,0\strut
\end{minipage}\tabularnewline
\bottomrule
\caption*{Fonte: Dados simulados.}
\end{longtable}


Primeiramente, deve-se digitar os dados para cada variável diretamente na linha de comando ou em um arquivo de dados que será importado. No caso de linha de comando:

<<>>=
tempo=c(4,6,5.5,5,6.8,6.5,3.5,4.5,7,8,5.4,6.5,7.7,7.5,5.8)
nota=c(5.5,7.5,8,7,8.1,8.6,4.7,7.5,9.5,9.5,7.8,8,9.1,9.5,8)
@


Para elaborar o diagrama de dispersão o comando utilizado é o \texttt{plot} em que y corresponde ao vetor de dados da variável resposta e x corresponde ao vetor de dados da variável preditora.

\texttt{plot(variável\_preditora,\ variável\_resposta)}

Para o exemplo o comando é o seguinte:

\begin{figure}[!h]

\caption{Diagrama de dispersão da nota em relação ao tempo de estudo dos participantes do estudo}\label{fig:diadisp}

<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3.5, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
plot(tempo,nota)
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

Resultando no diagrama de dispersão apresentado na Figura \ref{fig:diadisp}.

\hypertarget{coeficiente-de-correlacao-linear-de-pearson}{%
\section{Coeficiente de Correlação Linear de Pearson}\label{coeficiente-de-correlacao-linear-de-pearson}}

O coeficiente de correlação linear de Pearson (Karl Pearson 1857-1936) mede o grau de relacionamento linear entre os valores pareados \(x_i\) e \(y_i\) em uma amostra. O coeficiente linear de Pearson é obtido da seguinte forma:

\begin{equation}
r = \frac{\sum_{i=1}^{n} (x_i - \overline{x})(y_i - \overline{y})}
{\sqrt{\sum_{i=1}^{n} (x_i - \overline{x})^2(y_i - \overline{y})^2}}
\end{equation}

em que:

\begin{itemize}
\tightlist
\item
  \(n\): número de pares na amostra;
\item
  \(x\): valores da variável x;
\item
  \(y\): valores da variável y;
\item
  \(\bar{x}\): média dos valores de x;
\item
  \(\bar{y}\): média dos valores de y;
\end{itemize}

O coeficiente de correlação linear (r) é uma estatística amostral, representando a magnitude da relação entre duas variáveis na amostra. O parâmetro populacional é representado por \(\rho\), que é calculado da mesma forma. O coeficiente de correlação linear assume valores entre -1 e +1, inclusive. Se o valor de r está próximo de 0, conclui-se que não há correlação linear entre as variáveis X e Y. Se o valor de r está próximo de -1 ou +1, conclui-se pela existência de correlação linear entre as variáveis X e Y, sendo que o sinal indica uma relação linear positiva (direta) ou negativa (inversa).

Sintaxe no software R:

\texttt{cor(variável\_preditora,\ variável\_resposta)}

Lembrando que os valores de x e y são numéricos. No caso do exemplo, segue o comando e a resposta.

<<>>=
cor(tempo,nota)
@


No resultado é apresentado o valor do coeficiente de correlação linear, que neste caso, está próximo de +1, expressando uma correlação forte e direta entre as duas variáveis em análise. 

Caso o usuário deseja testar a significância do coeficiente de correlação, isto é, se o resultado do coeficiente de correlação amostral pode ser inferido para a população, utiliza-se o comando:

\texttt{cor.test(variável\_preditora,\ variável\_resposta)}

Para o exemplo:

<<>>=
cor.test(tempo, nota)
@


Como o valor de \(p\) é menor que 0,01 então pode-se afirmar que existe correlação linear positiva significativa, isto é, o resultado pode ser projeto para a população de onde a amostra foi extraida.

Ainda, com o pacote \texttt{PerformanceAnalytics} (PETERSON; CARL, \protect\hyperlink{ref-PerformanceAnalytics}{2018}) é possível aprimorar a exibição dos resultados sobre o coeficiente de correlação com as variáveis observadas, que além do coeficientes de correlação, mostra a distribuição das variáveis e o gráfico de dispersão:



\begin{figure}[!h]
\caption{Coeficiente de correlação apresentado pelo pacote PerformanceAnalytics}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.1cm 0 0.1cm},clip'>>=
library("PerformanceAnalytics")
chart.Correlation(cbind(tempo,nota), histogram=TRUE)
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

\hypertarget{regressao-linear-simples}{%
\section{Regressão Linear Simples}\label{regressao-linear-simples}}

O estudo de regressão estabelece-se aos casos em que se pretende estabelecer uma relação entre uma variável Y considerada dependente (variável resposta ou desfecho) e uma ou mais variáveis \(X_1, X_2,\cdots, X_k\) (variáveis explicativas ou preditoras) consideradas independentes.

O objetivo da análise de regressão é ajustar uma equação que permita explicar o comportamento da variável resposta de maneira que o valor previsto possa estar próximo do que seria observado, dado um conjunto de valores observados para as variáveis preditoras. A forma do modelo de regressão depende da relação entre as variáveis, expressa visualmente pelo diagrama de dispersão, conforme exemplificado na Figura \ref{fig:diag}.

A análise de regressão é uma técnica muito utilizada em variáveis quantitativas, como por exemplo:

\begin{itemize}
\item
  vendas em função do investimento em comunicação;
\item
  altura de crianças em função da idade;
\item
  nota obtida em função de horas de estudo;
\item
  produtividade de uma cultura em relação a quantidade de adubação.
\end{itemize}

Na Figura \ref{fig:regress} é apresentada a variação explicada e não explicada na análise por modelo regressão.

\begin{figure}[!h]
\caption{Variação explicada e não explicada na análise de regressão}\label{fig:regress}
{\centering \includegraphics[width=0.7\linewidth]{regress1} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}



Observa-se na Figura \ref{fig:regress}, uma identidade na regressão, conforme a seguinte expressão:

\begin{equation}
\begin{matrix}
\sum (y_i-\overline{y}_i) ^{2} = \sum (\hat{y}_i-\overline{y}_i)^2 + \sum (y_i-\hat{y}_i)^2 \\


\end{matrix}
\end{equation}

\noindent
Soma de Quadrado Total = Soma de Quadrado de Regressão + Soma de Quadrado de Resíduo


Assim, a partir da expressão apresentada e buscando maximizar a variância explicada, o modelo de regressão mais adequado será aquele com maior proporção de ``Soma de Quadrado de Regressão'' em relação à ``Soma de Quadrado Total'', minimizando a ``Soma de Quadrado do Resíduo.''

\hypertarget{modelo-de-regressao-linear-simples}{%
\section{Modelo de Regressão Linear Simples}\label{modelo-de-regressao-linear-simples}}

O modelo de regressão linear simples é usado quando a resposta da variável dependente se expressa de forma linear (Figura \ref{fig:regress}) e neste caso com apenas uma variável explicativa, expresso da seguinte maneira (HOFFMANN; VIEIRA, \protect\hyperlink{ref-hoffmann1998}{1998}):

\begin{equation}
y_i=\beta_0+\beta_1x_i+\varepsilon _i
\end{equation}

Em que:

\(y_i\): valores da variável resposta (dependente, desfecho), \(i = 1,2,...,n\) observações;

\(x_i\): valores da variável explicativa (independente, preditora), \(i = 1,2,...,n\) observações;

\(\beta_0\): coeficiente linear (intercepto). Interpretado como o valor da variável dependente quando a variável independente é igual a 0;

\(\beta_1\): coeficiente angular (inclinação). Interpretado como acréscimo ou decréscimo na variável dependente para a variação de uma unidade na variável independente;

\(\varepsilon_i\): erros aleatórios costumeiramente assumidos como provenientes de uma população normal, com média 0 e variância constante \(\begin{bmatrix}\varepsilon_i \text{~} N(0, \sigma^2)\end{bmatrix}\).

\hypertarget{metodo-dos-minimos-quadrados}{%
\section{Método dos Mínimos Quadrados}\label{metodo-dos-minimos-quadrados}}

O método dos mínimos quadrados (MMQ) é utilizado para a obtenção dos coeficientes linear e angular. Consiste em minimizar a Soma de Quadrados de Resíduos, ou seja, minimizar:

\begin{equation}
\sum (y_i-\hat y_i)^2=\sum (y_i-b_0-b_1x_i^2)
\end{equation}

As expressões para os coeficientes, que minimizam a Soma de Quadrado dos Resíduos são obtidas pela derivada desta soma de quadrados em relação a \(b_0\) e em relação a \(b_1\) e podem ser descritas por (HOFFMANN; VIEIRA, \protect\hyperlink{ref-hoffmann1998}{1998}):

\begin{equation}
b_1=\frac{\sum xy-\frac{\sum x \sum y}{n}}{\sum x^2 - \frac{(\sum x)^2}{n}}
\end{equation}

em que:

\(n\): número de pares na amostra;

\(x\): valores da variável x;

\(y\): valores da variável y.

e

\begin{equation}
b_0=\bar{y}-b_1\bar{x}
\end{equation}

em que:

\(\bar{x}\): média dos valores de x;

\(\bar{y}\): média dos valores de y;

\(b_1\): valor calculado do coeficiente angular.

Obtendo-se a seguinte equação de regressão linear simples estimada:

\begin{equation}
\hat{y}=b_0-b_1{x}
\end{equation}

em que:

\(b_0\): coeficiente linear estimado;

\(b_1\): coeficiente angular estimado;

\(x\): valores da variável explicativa.

Esta equação refere-se a reta de regressão, sendo que se \(b_1\) é um valor positivo a reta é crescente, demonstrando uma relação positiva entre as variáveis; mas se \(b_1\) é um valor negativo, a reta é decrescente, demonstrando uma relação inversa entre as variáveis.

No software R utiliza-se o comando \texttt{lm} para executar a análise de regressão linear, em que y corresponde aos valores numéricos da variável resposta e x são valores numéricos da variável preditora. No caso do segundo comando, ``base'' corresponde ao nome da base de dados em que estão armazenadas as variáveis. Lembrando que ``regressao'' é o nome fornecido pelo usuário.

\texttt{nome\_para\_regressao=lm(variável\_dependente\textasciitilde{}}

\texttt{variável\_preditora)}

Por exemplo:

<<>>=
regressaolinear=lm(nota~tempo)
regressaolinear
@


No resultado observa-se o valor do coeficiente linear (intercept) igual a 2,2214 e o valor do coeficiente angular (tempo) igual a 0,947 interpretando que a cada aumento de uma unidade de
tempo (hora), a nota do aluno aumenta, em média, 0,947 pontos.

\hypertarget{analise-de-variancia}{%
\section{Análise de Variância}\label{analise-de-variancia}}

A Análise de Variância, técnica introduzida por Fisher, na década de 20, testa o ajuste da equação como um todo, ou seja, um teste para verificar se a equação de regressão obtida pode ser exclusivamente fruto do erro amostral em uma situação em que a variável preditiva não possui nenhuma relação linear com o desfecho. Isto é, testar a significância da equação ajustada.

As hipóteses testadas na Análise de Variância da Regressão são:

\begin{equation}
H_0:\beta_1=0 \textrm{ (a regressão não é significativa)} 
\end{equation}

\begin{equation}
H_1:\beta_1 \neq 0 \textrm{ (a regressão é significativa)}
\end{equation}

No caso de regressão linear simples, a análise de variância é definida como apresentada na
Tabela \ref{tab:varian}.

\begin{longtable}[]{@{}lllll@{}}
\caption{\label{tab:varian}Análise de variância para a regressão linear simples.}\tabularnewline
\toprule
\begin{minipage}[b]{0.14\columnwidth}\raggedright
\textbf{Fonte de Variação}\strut
\end{minipage} & \begin{minipage}[b]{0.15\columnwidth}\raggedright
\textbf{Grau de Liberdade}\strut
\end{minipage} & \begin{minipage}[b]{0.16\columnwidth}\raggedright
\textbf{Soma de Quadrados}\strut
\end{minipage} & \begin{minipage}[b]{0.17\columnwidth}\raggedright
\textbf{Quadrados Médios}\strut
\end{minipage} & \begin{minipage}[b]{0.13\columnwidth}\raggedright
\textbf{F calculado}\strut
\end{minipage}\tabularnewline
\midrule
\endfirsthead
\toprule
\begin{minipage}[b]{0.14\columnwidth}\raggedright
\textbf{FV}\strut
\end{minipage} & \begin{minipage}[b]{0.15\columnwidth}\raggedright
\textbf{GL}\strut
\end{minipage} & \begin{minipage}[b]{0.16\columnwidth}\raggedright
\textbf{SQ}\strut
\end{minipage} & \begin{minipage}[b]{0.17\columnwidth}\raggedright
\textbf{QM}\strut
\end{minipage} & \begin{minipage}[b]{0.13\columnwidth}\raggedright
\textbf{F}\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Regressão\strut
\end{minipage} & \begin{minipage}[t]{0.15\columnwidth}\raggedright
1\strut
\end{minipage} & \begin{minipage}[t]{0.16\columnwidth}\raggedright
SQRegressão\strut
\end{minipage} & \begin{minipage}[t]{0.17\columnwidth}\raggedright
QMRegressão\strut
\end{minipage} & \begin{minipage}[t]{0.13\columnwidth}\raggedright
Fc\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Desvios\strut
\end{minipage} & \begin{minipage}[t]{0.15\columnwidth}\raggedright
n-2\strut
\end{minipage} & \begin{minipage}[t]{0.16\columnwidth}\raggedright
SQResíduos\strut
\end{minipage} & \begin{minipage}[t]{0.17\columnwidth}\raggedright
QMResíduos\strut
\end{minipage} & \begin{minipage}[t]{0.13\columnwidth}\raggedright
-\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Total\strut
\end{minipage} & \begin{minipage}[t]{0.15\columnwidth}\raggedright
n-1\strut
\end{minipage} & \begin{minipage}[t]{0.16\columnwidth}\raggedright
SQTotal\strut
\end{minipage} & \begin{minipage}[t]{0.17\columnwidth}\raggedright
-\strut
\end{minipage} & \begin{minipage}[t]{0.13\columnwidth}\raggedright
-\strut
\end{minipage}\tabularnewline
\bottomrule
\caption*{Fonte: Elaborado pelo(s) autor(es).}
\end{longtable}

Em que:

\begin{equation}
SQ \textrm{Regressão} = \frac{(\sum xy - \frac{(\sum x \sum y)^2}{n})}{\sum x^2 - \frac{(\sum x)^2}{n}}
\end{equation}

\begin{equation}
SQ \textrm{Total} = \sum y^2 - \frac{(\sum y)^2}{n}
\end{equation}

SQResíduo = SQTotal - SQRegressão

QMRegressão = SQRegressão \(/\) GLRegressão

QMResíduo = SQResíduo \(/\) GLResíduo

Fc = QMRegressão \(/\) QMResíduo

Espera-se que o QMResíduo seja mínimo, assim o modelo de regressão estará
bem ajustado.

A distribuição de probabilidade para a razão de duas variâncias é conhecida como a distribuição F. Se a hipótese nula for rejeitada ao nível de signicância \(\alpha\) (rejeita-se \(H_0\)) e, portanto a regressão é significativa ao nível \(\alpha\) de significância.

No software R, utiliza-se a função \texttt{anova()} para obter a análise de variância informando o nome dado ao modelo de regressão previamente.

\texttt{anova(nome\_para\_regressão)}

Por exemplo:

<<>>=
anova(regressaolinear)
@


No resultado observam-se as fontes de variação: tempo (variável preditora) e residuals (resíduos); graus de liberdade (Df), soma de quadrado (Sum Sq), quadrado médio (Mean Sq), valor do F calculado (F value) e o valor \(p\) (Pr). Neste caso, como \(p<0,01\) rejeita-se \(H_0\) ao nível de 1\% de significância e, portanto a equação é significativa (\(p<0,01\)).

\hypertarget{coeficiente-de-determinacao}{%
\section{Coeficiente de Determinação}\label{coeficiente-de-determinacao}}

O coeficiente de determinação representa o percentual de variação total que é explicada pela equação de regressão, sendo obtido da seguinte forma:

\begin{equation}
R^2 = \frac{\textrm{SQRegressão}}{SQTotal}
\end{equation}

Quanto mais próximo de 1 (ou 100\%) for o R\(^2\), melhor será o ajuste da equação de regressão. Também, é possível utilizar o coeficiente de determinação ajustado (R\(^2\) ajustado), o qual considera o número de variáveis e o tamanho da amostra, sendo que este é o mais indicado para regressão múltipla.
No software R, o valor do coeficiente de determinação é obtido pelo comando \texttt{summary()}, informando o nome dado aomodelo de regressão previamente, conforme segue:

\texttt{summary(nome\_para\_regressao)}

Por exemplo:

<<>>=
summary(regressaolinear)
@


No resultado, observa-se o valor de coeficiente de determinação (multiple R-squared) igual a 0,85, indicando que 85\% da variação da nota (variável resposta) é devido a variação do tempo de estudo (variável preditora).

A reta de regressão pode ser visualizada no diagrama de dispersão com o comando \texttt{abline()}, como segue:

\texttt{abline(nome\_para\_regressao)}

Para o exemplo:


\begin{figure}[!h]

\caption{Reta de regressão ajustada da nota em relação ao tempo de estudo dos participantes da pesquisa}\label{fig:unnamed-chunk-187}

<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
plot(nota~tempo)
abline(regressaolinear)
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}



O intervalo de 95\% de confiança para os coeficientes de regressão são obtidos, no software R, pelo comando \texttt{confint()}, da seguinte forma:

\texttt{confint(nome\_para\_regressao)}

Para o exemplo:

<<>>=
confint(regressaolinear)
@


\hypertarget{intervalo-de-predicao}{%
\section{Intervalo de Predição}\label{intervalo-de-predicao}}

Após o ajuste da equação de regressão linear simples, verificada a significância da equação (p \(<\) 0,05). No caso da equação estimada se ajusta bem aos dados pelo valor do coeficiente de determinação então é possível predizer valores da variável Y (resposta) a partir de valores da variável X (explicativa). Caso a regressão não seja significativa a melhor predição para a variável Y é média dos valores de \(y\), ou seja, \(\hat{y}\).

A predição de valores só tem sentido nos seguintes casos:

\begin{itemize}
\tightlist
\item
  regressão significativa;
\item
  os valores de X devem estar dentro dos limites inferior e superior dos dados amostrais;
\item
  as inferências referem-se somente a população de onde a amostra aleatória foi extraída;
\item
  as suposições sobre os resíduos devem ser satisfeitas.
\end{itemize}

Quando tem-se uma equação estimada do tipo \(\hat{y} = b_0 + b_1x\), \(\hat{y}\) representa o valor predito da variável Y para um dado valor da variável X, ou seja, é uma predição pontual, porém esta não informa a sua precisão, a qual é contemplada no intervalo de predição. O intervalo de predição para um determinado Y é dado por:

\begin{equation}
\hat{y}\pm \varepsilon
\end{equation}

em que:

\begin{equation}
\varepsilon = t_{(n-2;\frac{a}{2})}.S_e. \sqrt{ 1+ \frac{1}{n} +  \frac{n(x_p-\bar{x})^2}{n(\sum x^2)-(\sum x)^2} }
\end{equation}

onde:

\(x_p\): o valor dado para x

\(S_e\): o erro padrão da estimativa, definido por:

\begin{equation}
S_e=\sqrt {\textrm{QMResíduo}}=\sqrt\frac{\sum(y-\hat{y})^2}{n-2}
\end{equation}

Assim, obtêm-se o intervalo de predição para um determinado Y, que também pode ser expresso da seguinte forma:

\begin{equation}
(\hat{y} - \varepsilon; \hat{y} + \varepsilon)
\end{equation}

A sintaxe do comando é:

\texttt{x0=data.frame(x=valor\_numérico)}

\texttt{predict(regressao,x0,interval="prediction")}

No comando apresentado o x0 recebe o valor de x e predict calcula o intervalo de predição para o valor de Y dado x0.

Para o exemplo:

<<>>=
x0=data.frame(tempo=5.5)
predict(regressaolinear, x0, interval="prediction")
@


\hypertarget{analise-dos-residuos}{%
\section{Análise dos Resíduos}\label{analise-dos-residuos}}

O resíduo da análise de regressão é a diferença do valor do Y observado e Y estimado referente a cada par de valores do conjunto de dados, isto é, \(E_i = Y_i-\hat{Y}_i\).

No software R, pode-se utilizar o comando ``residuals'', para visualizar os resíduos, lembrando que ``regressaolinear'' é o nome dado ao modelo executado, como segue:

\texttt{residuals(regressaolinear)}

A análise dos resíduos é importante para a validade dos intervalos de confiança e testes de hipóteses, uma vez que as suposições das observações de Y independentes e o erro adere a distribuição aproximadamente normal com média 0 e variância constante devem ser satisfeitas.

O método gráfico pode ser utilizado para testar estas suposições dispondo os valores da variável preditora no eixo x e os respectivos valores dos resíduos no eixo y. Ainda, pode-se dispor os valores ajustados no eixo x e os respectivos valores dos resíduos do eixo y.

Se o modelo ajustado for apropriado para os dados, os pontos devem estar
distribuídos de forma aleatória no gráfico dos resíduos, conforme Figura \ref{fig:residuos}a. Caso a suposição não seja satisfeita, métodos alternativos podem ser utilizados como: método dos mínimos quadrados ponderados para o caso de não homocedasticidade; o método dos mínimos quadrados generalizados para o caso de erros correlacionados; e, métodos não-paramétricos para o caso de não normalidade.

Além da análise gráfica, existem testes para avaliar a homocedasticidade como o Teste de Bartlett e para avaliar a normalidade aplicam-se os testes de Shapiro Wilks ou Kolmogorov-Smirnov.

\begin{figure}[!h]
\caption{Gráficos para análise de resíduos em regressão}\label{fig:residuos}
{\centering \includegraphics[width=0.7\linewidth]{residuos1} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}



A seguir é apresentado o comando do gráfico de resíduos apresentando os valores ajustados pela equação de regressão e os resuíduos:

\texttt{plot(fitted(nome\_para\_regressao),}

\texttt{\ residuals(nome\_para\_regressao),}

\texttt{xlab="Valores\ ajustados",\ ylab="Resíduos")}

\texttt{abline(h=0)}

Nesta sintaxe, o termo ``nome\_para\_regressao'' é o nome dado ao modelo de regressão, ``fitted'' define os valores ajustados no eixo horizontal, ``residuals'' define os resíduos no eixo vertical, ``xlab'' indica o rótulo do eixo horizontal e ``ylab'' indica o rótulo do eixo vertical. e ``abline(h=0)'' apresentauma linha constante em y = 0 para facilitar a visualização dos desvios dos resíduos.

Na Figura \ref{fig:residuos1} é apresentado o gráfico de resíduo do exemplo, no qual os resíduos são apresentados no eixo y e os valores ajustados são apresentados no eixo x. Lembrando que ``regressaolinear'' é o nome definido para a regressão do exemplo.


\begin{figure}[!h]

\caption{Gráfico dos resíduos em relação aos valores ajustados para os dados do exemplo}\label{fig:residuos1}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
plot(fitted(regressaolinear), residuals(regressaolinear),
xlab="Valores ajustados", ylab="Residuos")
abline(h=0)
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}



Outro gráfico de resíduos que é possível elaborar na análise de resíduos representa a variável preditora (X) no eixo X e o resíduos no eixo Y, com a seguinte sintaxe:

\texttt{plot(tempo,\ residuals(nome\_para\_regressao),}

\texttt{xlab="Variável\ Preditora",\ ylab="Resíduos")}

Para os dados do exemplo:

\begin{figure}[!h]
\caption{Gráfico gerado para análise dos resíduos com os valores da variável preditora}\label{fig:residuos2}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
plot(tempo, residuals(regressaolinear), 
     xlab = "Tempo",
     ylab="Residuos")
abline(h=0)
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}



O resultado desse comando é apresentado na Figura \ref{fig:residuos2} em que no eixo y constam os valores dos resíduos e no eixo x constam os valores da variável independente.

Considerando os dados do exemplo, suponha que um aluno estudou 6,5 horas (x=6,5), então o valor ajustado da nota (y) é dado por 2,2214+0,9474*6,5, resultando em 8,38. Para esse caso, o resíduo é:

Yobservado -- Yestimado = 8 -- 8,38 = - 0,38

Para exibir os resíduos e os valores ajustados da equação de regressão utilizam-se os seguintes comandos, respectivamente:

\texttt{residuals(regressaolinear)}

\texttt{fitted(regressaolinear)}

Para testar a suposição que os erros aleatórios têm distribuição normal, pode-se elaborar o gráfico de probabilidade normal, conforme segue:

\texttt{qqnorm(residuals(nome\_para\_regressao))}

Para o exemplo, o comando é o seguinte:


\begin{figure}[!h]
\caption{Gráfico de probabilidade normal para verificar normalidade dos resíduos}\label{fig:qqnorm}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
qqnorm(residuals(regressaolinear))
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}


E o resultado é apresentado na Figura \ref{fig:qqnorm}.

Ainda, pode-se construir o gráfico com a distribuição da probabilidade dos resíduos, através de um histograma, verificando assim se a cauda é simétrica ou não:

\begin{figure}[!h]
\caption{Histograma de distribuição da probabilidade para os resíduos}\label{fig:histresid}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
hist(x = regressaolinear$residuals,
      xlab = "Resíduos",
      ylab = "Densidade",
      main = "",
      col = "lightgreen",
      probability = TRUE)
lines(density(regressaolinear$residuals))
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

O resultado desse comando é apresentado na Figura \ref{fig:histresid}.

Também, pode-se aplicar o teste de normalidade de Shapiro-Wilk para verificar a normalidade dos resíduos. O comando utilizado é o seguinte:

\texttt{shapiro.test(residuals(nome\_para\_regressao))}

Para o exemplo:

<<>>=
shapiro.test(residuals(regressaolinear))
@


Conclui-se que os resíduos são normais se o valor de \(p \geq\) 0,05.

\hypertarget{valores-outliers-na-regressao}{%
\subsection{Valores outliers na regressão}\label{valores-outliers-na-regressao}}

Para análise dos valores outliers nos resíduos (\emph{residuals standard} e \emph{residuals studentized}), utilizam-se os seguintes comandos:

\texttt{rstudent(nome\_para\_regressao)}

\texttt{rstandard(nome\_para\_regressao)}

Para o exemplo:

<<>>=
rstudent(regressaolinear)
rstandard(regressaolinear)
@


E o gráfico para verificar valores outliers nos resíduos:

\texttt{plot(rstudent(nome\_para\_regressao))}

\texttt{plot(rstandard(nome\_para\_regressao))}

Os gráficos dos resíduos padronizados (standard) e studentizados (student) para o exemplo estão apresentados nas Figuras \ref{fig:residpad} e \ref{fig:residst}, respectivamente, utilizando os comandos que segue:

\begin{figure}[!h]
\caption{Resíduos padronizados para o exemplo}\label{fig:residpad}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
plot(rstandard(regressaolinear))
abline(h=2,col="red")
abline(h=-2,col="red")
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}



Aqueles valores fora do intervalo (-2, +2) são possíveis outliers.

\begin{figure}[!h]
\caption{Resíduos studentizados para o exemplo}\label{fig:residst}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
plot(rstudent(regressaolinear)) 
abline(h=2,col="red")
abline(h=-2,col="red")
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}



\hypertarget{valores-influentes-na-regressao}{%
\subsection{Valores influentes na regressão}\label{valores-influentes-na-regressao}}

Para análise dos valores influentes, utiliza-se:

\texttt{dffits(nome\_para\_regressao)}

Para os dados do exemplo:
<<>>=
dffits(regressaolinear)
@


Aqueles valores maiores que \(2*(p/n)^{(1/2)}\) são possíveis pontos influentes. Em que, p = número de parâmetros do modelo e n = tamanho da amostra.

Para esse exemplo:

<<>>=
2*(2/15)^(1/2)
@


O gráfico para detectar pontos influentes para os dados do exemplo:

\begin{figure}[!h]
\caption{Pontos influentes para o exemplo}\label{fig:ptoinf}
<<echo=TRUE, message=FALSE, fig.align='center', fig.height=3, out.extra='trim={0 0.5cm 0 2cm},clip'>>=
plot(dffits(regressaolinear))
abline(h=-0.73,col="red")
abline(h=0.73,col="red")
@
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}



O comando \texttt{plot(nome\_para\_regressao)} elabora diferentes gráficos para o diagnóstico do modelo.

\hypertarget{exercicios-4}{%
\section{Exercícios}\label{exercicios-4}}

\textbf{1.} No site do livro (\url{https://smolski.github.io/softwarelivrer/livro.html}) está disponível uma planilha de dados com o nome ``peixes1'', na primeira coluna consta a quantidade de ovos (m\(^3\)) e na segunda coluna consta a quantidade de oxigênio no rio. O objetivo da pesquisa é comparar alguns ambientes do rio sobre a desova e o crescimento das larvas de peixes. Analisar a relação da quantidade de ovos com a quantidade de oxigênio no rio. Para isso utilize coeficiente de correlação linear e regressão linear simples.

\textbf{2.} Baixe no site \url{https://www.openintro.org/stat/data/?data=gun_violence_us} a base de dados gun\_violence\_us.csv (GUN VIOLENCE IN THE UNITED STATES), apresentando o relacionamento entre propriedade de armas e violência nos Estados Unidos. A variável dependente é a taxa de propriedade de armas (ownership\_rate: percentual de adultosem cada estado que é proprietário de uma arma em 2013) e a variável independente é a taxa de mortalidade (mortality\_rate: número de mortes por 100.000 em cada estado em 2014).

\textbf{2.1} Faça um diagrama de dispersão para visualizar a relação da taxa e ano. O que você pode concluir?

\textbf{2.2} Calcule o coeficiente de correlação linear. Conclua sobre ele.

\textbf{2.3} Encontre e interprete a equação ajustada.

\textbf{2.4} Apresente e interprete o coeficiente de determinação (R\(^2\)).

\textbf{2.5} Teste a significância da equação de regressão através da ANOVA.

\textbf{2.6} Faça o intervalo de predição para x=0.50.

\textbf{2.7} Trace a reta de regressão ajustada no diagrama de dispersão.

\textbf{2.8} Faça análise de resíduos.















\hypertarget{rmark}{%
\chapter{RMarkdown}\label{rmark}}
\chapterauthor{Felipe Micail da Silva Smolski}
% ------------------------------------------------------------
\begin{flushright} \vspace{-1cm}
\emph{Felipe Micail da Silva Smolski}
\end{flushright}


\textbf{Markdown} é uma linguagem de marcação de textos utilizada para a criação de diversos documentos, incluindo artigos, livros e apresentações. A grande inovação do \textbf{RMarkdown} no RStudio neste sentido é a utilização desta linguagem por meio do pacote \texttt{rmarkdown} (arquivos .Rmd) para integrar a criação de documentos com a análise e manipulação de dados em um único documento (Figura \ref{fig:rmark}). Desta forma, é possível efetuar pesquisas científicas que podem ser reproduzidas de forma muito mais fácil.

\begin{figure}[!h]
\caption{Processo de criação de documentos no RMarkdown}\label{fig:rmark}

{\center \includegraphics[width=0.7\linewidth]{rmarkdown}

}

\legend{Fonte: Adaptado de Allaire \emph{et al.} (\protect\hyperlink{ref-R-rmarkdown}{2017}).}
\end{figure}



Para criação dos documentos é preciso a instalação dos pacotes denominados \texttt{rmarkdown} (ALLAIRE \emph{et al.}, \protect\hyperlink{ref-R-rmarkdown}{2017}) e \texttt{knitr} (XIE, \protect\hyperlink{ref-knitr2018}{2018}) dentro do RStudio, bem como sugere-se a instalação, no Windows, do programa MiKTeX (\url{https://miktex.org/download}), que se encarrega de suporte à configurações da linguagem de marcação de textos \LaTeX, no caso de criação dos arquivos PDF.

\hypertarget{criando-o-documento}{%
\section{Criando o documento}\label{criando-o-documento}}

Para criação do documento RMarkdown, no RStudio clique em ``File \(>\) New File \(>\) R Markdown'', ou mesmo através do atalho para criação de documentos conforme mostra a Figura \ref{fig:criararq1}. Haverá a escolha entre a criação de documentos (HTML, PDF e Word/Libre/Open Office), a criação de uma apresentação (\emph{Presentation}), a criação de um documento Shiny (documento dinâmico para criação de \emph{dashboards}) e o carregamento de um modelo de documento pré-estabelecido (\emph{From Template}).

Neste exemplo será criado um documento em Word, onde são preenchidos os campos com o título do documento, o nome do autor e escolha o tipo de documento.

\begin{figure}[!h]
\caption{Criar documento RMarkdown}\label{fig:criararq1}
{\centering \includegraphics[width=0.7\linewidth]{criararq1} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



\hypertarget{compilando-os-resultados-do-arquivo}{%
\section{Compilando os resultados do arquivo}\label{compilando-os-resultados-do-arquivo}}

O \textbf{RMarkdown} cria um documento incial padrão, contendo alguns exemplos básicos de inserção de textos e de formatação, que serão vistos adiante. Para compilação do documento para o formato desejado (neste caso Word), o usuário deve clicar na aba ``Knit \(>\) Knit to Word'', ou pelo atalho no teclado CTRL+SHIFT+K.

\begin{figure}[!h]
\caption{Compilando o documento RMarkdown}\label{fig:compil}
{\centering \includegraphics[width=0.7\linewidth]{compilar} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



Caso ocorram erros com relação à codificação do documento, no que diz respeito aos caracteres de acentuação da língua portuguesa, este pode ser resolvido salvando o documento criado com a codificação UTF-8. Para isto, clique em ``File \(>\) Save with Encoding \(>\) UTF-8''. Deve ser feito este procedimento para cada tipo de arquivo: Word, HTML e PDF.

\begin{figure}[!h]
\caption{Erro de codificação do documento RMarkdown}\label{fig:errocodif}
{\centering \includegraphics[width=0.7\linewidth]{errocodif} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



\hypertarget{elementos-basicos-do-rmarkdown}{%
\section{Elementos básicos do RMarkdown}\label{elementos-basicos-do-rmarkdown}}

A configuração básica de um arquivo RMarkdown divide-se entre a YAML Header e o corpo do documento. A YAML (Yet Another Markup Language) Header, ou metadados, é um cabeçalho onde são inseridas as informações sobre o arquivo e das opções de compilação. Sempre devem iniciar o documento, sendo inseridas dentro de dois campos de sinais \(---\).

Já abaixo do YAML, situa-se o local onde o pesquisador digitará o texto, bem como integrará a inserção de códigos do R e também efetuará as análises posteriores (análises descritivas, regressões, tabelas, fórmulas, etc.). Por sua vez, os códigos do R (para manipulação de dados, como visto até o capítulo anterior deste livro) são ``embutidos'' no texto por meio das \textbf{Code Chunks}. Já o texto é inserido normalmente em forma de parágrafos (``fora'' dos Chunks), sendo que o novo parágrafo é iniciado após pressionar a tecla ``Enter'' entre os textos informados.

\begin{figure}[!h]
\caption{Tela inicial do arquivo RMarkdown}\label{fig:rmark2}
{\centering \includegraphics[width=0.7\linewidth]{rmark2} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



Desta forma, ao efetuar a compilação do documento, o RStudio ``lê'' todas as informações inseridas no arquivo e cria como resultado um arquivo escolhido com todas as análises feitas pelo usuário.

No exemplo acima (Figura \ref{fig:rmark2}), a compilação irá gerar um arquivo em Word, de acordo com o \texttt{output} escolhido, no caso \texttt{word\_document}. Se o usuário desejar gerar como arquivo de texto final um documento que pode ser aberto inclusive em software livre, pode utilizar o formato OpenDocument (.otd). Para isto, basta substituir o \texttt{output} para \texttt{odt\_document}.

\hypertarget{elementos-basicos-de-formatacao}{%
\section{Elementos básicos de formatação}\label{elementos-basicos-de-formatacao}}

Dentro do documento \textbf{RMarkdown}, depois dos metadados, começa o espaço destinado ao texto do documento. Nesta etapa seguem algumas condições para a formatação do texto, bem como da configuração dos títulos e fórmulas matemáticas. A linguagem \emph{markdown} preza pela simplicidade na formatação do texto, a qual posteriormente pode ser exportada para diversos tipos de documentos de uma só vez. Desta forma, como visto anteriormente, cria documentos totalmente dinâmicos entre si.



A acentuação das palavras, dentro do texto, é feita normalmente pelo teclado do usuário. Os caracteres \texttt{*\#/(){[}{]}\textless{}\textgreater{}} podem ser escritos normalmente dentro do texto, no entanto os demais (exemplo do cifrão \texttt{\$}) devem ser escritos precedidos de uma barra: \texttt{\textbackslash{}\$}. Por outro lado, a formatação em itálico, negrito, subscrito, sobrescrito, links e demais formatações são feitas no documento (Figura \ref{fig:rmarkform}).

\begin{figure}[!h]
\caption{Formatação no RMarkdown}\label{fig:rmarkform}
{\centering \includegraphics[width=0.7\linewidth]{rmarkform} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}

Os níveis de títulos dos documentos RMarkdown são definidos pelo símbolo \texttt{\#}:

\begin{figure}[!h]
\caption{Títulos no RMarkdown}\label{fig:rmarktit}
{\centering \includegraphics[width=0.7\linewidth]{rmarktit} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}

Como visto, é possível escrever as fórmulas em notação matemática, o que facilita e muito a vida do pesquisador. No ambiente matemático do \textbf{RMarkdown}, elas são escritas por meio da linguagem de marcação de textos \LaTeX. Existem muitos manuais sobre esta linguagem, e para facilitar a escrita, sites como \url{https://www.codecogs.com/latex/eqneditor.php?lang=pt-br} ajudam o pesquisador nesta empreitada.

É possível efetuar a inserção de links nos documentos, para páginas externas ou mesmo internas ao documento (Figura \ref{fig:rmarklinks}).

\begin{figure}[!h]
\caption{Links no RMarkdown}\label{fig:rmarklinks}
{\centering \includegraphics[width=0.7\linewidth]{rmarklinks} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



A inserção de imagens externas no documento, em diversos formatos (aqui no exemplo .png) é feita a partir do direcionamento do nome da imagem salva na mesma pasta do arquivo .Rmd criado, ou mesmo pelo link na internet (Figura \ref{fig:rmarkimg}).

\begin{figure}[!h]
\caption{Imagens no RMarkdown}\label{fig:rmarkimg}
{\centering \includegraphics[width=0.7\linewidth]{rmarkimg} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



A Figura \ref{fig:rmarklist} demonstra algumas formas de criar listas e itens no decorrer do corpo de texto no \textbf{RMarkdown}.

\begin{figure}[!h]
\caption{Listas no RMarkdown}\label{fig:rmarklist}
{\centering \includegraphics[width=0.7\linewidth]{rmarklist} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



A criação de tabelas simples segue a disposição dos elementos pré-definidos, sendo que o alinhamento da coluna se dá pelo caractere ``\texttt{:}'' (dois pontos) conforme a Figura \ref{fig:rmarktab}:

\begin{figure}[!h]
\caption{Tabelas simples no RMarkdown}\label{fig:rmarktab}
{\centering \includegraphics[width=0.7\linewidth]{rmarktab} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



As notas de rodapé são inseridas no texto dentro das chaves precedidas do acento circunflexo \texttt{\^{}{[}\ {]}}. O pesquisador adiciona-os durante o texto, e o programa enumera automaticamente no documento final em Word (Figura \ref{fig:rmarkrodape}).

\begin{figure}[!h]
\caption{Notas de rodapé no RMarkdown}\label{fig:rmarkrodape}
{\centering \includegraphics[width=0.7\linewidth]{rmarkrodape} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



\hypertarget{elementos-basicos-do-yaml}{%
\section{Elementos básicos do YAML}\label{elementos-basicos-do-yaml}}

O YAML, ou os metadados do documento, são informações básicas do documento que podem ser alteradas (Figura \ref{fig:rmarkautor}). Dentre elas \emph{title} define o título do documento; em \emph{author} é inserido o autor ou autores e as informações do currículo do pesquisador são inseridas via nota de rodapé dentro do símbolo \texttt{\^{}{[}\ \ {]}}; o campo \emph{date} é opcional.

\begin{figure}[!h]
\caption{Configuração do YAML}\label{fig:rmarkautor}
{\centering \includegraphics[width=0.7\linewidth]{rmarkautor} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



Já o campo \emph{output} define a opção de salvamento do arquivo final. Pode ser informado todos os tipos de arquivos previamente, sendo que no momento da compilação será utilizado o primeiro tipo de arquivo, no exemplo, em Word. Para salvar em PDF, é só colocar o campo \texttt{pdf\_document} em primeiro lugar juntamente com a configuração dentro deste tipo de arquivo.

Abaixo do tipo de arquivo a ser salvo, constam as opções de salvamento. No caso do exemplo, abaixo de Word está constando a opção \texttt{fig\_caption}, que dita se as figuras do documento em Word serão inseridas com títulos.

Os campos \texttt{fig\_height} e \texttt{fig\_width} determinam a altura e largura padrão de todas as imagens do documento Word. Abaixo seguem algumas opções do YAML relacionando-se com a saída do documento em Word:

\begin{itemize}
\item
  \textbf{fig\_caption} - As figuras devem ter título?
\item
  \textbf{fig\_height}, \textbf{fig\_width} - Altura e largura padrão das imagens.
\item
  \textbf{highlight} - Estilo de saída pré-definido, inclui ``default'', ``tango'', ``pygments'', ``kate'', ``monochrome'', ``espresso'', ``zenburn'', e ``haddock''.
\item
  \textbf{keep\_md} - Salva uma cópia em arquivo .md juntamente com os outros arquivos.
\item
  \textbf{md\_extensions} - Extensões Markdown a serem incluídas como definições padrão no RMarkdown.
\item
  \textbf{pandoc\_args} - Argumentos adicionais para utilizar com o pandoc.
\item
  \textbf{reference\_docx} - Arquivo docx com as configurações de estilos de texto padrão. Deve ser salvo na mesma pasta do documento .rmd criado.
\item
  \textbf{toc} - Adiciona o sumário no início do texto.
\item
  \textbf{toc\_depth} - Determina o menor nível de títulos que será exibido no sumário. Exemplo, 1 mostra somente o primeiro nível.
\end{itemize}

Também é possível incluir um campo \texttt{abstract} para o resumo, no caso de artigo e suas respectivas palavras-chave:

\begin{figure}[!h]
\caption{Abstract no YAML}\label{fig:abstract}
{\centering \includegraphics[width=0.7\linewidth]{abstract} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



\hypertarget{elementos-basicos-dos-chunks}{%
\section{Elementos básicos dos Chunks}\label{elementos-basicos-dos-chunks}}

Os \textbf{Code Chunks}, como já visto, são espaços destinados à inclusão de códigos diretamente do RStudio, como se a informação fosse inserida em seu Console. Desta forma, por exemplo, ao efetuar uma operação matemática ou ao ser carregada uma base de dados para ser trabalhada, as rotinas serão efetuadas no momento em que for compilado o arquivo .Rmd trabalhado.

A criação das Chunks é feita manualmente no corpo do documento .Rmd pela inclusão do código demonstrado abaixo, ou via plataforma RStudio, no menu ``Insert \(>\) Insert a new R chunk'', conforme demonstra a Figura \ref{fig:rmarkchunk1}:

\begin{figure}[!h]
\caption{Criação de Chunks}\label{fig:rmarkchunk1}
{\centering \includegraphics[width=0.7\linewidth]{rmarkchunk1} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



Nota-se que o corpo do documento .Rmd ficou de outra cor, indicando que está inserida uma Chunk naquele local. Dentro das chaves, a Chunk divide-se entre uma identificação/nome para aquele campo (é opcional, no entanto se constar não pode ser repetido no documento) e; as opções da Chunk.

No exemplo abaixo, o nome da Chunk criada foi ``r nomedochunk''. E no campo das opções, constaram \texttt{echo=FALSE}, \texttt{fig.height=10} e \texttt{fig.width=5}. Lembrando que estes campos determinam as opções somente para este chunk.

A primeira opção, \texttt{echo=FALSE}, informa que no arquivo compilado, somente será mostrado o resultado da rotina inserida na Chunk (1+1), portanto será mostrado somente o valor 2. Caso o usuário almejasse inserir, no arquivo final, o código do R escrito (1+1) juntamente com o resultado da operação, marcaria \texttt{echo=TRUE}.

\begin{figure}[!h]
\caption{Criação de Chunks (2)}\label{fig:rmarkchunk2}
{\centering \includegraphics[width=0.7\linewidth]{rmarkchunk2} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



As opções \texttt{fig.height} e \texttt{fig.width} referem-se à altura e largura caso o resultado final da Chunk fosse uma figura ou gráfico derivado de dados inseridos na mesma. Vale lembrar que somente seriam determinadas as medidas para esta Chunk.

Para padronizar todas as Chunks para que tenham as mesmas opções, uma maneira utilizada usualmente é a inserção de uma \texttt{Chunk\ global}. Ela é incluída no início do texto, sendo que a sua inclusão é facultativa. No entanto, contribui para padronizar o texto, ao mesmo tempo que se existir uma Chunk durante o texto que deva ser configurada de forma diferente (por exemplo, o tamanho da imagem), pode ser efetuado em cada Chunk individual.

\begin{figure}[!h]
\caption{Chunk global}\label{fig:rmarkchunkopt}
{\centering \includegraphics[width=0.7\linewidth]{rmarkchunkopt} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



Seguem algumas importantes opções das Chunks dos arquivos RMarkdown (ALLAIRE \emph{et al.}, \protect\hyperlink{ref-R-rmarkdown}{2017}):

\begin{itemize}
\tightlist
\item
  \textbf{echo} - O código da Chunk deve ser incluído no resultado final? Padrão = FALSE.
\item
  \textbf{error} - Mostra mensagens de erro no documento (TRUE) ou para quando os erros ocorrem.
\item
  \textbf{fig.align} - Alinhamento da figura: ``left'', ``right'' ou ``center'' (padrão = ``default'').
\item
  \textbf{fig.height, fig.width} - Tamanho das figuras em polegadas.
\item
  \textbf{include} - Para incluir a Chunk depois de compilar (padrão = TRUE).
\item
  \textbf{message} - Mostra as mensagens por ventura existentes no documento (padrão = TRUE).
\item
  \textbf{results} - (default=``markup'') ``asis'' - processa os resultados na saída do documento; ``hide'' - não mostra os resultados; ``hold'' - coloca os resultados abaixo do código.
\item
  \textbf{warning} - Mostra avisos de advertência no documento (padrão = TRUE).
\end{itemize}

Como mencionado no início deste capítulo, a grande vantagem do \textbf{RMarkdown} é a sua versatilidade na criação de documentos concatenados com as análises estatísticas no RStudio. Desta forma, dentro das Ckunks, podem ser criadas bases de dados, bem como importados de sites ou mesmo carregados de arquivos trabalhados previamente no RStudio.

No exemplo abaixo, foi criado um \emph{data frame} nomeado ``amost'' diretamente no console dentro da Chunk. Em um segundo momento, para utilizar um determinado pacote instalado no RStudio, se insere, dentro da Chunk, o comando \texttt{require()} juntamente com o pacote necessário. Podem ser inseridos tantos pacotes quanto forem utilizados no documento, conforme a Figura \ref{fig:rmarkchunk3}.

\begin{figure}[!h]
\caption{Exemplo de criação de Chunk e carregamento de pacote}\label{fig:rmarkchunk3}
{\centering \includegraphics[width=0.7\linewidth]{rmarkchunk3} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



\hypertarget{inserindo-tabelas-com-as-chunks}{%
\subsection{Inserindo tabelas com as Chunks}\label{inserindo-tabelas-com-as-chunks}}

Como visto, algumas ações extremamente úteis podem ser efetuadas por meio das Chunks. Dentre elas, inclui-se a plotagem de tabelas no texto final, derivadas de objetos criados pelo pesquisador no RStudio. Os exemplos trazidos abaixo incluem a utilização dos pacotes \texttt{kable}, \texttt{xtable} e \texttt{flextable} para a criação das tabelas.

\begin{figure}[!h]
\caption{Exemplo de criação de tabelas com os pacotes kable, xtable e flextable}\label{fig:rmarkchunk31}
{\centering \includegraphics[width=0.7\linewidth]{rmarkchunktab1} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



Além disso, o pacote \texttt{stargazer} é extremamente útil para geração de tabelas com resultados de regressões com a saída dos documentos em PDF.

\begin{figure}[!h]
\caption{Exemplo de criação de tabelas com stargazer}\label{fig:rmarkchunk33}
{\centering \includegraphics[width=0.7\linewidth]{rmarkchunktab2} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



Existem diversos pacotes dentro do RStudio com a função de gerarem tabelas a partir dos dados analisados (neste caso sendo gerados dentro de chunks). Por sua vez, abaixo segue um resumo testado por este autor, em que os pacotes criam corretamente as tabelas no RMarkdown para cada saída de arquivo (HMTL, PDF, Word). Por exemplo, o pacote \texttt{knitr} (com a função \texttt{kable}) consegue gerar as tabelas para as três saídas de arquivos; já o pacote \texttt{xtable} não está configurado para criar a referida tabela com a saída do documento em Word.

\begin{longtable}[]{@{}lccc@{}}
\caption{\label{tab:tabelasrmk}Pacotes para elaboração de tabelas no RMarkdown}\tabularnewline
\toprule
Pacote & \textbf{HTML} & \textbf{PDF} & \textbf{Word}\tabularnewline
\midrule
\endfirsthead
\toprule
Pacote & \textbf{HTML} & \textbf{PDF} & \textbf{Word}\tabularnewline
\midrule
\endhead
knitr(função \texttt{kable})\footnote{Mais informações em \url{https://www.rdocumentation.org/packages/knitr/versions/1.21/topics/kable}. } & ok & ok & ok\tabularnewline
pander\footnote{Daróczi, Tsegelskyi, (\protect\hyperlink{ref-pander2018}{2018}).} & ok & ok & ok\tabularnewline
stargazer\footnote{Hlavac, (\protect\hyperlink{ref-stargazer2018}{2018}).} & ok & ok & -\tabularnewline
xtable\footnote{Dahl, \emph{et al.} (\protect\hyperlink{ref-xtable2018}{2018}).} & ok & ok & -\tabularnewline
\bottomrule
\caption*{Fonte: Elaborado pelo(s) autor(es).}
\end{longtable}



Outra forma de passar as tabelas para o Word é criando-a no formato HTML e copiando para o arquivo em Word (veja em \url{https://cran.r-project.org/web/packages/kableExtra/vignettes/kableExtra_and_word.html}.).

\hypertarget{inserindo-imagens-com-as-chunks}{%
\subsection{Inserindo imagens com as Chunks}\label{inserindo-imagens-com-as-chunks}}

Da mesma forma que as tabelas, as imagens também podem ser inseridas com o auxílio de Chunks. Lembrando que a imagem deve estar na mesma pasta do arquivo ou na pasta indicada:

\begin{figure}[!h]
\caption{Exemplo de inserção de imagens pelos Chunks}\label{fig:rmarkchunk333}
{\centering \includegraphics[width=0.7\linewidth]{rmarkchunkimg} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



\hypertarget{criacao-de-modelos-para-formatacao-vinculada}{%
\section{Criação de modelos para formatação vinculada}\label{criacao-de-modelos-para-formatacao-vinculada}}

Para os pesquisadores que trabalham intensamente com o Word ou Libre/Open Office, a formatação dos resultados decorrentes das análises compiladas no RMarkdown podem ser incrementadas. Isto porque existe um recurso de criação de modelos vinculados aos editores de texto, estes que serão responsáveis pela definição da formatação de todos os itens (títulos, subtítulos, parágrafos, fontes, etc.), como será visto a seguir.

\hypertarget{primeiro-passo-criacao-de-um-documento-modelo}{%
\subsection{Primeiro passo: criação de um documento modelo}\label{primeiro-passo-criacao-de-um-documento-modelo}}

Primeiramente deve-se criar um documento mínimo padrão que será utilizado como modelo. Crie um novo documento (Rmd), aqui será denominado de ``modelo'' (o usuário pode escolher o nome), que será salvo em .Rmd e gerado o respectivo arquivo Word (ou no formato .odt), na mesma pasta que o pesquisador salvar arquivos a serem formatados.

Como já visto, para criação de documentos .Rmd clique em ``File \(>\) New File \(>\) R Markdown''. Escolha o nome e salve na pasta escolhida. Gere o documento em Word (.docx) ou em outro arquivo de texto (exemplo .odt) em ``File \(>\) Knit Document''.

\hypertarget{segundo-passo-formatacao-do-modelo}{%
\subsection{Segundo passo: formatação do modelo}\label{segundo-passo-formatacao-do-modelo}}

Abra o arquivo em Word (denominado ``modelo.docx''). Atente para a caixa de seleção de estilos do Word, que será trabalhado nesta etapa (Figura \ref{fig:rmarkestilos}).

\begin{figure}[!h]
\caption{Caixa estilos no Word}\label{fig:rmarkestilos}
{\centering \includegraphics[width=0.7\linewidth]{rmarkestilos} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



Note que para o resultado desta compilação, o menu estilos traz várias formatações das diferentes partes do texto, entre elas ``Abstract'', ``Author'', ``Normal'', ``Titulo'', ``Titulo 1'', etc. Estes estilos serão alterados pelo usuário, para adequar às necessidades do pesquisador na criação do documento padrão. Clique com o botão direito nos estilos e em ``Modificar'' para definir a formatação padrão para cada parte do texto.

\begin{figure}[!h]
\caption{Modificação de estilos no Word}\label{fig:rmarkestilos1}
{\centering \includegraphics[width=0.7\linewidth]{rmarkestilos1} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



\hypertarget{terceiro-passo-vinculacao-do-modelo-ao-arquivo-em-rmarkdown}{%
\subsection{Terceiro passo: vinculação do modelo ao arquivo em RMarkdown}\label{terceiro-passo-vinculacao-do-modelo-ao-arquivo-em-rmarkdown}}

Após determinar as alterações em todos os campos de estilos do documento modelo no Word, o pesquisador deve vincular este modelo ao documento .Rmd principal. Além de deixar salvo o modelo em Word na mesma pasta, deve-se incluir a seguinte informação no YAML mostrada na Figura \ref{fig:rmarkestilos2} (\texttt{reference\_docx}). Lembrando que para arquivos em Open/Libre Office, deve ser inserida a opção \texttt{reference\_odt} seguida do arquivo (.odt) do modelo.

\begin{figure}[!h]
\caption{Vinculação do modelo}\label{fig:rmarkestilos2}
{\centering \includegraphics[width=0.7\linewidth]{rmarkestilos2} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



A partir de então, as compilações do arquivo .Rmd criado pelo pesquisador seguirão as formatações de estilo que estão determinadas no arquivo ``modelo.docx''.

\hypertarget{citacoes-e-bibliografias}{%
\section{Citações e bibliografias}\label{citacoes-e-bibliografias}}

Na escrita de trabalhos acadêmicos com o RMarkdown é possível efetuar um gerenciamento de citações e bibliografias de maneira extremamente satisfatória e automática. Para isto, o \emph{software} MiKTeX contribuirá nesta empreitada.\% juntamente com o programa Pandoc.

O exemplo abaixo será utilizado com o formato BibLaTeX (extensão .bib). Primeiramente crie um documento .bib, que será o local onde o pesquisador armazenará as bibliografias, que serão posteriormente utilizadas. Crie um novo arquivo de texto (``File \(>\) New File \(>\) Text file'') e depois salve-o na mesma pasta do arquivo .Rmd em que serão inseridas as citações (salve com a extensão ``.bib'' - exemplo: ``bibliografia.bib'').

Dentro deste arquivo serão armazenadas as referências bibliográficas, não deve-se preocupar neste momento com a ordem das referências. Como mostra a Figura \ref{fig:rmarkbib}, inserimos duas bibliografias a serem citadas posteriormente.

A primeira (\texttt{@article}), demonstra que é um artigo de uma revista enquanto a segunda (\texttt{@book}) se trata de um livro. Dentro das chaves estão os dados das referências, como o título (\texttt{title}), autores (\texttt{author}) e o ano (\texttt{year}) por exemplo.

\begin{figure}[!h]
\caption{Arquivo .bib}\label{fig:rmarkbib}
{\centering \includegraphics[width=0.7\linewidth]{rmarkbib} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



O BibLateX gerencia todos os tipos de bibliografias sendo que, como visto acima, as bibliografias possuem campos padrão a serem informados no arquivo ``.bib''. Por exemplo, a categoria de artigos, possui como campos obrigatórios \texttt{author}, \texttt{title}, \texttt{journal} e \texttt{year}. Abaixo seguem algumas especificações dos tipos de bibliografias (adaptado de Lehman e Kime (\protect\hyperlink{ref-biblatex}{2006})), explicitando os itens obrigatórios e opcionais que devem ou podem constar em cada registro:

\texttt{@article} - Artigo de revista. \textbf{OBRIGATÓRIOS}: author, title, journal, year. \textbf{OPCIONAIS}: volume, number, pages, month, note, key.

\texttt{@book} - Livro. \textbf{OBRIGATÓRIOS}: author/editor, title, publisher, year.
\textbf{OPCIONAIS}: volume/number, series, address, edition, month, note, key.

\texttt{@inbook} - Parte de livro. \textbf{OBRIGATÓRIOS}: author/editor, title, chapter/pages, publisher, year. \textbf{OPCIONAIS}: volume/number, series, type, address, edition, month, note, key.

\texttt{@incollection} - Parte de livro com título próprio. \textbf{OBRIGATÓRIOS}: author, title, booktitle, publisher, year. \textbf{OPCIONAIS}: editor, volume/number, series, type, chapter, pages, address, edition, month, note, key.

\texttt{@inproceedings} - Trabalho de anais de conferência. \textbf{OBRIGATÓRIOS}: author, title, booktitle, year. \textbf{OPCIONAIS}: editor, volume/number, series, pages, address, month, organization, publisher, note, key.

\texttt{@mastersthesis} - Dissertação mestrado. \textbf{OBRIGATÓRIOS}: author, title, school, year. \textbf{OPCIONAIS}: type, address, month, note, key.

\texttt{@phdthesis} - Tese de doutorado. \textbf{OBRIGATÓRIOS}: author, title, school, year. \textbf{OPCIONAIS}: type, address, month, note, key.

Estas configurações do BibLateX são comuns nos programas de gerenciamento de bibliografias, como por exemplo no \emph{software} Mendeley. Os usuários deste programa tem uma facilidade na exportação para o formato do BibLateX, pois podem copiar as entradas com as informações de um trabalho e as inserir dentro do arquivo .bib (Figura \ref{fig:rmarkmendeley}).

\begin{figure}[!h]
\caption{Utilização do Mendeley para exportação de dados de bibliografias}\label{fig:rmarkmendeley}
{\centering \includegraphics[width=0.7\linewidth]{rmarkmendeley} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



Após escolhidas as bibliografias a serem utilizadas no trabalho, o pesquisador deve inserir estas entradas como referências dentro do texto. Para isto, utiliza o nome da bibliografia inserida no arquivo .bib, no nosso exemplo \texttt{bresser} e \texttt{Forstater2008}, como mostra a Figura \ref{fig:rmarkcitar}.

\begin{figure}[!h]
\caption{Inserção de citações no arquivo .Rmd}\label{fig:rmarkcitar}
{\centering \includegraphics[width=0.7\linewidth]{rmarkcitar} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



Para que o arquivo que foi criado com as referências bibliográficas (bibliografia.bib) seja utilizado, o pesquisador deve informar o seu nome dentro do YAML no campo \texttt{bibliography}.
Mas qual norma será utilizada para as citações e a criação de referências bibliográficas neste trabalho, já que existem diversas delas? Uma solução é a utilização de arquivos ``.csl'' (Citation Style Language), que nada mais são do que arquivos com as descrições de cada estilo das diversas normas existentes, para ajudar o pesquisador a citar e gerenciar suas referências.

Estes arquivos podem ser encontrados em diversos locais, como por exemplo em \url{https://github.com/citation-style-language/styles} (copie este\footnote{\url{https://raw.githubusercontent.com/citation-style-language/styles/44808db510152943c5d9dc471a9c8982a3edfbea/associacao-brasileira-de-normas-tecnicas-ipea.csl}.} conteúdo para um arquivo ``.txt'' e o renomeie para ``.csl''). Lembrando que o arquivo ``.csl'' deve ser salvo na mesma pasta do arquivo ``.Rmd''. O arquivo csl aqui utilizado refere-se às normas da ABNT (Associação Brasileira de Normas Técnicas) utilizados pelo IPEA (Instituto de Pesquisa Econômica Aplicada). Verifica-se na Figura \ref{fig:rmarkcitar1} a configuração final do YAML. Neste site \url{http://editor.citationstyles.org/searchByName/}
também são encontrados arquivos para várias normas bibliográficas.


\begin{figure}[!h]
\caption{Configurando YAML para citações e fererências}\label{fig:rmarkcitar1}
{\centering \includegraphics[width=0.7\linewidth]{rmarkcitar1} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



Por fim, após inserir a citação no texto e informar ao RMarkdown os arquivos ``.bib'' e ``.csl'' no YAML, basta compilar o arquivo no formato desejado (atalho no teclado CTRL+SHIFT+K), neste caso Word. Lembre-se de inserir um título \texttt{\#\ Referências} ou \texttt{\#\ Referências\ Bibliográficas} ou \texttt{\#\ Bibliografia} (como preferir), no final do texto, pois serão inseridas as referências no final do trabalho.

A partir de então fica muito mais fácil alterar a norma necessária para a produção do trabalho acadêmico, utilizando os mesmos dados de um artigo ou outro material a ser citado. Isto agiliza a produção acadêmica e proporciona, como visto neste livro, uma interação muito proveitosa com a geração das análises por meio do RStudio.

Segue o resultado do arquivo final:
%\newpage

\begin{figure}[!h]
\caption{Resultado final das citações e referências com RMarkdown}\label{fig:rmarkcitarf}
{\centering \includegraphics[width=0.7\linewidth]{rmarkcitarf} 

}
\legend{Fonte: Elaborado pelo(s) autor(es).}

\end{figure}



\hypertarget{exercicios-5}{%
\section{Exercícios}\label{exercicios-5}}

\textbf{1.} Ao final deste livro, você aprendeu a linguagem de programação em R no console RStudio, passando posteriormente para a aprendizagem dos comandos para efetuar estatísticas descritivas, análises com estatística inferencial, teste de qui-quadrado e chegando ao modelo de regressão simples. Desta forma, escolha algum dos exercícios que constam nos capítulos anteriores e com seu código de programação crie um arquivo em RMarkdown (.rmd, como aprendido no presente capítulo) com todos os passos efetuados na análise e seus resultados. Crie um documento dinâmico testando os formatos de saída HTML, Word e PDF.

\chapter*[Sobre os autores]{Sobre os autores}\label{sobre-os-autores}}
\addcontentsline{toc}{chapter}{Sobre os autores}


%\pagestyle{empty}

%\pagestyle{simple}



\begin{wrapfigure}{L}{.2\textwidth}
\vspace{-20pt}
\begin{center}
\includegraphics[width=.2\textwidth]{denize.png}
\vspace{-40pt}
\end{center}
\end{wrapfigure}

\noindent
\textbf{Denize Ivete Reis}

\noindent
Possui Licenciatura Plena em Matemática pela Universidade Regional do Noroeste do Estado do Rio Grande do Sul (1994), especialização em Estatística Aplicada pela Universidade de Santa Cruz do Sul (2003), mestrado em Modelagem Matemática pela Universidade Regional do Noroeste do Estado do Rio Grande do Sul (1997) e doutorado em Qualidade Ambiental pela Universidade Feevale (2015). Atualmente é professora adjunta da Universidade Federal da Fronteira Sul, onde atua na área de Probabilidade e Estatística, Estatística Descritiva e Inferência Estatística. E-mail: denizeir@uffs.edu.br.

%\breakpage
%\newpage



\begin{wrapfigure}{L}{.2\textwidth}
\vspace{-20pt}
\begin{center}
\includegraphics[width=.2\textwidth]{djaina1.jpg}
\vspace{-40pt}
\end{center}
\end{wrapfigure}

\noindent
\textbf{Djaina Sibiani Rieger}

\noindent
Acadêmica do curso de graduação em Matemática da Universidade Federal da Fronteira Sul (UFFS) Campus Chapecó - SC, foi aluna bolsista do programa de extensão que resultou neste livro, sendo integrante e conteudista dos cursos ofertados no Campus Cerro Largo - RS sobre o \emph{software} livre R. 

%\par 

%\breakpage
%\newpage

\begin{wrapfigure}{L}{.2\textwidth}
\vspace{-20pt}
\begin{center}
\includegraphics[width=.2\textwidth]{erickson.jpeg}
\vspace{-40pt}
\end{center}
\end{wrapfigure}

\noindent
\textbf{Erikson Kaszubowski}

\noindent
Doutor em Psicologia pela Universidade Federal de Santa Catarina, sob orientação do Prof. Dr. Fernando Aguiar, com a tese ``Modelos de tópicos para associações livres''. Formado em Psicologia pela Universidade Federal de Santa Catarina, nas graduações Bacharelado e Formação de Psicólogo (2006), e Licenciatura (2008). Foi professor de Psicologia da Educação na Universidade Federal da Fronteira Sul, ministrando as disciplinas da área de Psicologia nos cursos de Licenciatura e Pós-Graduação. Trabalha atualmente como psicólogo clínico no Serviço de Atenção Psicológica da UFSC. E-mail: erikson84@yahoo.com.br.


\begin{wrapfigure}{L}{.2\textwidth}
\vspace{-20pt}
\begin{center}
\includegraphics[width=.2\textwidth]{felipe.jpg}
\vspace{-40pt}
\end{center}
\end{wrapfigure}

\noindent
\textbf{Felipe Micail da Silva Smolski}


\noindent
Possui graduação em Ciências Econômicas pela Universidade Regional do Noroeste do Estado do Rio Grande do Sul - UNIJUÍ (2009), pós-graduação em Gestão de Investimentos pela Faculdade Integrada Grande Fortaleza - FGF (2012), mestrado em Desenvolvimento e Políticas Públicas pela Universidade Federal da Fronteira Sul - UFFS, Campus Cerro Largo - RS (2017). E-mail: felipesmolski@hotmail.com. 

%\breakpage
%\newpage




\begin{wrapfigure}{L}{.2\textwidth}
\vspace{-20pt}
\begin{center}
\includegraphics[width=.2\textwidth]{iara1.png}
\vspace{-40pt}
\end{center}
\end{wrapfigure}

\noindent
\textbf{Iara Denise Endruweit Battisti}

\noindent
Possui graduação em Informática pela Universidade Regional do Noroeste do Estado do Rio Grande do Sul (1996), mestrado em Estatística e Experimentação Agropecuária pela Universidade Federal de Lavras (2001) e doutorado em Epidemiologia pela Universidade Federal do Rio Grande do Sul (2008).  Atualmente  é professora associada na Universidade Federal da Fronteira Sul, campus Cerro Largo (RS). É docente dos Programas de mestrado em Ambiente e Tecnologias Sustentáveis e mestrado em Desenvolvimento e Políticas Públicas. Atua principalmente nos seguintes temas: amostragem complexa, relação ambiente e saúde utilizando modelagem estatística. E-mail: iara.battisti@uﬀs.edu.br.

%Doutora em Epidemiologia, docente da Universidade Federal da Fronteira Sul (UFFS) Campus Cerro Largo.

%\newpage

\begin{wrapfigure}{L}{.2\textwidth}
\vspace{-20pt}
\begin{center}
\includegraphics[width=.2\textwidth]{tati.jpeg}
\vspace{-40pt}
\end{center}
\end{wrapfigure}

\noindent
\textbf{Tatiane Chassot}    


\noindent
Possui graduação em Engenharia Florestal pela Universidade Federal de Santa Maria (2008), mestrado (2009) e doutorado em Engenharia Florestal também pela Universidade Federal de Santa Maria (2013). Atualmente é professora adjunta da Universidade Federal da Fronteira Sul - Campus Cerro Largo onde ministra as disciplinas de Introdução à Informática, Estatística Básica, Experimentação Agrícola, Sistemas Agroflorestais, Silvicultura e Práticas Integradoras de Campo. E-mail: tatianechassot@uffs.edu.br.\\



%\nocite{barbetta1988} \nocite{ecor2016} \nocite{ferreira2013} \nocite{hoffmann1998} \nocite{ecor2016} \nocite{triola1999} \nocite{Gandrud2013} \nocite{rstudio} \nocite{Tippmann2015} \nocite{gentleman1997r} \nocite{R-rmarkdown} \nocite{teamrstudio}

\setlength{\parindent}{0.7cm}

%\RaggedRight
%\indentfirst
%\frenchspacing

\hypertarget{referencias}{%
\chapter*[Referências]{Referências}\label{referencias}}
\addcontentsline{toc}{chapter}{Referências}

%\begin{flushleft}

%\setlength{\parskip}{0.2cm}
%\setlength{\parindent}{0.7cm}
%\RaggedRight

\setlength{\parindent}{1.0cm}
\indent
\hypertarget{refs}{}
\leavevmode\hypertarget{ref-R-rmarkdown}{}%
ALLAIRE, J. J. \emph{et al.} \textbf{rmarkdown: Dynamic Documents for R}, 2017. Disponível em: \url{https://CRAN.R-project.org/package=rmarkdown}. Acesso em: 1 mar. 2018.

\leavevmode\hypertarget{ref-almeida2000}{}%
ALMEIDA, L.; FREIRE, T. \textbf{Metodologia da investigação em psicologia e educação}. 2. ed. Braga: Psiquilíbrios, 2000.

\leavevmode\hypertarget{ref-anderson2002}{}%
ANDERSON, D. R.; SWEENEY, D. J.; WILLIAMS, T. A. \textbf{Estatística aplicada à administração e economia}. 2. ed. São Paulo: Pioneira Thomson Learning, 2002.

\leavevmode\hypertarget{ref-barbetta1988}{}%
BARBETTA, P. A. \textbf{Estatí́stica aplicada às ciências sociais}. 7. ed. Florianópolis: Editora UFSC, 2010.

\leavevmode\hypertarget{ref-brasil2014}{}%
BRASIL, MINISTÉRIO DA SAÚDE. \textbf{Estratégias para o cuidado da pessoa com doença crônica: obesidade}. Cadernos de Atenção Básica, n 38 ed. Brasília: Ministério da Saúde, 2014.


\leavevmode\hypertarget{ref-xtable2018}{}%
DAHL, D. B. \emph{et al.} \textbf{xtable: Export Tables to \LaTeX  or HTML}, 2018. Disponível em: \url{https://CRAN.R-project.org/package=xtable}. Acesso em: 1 mar. 2019.

\leavevmode\hypertarget{ref-pander2018}{}%
DARÓCZI, G.; TSEGELSKYI, R. \textbf{pander: An R ``Pandoc'' Writer}, 2018. Disponível em: \url{https://CRAN.R-project.org/package=pander}. Acesso em: 1 mar. 2019.

\leavevmode\hypertarget{ref-Dieese2011}{}%
DIEESE, DEPARTAMENTO INTERSINDICAL DE ESTATÍSTICA E ESTUDOS SOCIOECONÔMICOS. \textbf{Estatísticas do meio rural 2010-2011}. 6. ed. São Paulo: DIEESE, 2011.

\leavevmode\hypertarget{ref-Fonseca2010}{}%
FONSECA, J. S. DA; MARTINS, G. DE A. \textbf{Curso de Estatística}. 6. ed. São Paulo: Atlas, 2010.

\leavevmode\hypertarget{ref-lubridate2011}{}%
GROLEMUND, G.; WICKHAM, H. Dates and Times Made Easy with lubridate. \textbf{Journal of Statistical Software}, v. 40, n. 3, p. 1--25, 2011. 

\leavevmode\hypertarget{ref-stargazer2018}{}%
HLAVAC, M. \textbf{stargazer: Well-Formatted Regression and Summary Statistics Tables}. Bratislava: Slovakia. Central European Labour Studies Institute (CELSI), 2018. Disponível em: \url{https://CRAN.R-project.org/package=stargazer}. Acesso em: 1 mar. 2019.


\leavevmode\hypertarget{ref-hoffmann1998}{}%
HOFFMANN, R.; VIEIRA, S. \textbf{Análise de regressão: uma introdução à econometria}. 2. ed. São Paulo: Hucitec, 1998.

\leavevmode\hypertarget{ref-Amelia2011}{}%
HONAKER, J.; KING, G.; BLACKWELL, M. Amelia II: A Program for Missing Data. \textbf{Journal of Statistical Software}, v. 45, n. 7, p. 1--47, 2011.

\leavevmode\hypertarget{ref-inmet}{}%
INMET. \textbf{Insituto Nacional de Meteorologia}, 2018. Disponível em: \url{http://www.inmet.gov.br/portal/}. Acesso em: 1 dez. 2018.

\leavevmode\hypertarget{ref-biblatex}{}%
LEHMAN, P.; KIME, P. \textbf{BibLATEX -- Sophisticated Bibliographies in \LATEX}, 2006. Disponível em: \url{https://ctan.org/pkg/biblatex}. Acesso em: 1 mar. 2019.

\leavevmode\hypertarget{ref-lopes2008}{}%
LOPES, L. F. D. \emph{et al.} \textbf{Caderno didático: estatística Geral}. 3. ed. Santa Maria: UFSM, 2008. p. 209.

\leavevmode\hypertarget{ref-Morettin2009}{}%
MORETTIN, P. A.; BUSSAB, W. DE O. \textbf{Estatística Básica}. 6. ed. São Paulo: Saraiva, 2009.

\leavevmode\hypertarget{ref-PerformanceAnalytics}{}%
PETERSON, B. G.; CARL, P. \textbf{PerformanceAnalytics: Econometric Tools for Performance and Risk Analysis}, 2018. Disponível em: \url{https://CRAN.R-project.org/package=PerformanceAnalytics}. Acesso em: 1 mar. 2019.

\leavevmode\hypertarget{ref-rcore}{}%
R CORE TEAM. \textbf{R: A Language and Environment for Statistical Computing}. R Foundation for Statistical Computing, Vienna, Austria. 2019. Disponível em: \url{https://www.R-project.org}. Acesso em: 20 fev. 2019.

\leavevmode\hypertarget{ref-Ristow2017}{}%
RISTOW, L. P. \textbf{Exposição ocupacional de trabalhadores rurais a agrotóxicos e relação com políticas públicas.} 139 f. Dissertação (Mestrado em Desenvolvimento e Políticas Públicas) - Universidade Federal da Fronteira Sul. Cerro Largo, 2017.

\leavevmode\hypertarget{ref-teamrstudio}{}%
RSTUDIO TEAM. \textbf{RStudio: Integrated Development Environment for R}. Boston, MA. RStudio, Inc., 2019. Disponível em: \url{http://www.rstudio.com/}. Acesso em: 20 fev. 2019.

\leavevmode\hypertarget{ref-triola1999}{}%
TRIOLA, M. F. \textbf{Introdução à estatística}. 10. ed. Rio de Janeiro: LTC, 2011.

\leavevmode\hypertarget{ref-stringr2018}{}%
WICKHAM, H. \textbf{stringr: Simple, Consistent Wrappers for Common String Operations}, 2018. Disponível em: \url{https://CRAN.R-project.org/package=stringr}. Acesso em: 1 mar. 2019.

\leavevmode\hypertarget{ref-readxl2018}{}%
WICKHAM, H.; BRYAN, J. \textbf{readxl: Read Excel Files}, 2018. Disponível em: \url{https://CRAN.R-project.org/package=readxl}. Acesso em: 1 mar. 2019.

\leavevmode\hypertarget{ref-dplyr2019}{}%
WICKHAM, H. \emph{et al.} \textbf{dplyr: A Grammar of Data Manipulation}, 2019. Disponível em: \url{https://CRAN.R-project.org/package=dplyr}. Acesso em: 1 mar. 2019.

\leavevmode\hypertarget{ref-tidyr2018}{}%
WICKHAM, H.; HENRY, L. \textbf{tidyr: Easily Tidy Data with ``spread()'' and ``gather()'' Functions}, 2018. Disponível em: \url{https://CRAN.R-project.org/package=tidyr}. Acesso em: 1 mar. 2019.

\leavevmode\hypertarget{ref-readr2018}{}%
WICKHAM, H.; HESTER, J.; FRANCOIS, R. \textbf{readr: Read Rectangular Text Data}, 2018. Disponível em: \url{https://CRAN.R-project.org/package=readr}. Acesso em: 1 mar. 2019.

\leavevmode\hypertarget{ref-haven2018}{}%
WICKHAM, H.; MILLER, E. \textbf{haven: Import and Export ``SPSS'', ``Stata'' and ``SAS'' Files}, 2018. Disponível em: \url{https://CRAN.R-project.org/package=haven}. Acesso em: 1 mar. 2019.

\leavevmode\hypertarget{ref-knitr2018}{}%
XIE, Y. \textbf{knitr: A General-Purpose Package for Dynamic Report Generation in R}, 2018. Disponível em: \url{https://CRAN.R-project.org/package=knitr}. Acesso em: 1 mar. 2019.

%\end{flushleft}
% ------------------------------------------------------------
\postextual % pós-textual
% ------------------------------------------------------------

% ------------------------------------------------------------
%\bibliography{abntex2-modelo-references} % insere o arquivo de bibliografia
%\bibliography{livror1}
% ------------------------------------------------------------

% ------------------------------------------------------------
% Colofão: última página com informações sobre a composição do livro.
\newpage
\cleardoublepage
\thispagestyle{empty} 
%\printindex

\newpage
\cleardoublepage
\begin{titlingpage}
%\phantom{xxx}
%\vspace{0.5cm}
%\huge
%\raggedright
%\imprimirautor\\
%\vspace{2.5cm}
%\huge 
\thispagestyle{empty}

\includepdf{Contracapa.png}
%\noparindent\includegraphics[width=\paperwidth]{Capa}%[1cm]
%\textit{\textcolor{blue}{\imprimirtitulo}}\\begin{equation}1cm]

\centering 
%  %este é um símbolo que só aparecerá com a fonte Minion.
%\vfill
%\Large
% %este é um símbolo que só aparecerá com a fonte Minion.
%\imprimirinstituicao
\end{titlingpage}
\end{document}

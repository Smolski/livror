%\section{O que é o RMarkdown?}

\textbf{Markdown} é uma linguagem de marcação de textos utilizada para a criação de diversos documentos, incluindo artigos, livros e apresentações. A grande inovação do \textbf{RMarkdown} no RStudio neste sentido é a utilização desta linguagem por meio do pacote \emph{rmarkdown} (arquivos .Rmd) para integrar a criação de documentos com a análise e manipulação de dados em um único documento (Figura \ref{rmark}). Desta forma, é possível efetuar  pesquisas científicas que podem ser reproduzidas de forma muito mais fácil.

\begin{figure}[!h]
\caption{Processo de criação de documentos no RMarkdown \label{rmark}}
\centering
\includegraphics[width=0.7\linewidth]{rmarkdown.png}
\legend{Fonte: Adaptado de \citeonline{R-rmarkdown}.}
\end{figure}


Para criação dos documentos é preciso a instalação dos pacotes \emph{rmarkdown} e \emph{knitr} dentro do RStudio, bem como sugere-se a instalação, no Windows, do programa MiKTeX (\url{https://miktex.org/download}), que se encarrega de suporte à configurações da linguagem de marcação de textos LaTeX no caso de criação dos arquivos PDF.

\section{Criando o documento}

Para criação do documento RMarkdown, no RStudio clique em ``File $>$ New File $>$ R Markdown'', ou mesmo através do atalho para criação de documentos conforme mostra a Figura \ref{criararq1}. Haverá a escolha entre a criação de documentos (HTML, PDF e Word/Libre/Open Office), a criação de uma apresentação (\emph{Presentation}), a criação de um documento Shiny (documento dinâmico para criação de \emph{dashboards}) e o carregamento de um modelo de documento pré-estabelecido (\emph{From Template}). 

Neste exemplo será criado um documento em Word, onde são preenchidos os campos com o título do documento, o nome do autor e escolha o tipo de documento.

\begin{figure}[!h]
\caption{Criar documento RMarkdown}
\centering
\includegraphics[width=0.9\linewidth]{criararq1.png}
\label{criararq1}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}



\section{Compilando os resultados do arquivo}

O \textbf{RMarkdown} cria um documento incial padrão, contendo alguns exemplos básicos de inserção de textos e de formatação, que serão vistos adiante. Para compilação do documento para o formato desejado (neste caso Word), o usuário deve clicar na aba ``Knit $>$ Knit to Word'', ou pelo atalho no teclado CTRL+SHIFT+K.



\begin{figure}[!h]
\caption{Compilado o documento RMarkdown}
\centering
\includegraphics[width=0.7\linewidth]{compilar.png}
\label{}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

Caso ocorram erros com relação à codificação do documento, no que diz respeito aos caracteres de acentuação da língua portuguesa, este pode ser resolvido salvando o documento criado com a codificação UTF-8. Para isto, clique em ``File $>$ Save with Encoding $>$ UTF-8''. Deve ser feito este procedimento para cada tipo de arquivo: Word, HTML e PDF.

\begin{figure}[!h]
\caption{Erro de codificação do documento RMarkdown}
\centering
\includegraphics[width=0.6\linewidth]{errocodif.png}
\label{rmarkcri}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}


\section{Elementos básicos do RMarkdown}

A configuração básica de um arquivo RMarkdown divide-se entre a YAML Header e o corpo do documento. A YAML (Yet Another Markup Language) Header, ou metadados, é um cabeçalho onde são inseridas as informações sobre o arquivo e das opções de compilação. Sempre devem iniciar o documento, sendo inseridas dentro de dois campos de sinais $---$.

Já abaixo do YAML\index{YAML}, situa-se o local onde o pesquisador digitará o texto, bem como integrará a inserção de códigos do R e também efetuará as análises posteriores (análises descritivas, regressões, tabelas, fórmulas, etc.). Por sua vez, os códigos do R (para manipulação de dados, como visto até o capítulo anterior deste livro) são ``embutidos'' no texto por meio das \textbf{Code Chunks}. Já o texto é inserido normalmente em forma de parágrafos (``fora'' dos Chunks), sendo que o novo parágrafo é iniciado após um ``enter'' entre os textos informados.



\begin{figure}[!h]
\caption{Tela inicial do arquivo RMarkdown}
\centering
\includegraphics[width=0.9\linewidth]{rmark2.png}
\label{rmark2}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\end{figure}

Desta forma, ao efetuar a compilação do documento, o RStudio ``lê'' todas as informações inseridas no arquivo e cria como resultado um arquivo escolhido com todas as análises feitas pelo usuário.

No exemplo acima (Figura \ref{rmark2}), a compilação irá gerar um arquivo em Word, de acordo com o \verb|output| escolhido, no caso \verb|word_document|. Se o usuário desejar gerar como arquivo de texto final um documento que pode ser aberto inclusive em software livre, pode utilizar o formato OpenDocument (.otd). Para isto, basta substituir o \verb|output| para \verb|odt_document|.


\section{Elementos básicos de formatação}

Dentro do documento \textbf{RMarkdown}, depois dos metadados, começa o espaço destinado ao texto do documento. Nesta etapa seguem algumas condições para a formatação do texto, bem como da configuração dos títulos e fórmulas matemáticas. A linguagem \emph{markdown} preza pela simplicidade na formatação do texto, a qual posteriormente pode ser exportada para diversos tipos de documentos de uma só vez. Desta forma, como visto anteriormente, cria documentos totalmente dinâmicos entre si.


Os níveis de títulos dos documentos RMarkdown são definidos pelo símbolo \verb|#|:

\begin{figure}[!h]
\caption{Títulos no RMarkdown}
\centering
\includegraphics[width=0.85\linewidth, height=3.5cm]{rmark_tit.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{}
\end{figure}


%\begin{table}[!h] \centering 
%  \caption{Formatação de títulos nos arquivos RMarkdown}
%\begin{tabular}{|l|l|}
%    \hline
%\verb|# Título um {#ancora}| & \Huge{Título um}\\
%\verb|## Título dois| & \huge{Título dois}\\
%\verb|### Título três| & \LARGE{Título três}\\
%\verb|#### Título quatro| & \Large{Título quatro}\\
%\verb|##### Título cinco| & \large{Título cinco}\\
%\verb|###### Título seis | & \normalsize{Título seis}\\
%\hline
% \end{tabular}
%\end{table}

A acentuação das palavras, dentro do texto, é feita normalmente pelo teclado do usuário. Os caracteres \verb|*#/()[]<>| podem ser escritos normalmente dentro do texto, no entanto os demais (exemplo do cifrão \verb|$|) devem ser escritos precedidos de uma barra: \verb|\$|. Por outro lado, a formatação em itálico, negrito, subscrito, sobrescrito, links e demais formatações são feitas no documento (Figura \ref{rmark_form}).

\begin{figure}[!h]
\caption{Formatação no RMarkdown}
\centering
\includegraphics[width=0.7\linewidth]{rmark_form.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_form}
\end{figure}

Como visto, é possível escrever as fórmulas em notação matemática, o que facilita e muito a vida do pesquisador. No ambiente matemático do \emph{RMarkdown}, elas são escritas por meio da linguagem de marcação de textos LaTeX. Existem muitos manuais sobre esta linguagem, e para facilitar a escrita, sites como \url{https://www.codecogs.com/latex/eqneditor.php?lang=pt-br} ajudam o pesquisador nesta empreitada.

É possível efetuar a inserção de links nos documentos, para páginas externas ou mesmo internas ao documento (Figura \ref{rmark_links}).

\begin{figure}[!h]
\caption{Links no RMarkdown}
\centering
\includegraphics[width=0.7\linewidth]{rmark_links.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_links}
\end{figure}

A inserção de imagens externas no documento, em diversos formatos (aqui no exemplo .png) é feita a partir do direcionamento do nome da imagem salva na mesma pasta do arquivo .Rmd criado, ou mesmo pelo link na internet (Figura \ref{rmark_img}).


\begin{figure}[!h]
\caption{Imagens no RMarkdown}
\centering
\includegraphics[width=0.7\linewidth]{rmark_img.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_img}
\end{figure}

A Figura \ref{rmark_list} demonstra algumas formas de criar listas e itens no decorrer do corpo de texto no \textbf{RMarkdown}.

\begin{figure}[!h]
\caption{Listas no RMarkdown}
\centering
\includegraphics[width=0.7\linewidth]{rmark_list.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_list}
\end{figure}

A criação de tabelas simples segue a disposição dos elementos pré-definidos, sendo que o alinhamento da coluna se dá pelo caractere ``\verb|:|'' (dois pontos) conforme a Figura \ref{rmark_tab}:

\begin{figure}[!h]
\caption{Tabelas simples no RMarkdown}
\centering
\includegraphics[width=0.9\linewidth]{rmark_tab.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_tab}
\end{figure}

As notas de rodapé são inseridas no texto dentro das chaves precedidas do acento circunflexo \verb|^[ ]|. O pesquisador adiciona-os durante o texto, e o programa enumera automaticamente no documento final em Word (Figura \ref{rmark_rodape}).

\begin{figure}[!h]
\caption{Notas de rodapé no RMarkdown}
\centering
\includegraphics[width=0.9\linewidth]{rmark_rodape.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_rodape}    
\end{figure}





\section{Elementos básicos do YAML}

O YAML, ou os metadados do documento, são informações básicas do documento que podem ser alteradas (Figura \ref{rmark_autor}). Dentre elas \emph{title} define o título do documento; em \emph{author} é inserido o autor ou autores e as informações do currículo do pesquisador são inseridas via nota de rodapé dentro do símbolo \verb|^[  ]|; o campo \emph{date} é opcional.


\begin{figure}[!h]
\caption{Configuração do YAML}
\centering
\includegraphics[width=0.9\linewidth]{rmark_autor.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_autor}
\end{figure}

Já o campo \emph{output} define a opção de salvamento do arquivo final. Pode ser informado todos os tipos de arquivos previamente, sendo que no momento da compilação será utilizado o primeiro tipo de arquivo, no exemplo, em Word. Para salvar em PDF, é só colocar o campo \emph{pdf\_document} em primeiro lugar juntamente com a configuração dentro deste tipo de arquivo. 

Abaixo do tipo de arquivo a ser salvo, constam as opções de salvamento. No caso do exemplo, abaixo de Word está constando a opção \emph{fig\_caption}, que dita se as figuras do documento em Word serão inseridas com títulos. 

Os campos \emph{fig\_height} e \emph{fig\_width} determinam a altura e largura padrão de todas as imagens do documento Word. Abaixo seguem algumas opções do YAML relacionando-se com a saída do documento em Word:

\begin{itemize}
\item \textbf{fig\_caption} - As figuras devem ter título? 
    
\item \textbf{fig\_height, fig\_width} - Altura e largura padrão das imagens. 
        
\item \textbf{highlight} - Estilo de saída pré-definido, inclui  ``default'', ``tango'', ``pygments'', ``kate'', ``monochrome'', ``espresso'', ``zenburn'', e ``haddock''. 
         
\item \textbf{keep\_md} - Salva uma cópia em arquivo .md juntamente com os outros arquivos.
        
\item \textbf{md\_extensions} - Extensões Markdown a serem incluídas como definições padrão no RMarkdown.
        
\item \textbf{pandoc\_args} - Argumentos adicionais para utilizar com o pandoc.
       
\item \textbf{reference\_docx} - Arquivo docx com as configurações de estilos de texto padrão. Deve ser salvo na mesma pasta do documento .rmd criado.
    
\item \textbf{toc} - Adiciona o sumário no início do texto.
     
\item \textbf{toc\_depth} - Determina o menor nível de títulos que será exibido no sumário. Exemplo, 1 mostra somente o primeiro nível.
\end{itemize}


Também é possível incluir um campo \verb|abstract| para o resumo do artigo e suas respectivas palavras-chave:

\begin{figure}[!h]
\caption{Abstract no YAML}
\centering
\includegraphics[width=0.7\linewidth]{abstract.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{}
\end{figure}

\section{Elementos básicos dos Chunks}

Os \textbf{Code Chunks}, como já visto, são espaços destinados à inclusão de códigos diretamente do RStudio, como se inseríssemos a informação em seu Console. Desta forma, por exemplo, se efetuarmos uma operação matemática ou se carregarmos uma base de dados para ser trabalhada, as rotinas serão efetuadas no momento em que for compilado o arquivo .Rmd trabalhado.

A criação das Chunks é feita manualmente no corpo do documento .Rmd pela inclusão do código \verb|```{r }```|, ou via plataforma RStudio, no menu ``Insert $>$ Insert a new R chunk'', conforme demonstra a Figura \ref{rmark_chunk1}:

\begin{figure}[!h]
\caption{Criação de Chunks}
\centering
\includegraphics[width=0.7\linewidth]{rmark_chunk1.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_chunk1}
\end{figure}

Nota-se que o corpo do documento .Rmd ficou de outra cor, indicando que está inserida uma Chunk naquele local. Dentro das chaves, a Chunk divide-se entre uma identificação/nome para aquele campo (é opcional, no entanto se constar não pode ser repetido no documento) e; as opções da Chunk. 

No exemplo abaixo, o nome da Chunk criada foi ``\textbf{r nomedochunk}''. E no campo das opções, constaram ``echo=FALSE'', ``fig.height=10'' e ``fig.width=5''. Lembrando que estes campos determinam as opções somente para este chunk. 

A primeira opção, ``echo=FALSE'', informa que no arquivo compilado, somente será mostrado o resultado da rotina inserida na Chunk (1+1), portanto será mostrado somente o valor 2. Caso o usuário almejasse inserir, no arquivo final, o código do R escrito (1+1) juntamente com o resultado da operação, marcaria ``echo=TRUE''.


\begin{figure}[!h]
\caption{Configurando os Chunks}
\centering
\includegraphics[width=1\linewidth]{rmark_chunk2.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{}
\end{figure}

As opções ``fig.height'' e ``fig.width'' referem-se à altura e largura caso o resultado final da Chunk fosse uma figura ou gráfico derivado de dados inseridos na mesma. Vale lembrar que somente seriam determinadas as medidas para esta Chunk.

Para padronizar todas as Chunks para que tenham as mesmas opções, uma maneira utilizada usualmente é a inserção de uma ``Chunk global''. Ela é incluída no início do texto, sendo que a sua inclusão é facultativa. No entanto, contribui para padronizar o texto, ao mesmo tempo que se existir uma Chunk durante o texto que deva ser configurada de forma diferente (por exemplo, o tamanho da imagem), pode ser efetuado em cada Chunk individual.


\begin{figure}[!h]
\caption{Chunk global}
\centering
\includegraphics[width=1\linewidth]{rmark_chunkopt.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{}
\end{figure}

Seguem algumas importantes opções das Chunks dos arquivos RMarkdown \cite{R-rmarkdown}:

\begin{itemize}
\item \textbf{echo} - O código da Chunk deve ser incluído no resultado final? Padrão = FALSE.
\item \textbf{error} - Mostra mensagens de erro no documento (TRUE) ou para quando os erros ocorrem. 
\item \textbf{fig.align} - Alinhamento da figura: ``left'', ``right'' ou ``center'' (padrão = ``default'').
\item \textbf{fig.height, fig.width} - Tamanho das figuras em polegadas.
\item \textbf{include} - Para incluir a Chunk depois de compilar (padrão = TRUE).
\item \textbf{message} - Mostra as mensagens por ventura existentes no documento (padrão = TRUE).
\item \textbf{results} - (default=``markup'') ``asis'' - processa os resultados na saída do documento; ``hide'' - não mostra os resultados; ``hold'' - coloca os resultados abaixo do código.
\item \textbf{warning} - Mostra avisos de advertência no documento (padrão = TRUE).
\end{itemize}



Como mencionado no início deste capítulo, a grande vantagem do \textbf{RMarkdown} é a sua versatilidade na criação de documentos concatenados com as análises estatísticas no RStudio. Desta forma, dentro das Ckunks, podem ser criadas bases de dados, bem como importados de sites ou mesmo carregados de arquivos trabalhados previamente no RStudio. 

No exemplo abaixo, foi criado um \emph{data frame} nomeado ``amost'' diretamente no console dentro da Chunk. Em um segundo momento, para utilizarmos um determinado pacote instalado no RStudio, utiliza-se, dentro da Chunk, o comando ``require ()'' juntamente com o pacote necessário. Podem ser inseridos tantos pacotes quanto forem utilizados no documento, conforme a Figura \ref{rmark_chunk3}.

\begin{figure}[!h]
\caption{Exemplo de criação de Chunk e carregamento de pacote}
\centering
\includegraphics[width=1\linewidth]{rmark_chunk3.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_chunk3}
\end{figure}

\subsection{Inserindo tabelas com as Chunks}

Como visto, algumas ações extremamente úteis podem ser efetuadas por meio das Chunks. Dentre elas, inclui-se a plotagem de tabelas no texto final, derivadas de objetos criados pelo pesquisador no RStudio. Os exemplos trazidos abaixo incluem a utilização dos pacotes \verb|kable|, \verb|xtable| e \verb|flextable| para a criação das tabelas. 


\begin{figure}[!h]
\caption{Exemplo de criação de tabelas com os pacotes \emph{kable}, \emph{xtable} e \emph{flextable}}
\centering
\includegraphics[width=1\linewidth]{rmark_chunk_tab1.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_chunk3}
\end{figure}

Além disso, o pacote \verb|stargazer| é extremamente útil para geração de tabelas com resultados de regressões com a saída dos documentos em PDF.

\begin{figure}[!h]
\caption{Exemplo de criação de tabelas com \emph{stargazer}}
\centering
\includegraphics[width=1\linewidth]{rmark_chunk_tab2.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_chunk3}
\end{figure}

Outra forma de passar as tabelas para o Word é criando-a no formato HTML e copiando para o arquivo em Word (veja em \url{https://cran.r-project.org/web/packages/kableExtra/vignettes/kableExtra_and_word.html}.).

\subsection{Inserindo imagens com as Chunks}

Da mesma forma que as tabelas, as imagens também podem ser inseridas com o auxílio de Chunks. Lembrando que a imagem deve estar na mesma pasta do arquivo ou na pasta indicada:

\begin{figure}[!h]
\caption{Exemplo de inserção de imagens pelos Chunks }
\centering
\includegraphics[width=1\linewidth]{rmark_chunk_img.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_chunk3}
\end{figure}


\section{Criação de modelos para formatação vinculada}

Para os pesquisadores que trabalham intensamente com o Word ou Libre/Open Office, a formatação dos resultados decorrentes das análises compiladas no RMarkdown podem ser incrementadas. Isto porque existe um recurso de criação de modelos vinculados aos editores de texto, estes que serão responsáveis pela definição da formatação de todos os itens (títulos, subtítulos, parágrafos, fontes, etc.), como será visto a seguir.








\subsection{Primeiro passo: criação de um documento modelo}

Primeiramente deve-se criar um documento mínimo padrão que será utilizado como modelo. Crie um novo documento (Rmd), aqui denominaremos de ``modelo'' (o usuário pode escolher o nome), que será salvo em .Rmd e gerado o respectivo arquivo Word (ou no formato .odt), na mesma pasta que o pesquisador salvar arquivos a serem formatados.

Como já visto, para criação de documentos .Rmd clique em ``File $>$ New File $>$ R Markdown''. Escolha o nome e salve na pasta escolhida. Gere o documento em Word (.docx) ou em outro arquivo de texto (exemplo .odt) em ``File $>$ Knit Document''. 


\subsection{Segundo passo: formatação do modelo}

Abra o arquivo em Word (denominamos ``modelo.docx''). Atente para a caixa de seleção de estilos do Word, que será trabalhado nesta etapa (Figura \ref{rmark_estilos}). 

\begin{figure}[!h]
\caption{Caixa estilos no Word}
\centering
\includegraphics[width=.8\linewidth]{rmark_estilos.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_estilos}
\end{figure}

Note que para o resultado desta compilação, o menu estilos traz várias formatações das diferentes partes do texto, entre elas ``Abstract'', ``Author'', ``Normal'', ``Titulo'', ``Titulo 1'', etc. Estes estilos serão alterados pelo usuário, para adequar às necessidades do pesquisador na criação do documento padrão. Clique com o botão direito nos estilos e em ``Modificar'' para definir a formatação padrão para cada parte do texto.

\begin{figure}[!h]
\caption{Modificação de estilos no Word}
\centering
\includegraphics[width=.8\linewidth]{rmark_estilos1.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_estilos1}
\end{figure}

\subsection{Terceiro passo: vinculação do modelo ao arquivo em RMarkdown}


Após detemrinar as alterações em todos os campos de estilos do documento modelo no Word, o pesquisador deve vincular este modelo ao documento .Rmd principal. Além de deixar salvo o modelo em Word na mesma pasta, deve-se incluir a seguinte informação no YAML mostrada na Figura  \ref{rmark_estilos2} (\verb|reference_docx|). Lembrando que para arquivos em Open/Libre Office, deve ser inserida a opção \verb|reference_odt| seguida do arquivo (.odt) do modelo.

\begin{figure}[!h]
\caption{Vinculação do modelo}
\centering
\includegraphics[width=.8\linewidth]{rmark_estilos2.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_estilos2}
\end{figure}

A partir de então, as compilações do arquivo .Rmd criado pelo pesquisador seguirão as formatações de estilo que estão determinadas no arquivo ``modelo.docx''.

\section{Citações e bibliografias}

Na escrita de trabalhos acadêmicos com o RMarkdown é possível efetuar um gerenciamento de citações e bibliografias de maneira extremamente satisfatória e automática. Para isto, o \emph{software} MiKTeX contribuirá nesta empreitada.% juntamente com o programa Pandoc. 

O exemplo abaixo será utilizado com o formato BibLaTeX (extensão .bib). Primeiramente crie um documento .bib, que será o local onde o pesquisador armazenará as bibliografias, que serão posteriormente utilizadas. Crie um novo arquivo de texto (``File $>$ New File $>$ Text file'') e depois salve-o na mesma pasta do arquivo .Rmd em que serão inseridas as citações (salve com a extensão ``.bib'' - exemplo: ``bibliografia.bib'').

Dentro deste arquivo serão armazenadas as referências biliográficas, não deve-se preocupar neste momento com a ordem das referências. Como mostra a Figura \ref{rmark_bib}, inserimos duas bibliografias a serem citadas posteriormente. 

A primeira (\verb|@article|), demonstra que é um artigo de uma revista enquanto a segunda (\verb|@book|) se trata de um livro. Dentro das chaves estão os dados das referências, como o título (\verb|title|), autores (\verb|author|) e o ano (\verb|year|) por exemplo.

\begin{figure}[!h]
\caption{Arquivo .bib}
\centering
\includegraphics[width=.7\linewidth]{rmark_bib.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_bib}
\end{figure}


O BibLateX gerencia todos os tipos de bibliografias sendo que, como visto acima, as bibliografias possuem campos padrão a serem informados no arquivo ``.bib''. Por exemplo, a categoria de artigos, possui como campos obrigatórios \verb|author|, \verb|title|, \verb|journal| e \verb|year|. Abaixo seguem algumas especificações dos tipos de bibliografias (Adaptado de \citeonline{biblatex}):

\breakpage

\textbf{@article} -  Artigo de revista.  \par
\noindent 
OBRIGATÓRIOS -  author, title, journal, year. \par
\noindent
OPCIONAIS -  volume, number, pages, month, note, key.


\textbf{@book} -  Livro. \par
\noindent
OBRIGATÓRIOS - author/editor, title, publisher, year.\par
\noindent
OPCIONAIS -  volume/number, series, address, edition, month, note, key.\par


\textbf{@inbook} - Parte de livro. \par
\noindent
OBRIGATÓRIOS - author/editor, title, chapter/pages, publisher, year.\par
\noindent
OPCIONAIS -  volume/number, series, type, address, edition, month, note, key.


\textbf{@incollection} -  Parte de livro com título próprio.\par
\noindent
OBRIGATÓRIOS -  author, title, booktitle, publisher, year.\par
\noindent
OPCIONAIS -  editor, volume/number, series, type, chapter, pages, address, edition, month, note, key.\par


\textbf{@inproceedings} -  Trabalho de anais de conferência. \par
\noindent
OBRIGATÓRIOS- author, title, booktitle, year.  \par
\noindent
OPCIONAIS -  editor, volume/number, series, pages, address, month, organization, publisher, note, key.\par

\textbf{@mastersthesis} -  Dissertação mestrado. \par
\noindent
OBRIGATÓRIOS - author, title, school, year.  \par
\noindent
OPCIONAIS -  type, address, month, note, key.\par

\textbf{@phdthesis} - Tese de doutorado.  \par
\noindent
OBRIGATÓRIOS - author, title, school, year.  \par
\noindent
OPCIONAIS -  type, address, month, note, key.\par

Estas configurações do BibLateX são comuns nos programas de gerenciamento de bibliografias, como por exemplo no \emph{software} Mendeley. Os usuários deste programa tem uma facilidade na exportação para o formato do BibLateX, pois podem copiar as entradas com as informações de um trabalho e inserí-las dentro do arquivo .bib (Figura \ref{rmark_mendeley}).


\begin{figure}[!h]
\caption{Utilização do Mendeley para exportação de dados de bibliografias}
\centering
\includegraphics[width=.8\linewidth]{rmark_mendeley.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_mendeley}
\end{figure}


Após escolhidas as bibliografias a serem utilizadas no trabalho, o pesquisador deve inserir estas entradas como referências dentro do texto. Para isto, utiliza o nome da bibliografia inserida no arquivo .bib, no nosso exemplo ``bresser'' e ``Forstater2008'', como mostra a Figura \ref{rmark_citar}.

\begin{figure}[!h]
\caption{Inserção de citações no arquivo .Rmd}
\centering
\includegraphics[width=.8\linewidth]{rmark_citar.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_citar}
\end{figure}


Para que o arquivo que foi criado com as referências bibliográficas (bibliografia.bib) seja utilizado, o pesquisador deve informar o seu nome dentro do YAML no campo \verb|bibliography|. 
Mas qual norma será utilizada para as citações e a criação de referências bibliográficas neste trabalho, já que existem diversas delas? Uma solução é a utilização de arquivos ``.csl'' (Citation Style Language), que nada mais são do que arquivos com as descrições de cada estilo das diversas normas existentes, para ajudar o pesquisador a citar e gerenciar suas referências. 

Estes arquivos podem ser encontrados em diversos locais, como por exemplo em \url{https://github.com/citation-style-language/styles} (copie \href{https://raw.githubusercontent.com/citation-style-language/styles/44808db510152943c5d9dc471a9c8982a3edfbea/associacao-brasileira-de-normas-tecnicas-ipea.csl}{este} conteúdo para um arquivo ``.txt'' e o renomeie para ``.csl''). Lembrando que o arquivo ``.csl'' deve ser salvo na mesma pasta do arquivo ``.Rmd''. O arquivo csl aqui utilizado refere-se às normas da ABNT (Associação Brasileira de Normas Técnicas) utilizados pelo IPEA (Instituto de Pesquisa Econômica Aplicada). Verifica-se na Figura \ref{rmark_citar1} a configuração final do YAML. Neste site \url{http://editor.citationstyles.org/searchByName/} também são encontrados arquivos para várias normas bibliográficas.


\begin{figure}[!h]
\caption{Configurando YAML para citações e fererências}
\centering
\includegraphics[width=.8\linewidth]{rmark_citar1.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_citar1}
\end{figure}


Por fim, após inserir a citação no texto e informar ao RMarkdown os arquivos ``.bib'' e ``.csl'' no YAML, basta compilar o arquivo no formato desejado (atalho no teclado CTRL+SHIFT+K), neste caso Word. Lembre-se de inserir um título \verb|# Referências| ou \verb|# Referências Bibliográficas| ou \verb|# Bibliografia| (como preferir), no final do texto, pois serão inseridas as referências no final do trabalho.

A partir de então fica muito mais fácil alterar a norma necessária para a produção do trabalho acadêmico, utilizando os mesmos dados de um artigo ou outro material a ser citado. Isto agiliza a produção acadêmica e proporciona, como visto neste livro, uma interação muito proveitosa com a geração das análises por meio do RStudio. 

Segue o resultado do arquivo final:

\begin{figure}[!h]
\caption{Resultado final das citações e referências com RMarkdown}
\centering
\includegraphics[width=.8\linewidth]{rmark_citarf.png}
\legend{Fonte: Elaborado pelo(s) autor(es).}
\label{rmark_citarf}
\end{figure}
